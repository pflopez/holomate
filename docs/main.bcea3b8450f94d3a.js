(self.webpackChunkholomate=self.webpackChunkholomate||[]).push([[179],{591:(xt,E,Z)=>{"use strict";function z(t){return"function"==typeof t}function ce(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const m=ce(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,o)=>`${o+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function C(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class M{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const i of n)i.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(z(r))try{r()}catch(i){e=i instanceof m?i.errors:[i]}const{_finalizers:o}=this;if(o){this._finalizers=null;for(const i of o)try{V(i)}catch(s){e=e??[],s instanceof m?e=[...e,...s.errors]:e.push(s)}}if(e)throw new m(e)}}add(e){var n;if(e&&e!==this)if(this.closed)V(e);else{if(e instanceof M){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&C(n,e)}remove(e){const{_finalizers:n}=this;n&&C(n,e),e instanceof M&&e._removeParent(this)}}M.EMPTY=(()=>{const t=new M;return t.closed=!0,t})();const $=M.EMPTY;function U(t){return t instanceof M||t&&"closed"in t&&z(t.remove)&&z(t.add)&&z(t.unsubscribe)}function V(t){z(t)?t():t.unsubscribe()}const q={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},B={setTimeout(t,e,...n){const{delegate:r}=B;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=B;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function Be(t){B.setTimeout(()=>{const{onUnhandledError:e}=q;if(!e)throw t;e(t)})}function l(){}const h=y("C",void 0,void 0);function y(t,e,n){return{kind:t,value:e,error:n}}let w=null;function D(t){if(q.useDeprecatedSynchronousErrorHandling){const e=!w;if(e&&(w={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=w;if(w=null,n)throw r}}else t()}class P extends M{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,U(e)&&e.add(this)):this.destination=ft}static create(e,n,r){return new Ye(e,n,r)}next(e){this.isStopped?sn(function d(t){return y("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?sn(function g(t){return y("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?sn(h,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const G=Function.prototype.bind;function re(t,e){return G.call(t,e)}class Oe{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Pt(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Pt(r)}else Pt(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Pt(n)}}}class Ye extends P{constructor(e,n,r){let o;if(super(),z(e)||!e)o={next:e??void 0,error:n??void 0,complete:r??void 0};else{let i;this&&q.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&re(e.next,i),error:e.error&&re(e.error,i),complete:e.complete&&re(e.complete,i)}):o=e}this.destination=new Oe(o)}}function Pt(t){q.useDeprecatedSynchronousErrorHandling?function T(t){q.useDeprecatedSynchronousErrorHandling&&w&&(w.errorThrown=!0,w.error=t)}(t):Be(t)}function sn(t,e){const{onStoppedNotification:n}=q;n&&B.setTimeout(()=>n(t,e))}const ft={closed:!0,next:l,error:function se(t){throw t},complete:l},En="function"==typeof Symbol&&Symbol.observable||"@@observable";function an(t){return t}let ut=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,o){const i=function e_(t){return t&&t instanceof P||function Jm(t){return t&&z(t.next)&&z(t.error)&&z(t.complete)}(t)&&U(t)}(n)?n:new Ye(n,r,o);return D(()=>{const{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=Zl(r))((o,i)=>{const s=new Ye({next:a=>{try{n(a)}catch(u){i(u),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[En](){return this}pipe(...n){return function Wo(t){return 0===t.length?an:1===t.length?t[0]:function(n){return t.reduce((r,o)=>o(r),n)}}(n)(this)}toPromise(n){return new(n=Zl(n))((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return t.create=e=>new t(e),t})();function Zl(t){var e;return null!==(e=t??q.Promise)&&void 0!==e?e:Promise}const t_=ce(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let Wr=(()=>{class t extends ut{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new Kl(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new t_}next(n){D(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){D(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){D(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:o,observers:i}=this;return r||o?$:(this.currentObservers=null,i.push(n),new M(()=>{this.currentObservers=null,C(i,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:o,isStopped:i}=this;r?n.error(o):i&&n.complete()}asObservable(){const n=new ut;return n.source=this,n}}return t.create=(e,n)=>new Kl(e,n),t})();class Kl extends Wr{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:$}}function Cn(t){return e=>{if(function n_(t){return z(t?.lift)}(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function tr(t,e,n,r,o){return new r_(t,e,n,r,o)}class r_ extends P{constructor(e,n,r,o,i,s){super(e),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(u){e.error(u)}}:super._next,this._error=o?function(a){try{o(a)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Mn(t,e){return Cn((n,r)=>{let o=0;n.subscribe(tr(r,i=>{r.next(t.call(e,i,o++))}))})}function Hn(t){return this instanceof Hn?(this.v=t,this):new Hn(t)}function s_(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=n.apply(t,e||[]),i=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(_){r[_]&&(o[_]=function(v){return new Promise(function(b,I){i.push([_,v,b,I])>1||a(_,v)})})}function a(_,v){try{!function u(_){_.value instanceof Hn?Promise.resolve(_.value.v).then(c,f):p(i[0][2],_)}(r[_](v))}catch(b){p(i[0][3],b)}}function c(_){a("next",_)}function f(_){a("throw",_)}function p(_,v){_(v),i.shift(),i.length&&a(i[0][0],i[0][1])}}function a_(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function ec(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(s){return new Promise(function(a,u){!function o(i,s,a,u){Promise.resolve(u).then(function(c){i({value:c,done:a})},s)}(a,u,(s=t[i](s)).done,s.value)})}}}const tc=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function nc(t){return z(t?.then)}function rc(t){return z(t[En])}function oc(t){return Symbol.asyncIterator&&z(t?.[Symbol.asyncIterator])}function ic(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const sc=function l_(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function ac(t){return z(t?.[sc])}function uc(t){return s_(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:o}=yield Hn(n.read());if(o)return yield Hn(void 0);yield yield Hn(r)}}finally{n.releaseLock()}})}function lc(t){return z(t?.getReader)}function nr(t){if(t instanceof ut)return t;if(null!=t){if(rc(t))return function c_(t){return new ut(e=>{const n=t[En]();if(z(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(tc(t))return function d_(t){return new ut(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(nc(t))return function f_(t){return new ut(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,Be)})}(t);if(oc(t))return cc(t);if(ac(t))return function h_(t){return new ut(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(lc(t))return function p_(t){return cc(uc(t))}(t)}throw ic(t)}function cc(t){return new ut(e=>{(function g_(t,e){var n,r,o,i;return function o_(t,e,n,r){return new(n||(n=Promise))(function(i,s){function a(f){try{c(r.next(f))}catch(p){s(p)}}function u(f){try{c(r.throw(f))}catch(p){s(p)}}function c(f){f.done?i(f.value):function o(i){return i instanceof n?i:new n(function(s){s(i)})}(f.value).then(a,u)}c((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=a_(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=n.return)&&(yield i.call(n))}finally{if(o)throw o.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function In(t,e,n,r=0,o=!1){const i=e.schedule(function(){n(),o?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(i),!o)return i}function dc(t,e,n=1/0){return z(e)?dc((r,o)=>Mn((i,s)=>e(r,i,o,s))(nr(t(r,o))),n):("number"==typeof e&&(n=e),Cn((r,o)=>function m_(t,e,n,r,o,i,s,a){const u=[];let c=0,f=0,p=!1;const _=()=>{p&&!u.length&&!c&&e.complete()},v=I=>c<r?b(I):u.push(I),b=I=>{i&&e.next(I),c++;let x=!1;nr(n(I,f++)).subscribe(tr(e,R=>{o?.(R),i?v(R):e.next(R)},()=>{x=!0},void 0,()=>{if(x)try{for(c--;u.length&&c<r;){const R=u.shift();s?In(e,s,()=>b(R)):b(R)}_()}catch(R){e.error(R)}}))};return t.subscribe(tr(e,v,()=>{p=!0,_()})),()=>{a?.()}}(r,o,t,n)))}function fc(t=1/0){return dc(an,t)}const Ts=new ut(t=>t.complete());function As(t){return t[t.length-1]}function Ss(t){return function y_(t){return t&&z(t.schedule)}(As(t))?t.pop():void 0}function hc(t,e=0){return Cn((n,r)=>{n.subscribe(tr(r,o=>In(r,t,()=>r.next(o),e),()=>In(r,t,()=>r.complete(),e),o=>In(r,t,()=>r.error(o),e)))})}function pc(t,e=0){return Cn((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function gc(t,e){if(!t)throw new Error("Iterable cannot be null");return new ut(n=>{In(n,e,()=>{const r=t[Symbol.asyncIterator]();In(n,e,()=>{r.next().then(o=>{o.done?n.complete():n.next(o.value)})},0,!0)})})}function Ns(t,e){return e?function M_(t,e){if(null!=t){if(rc(t))return function D_(t,e){return nr(t).pipe(pc(e),hc(e))}(t,e);if(tc(t))return function b_(t,e){return new ut(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(nc(t))return function w_(t,e){return nr(t).pipe(pc(e),hc(e))}(t,e);if(oc(t))return gc(t,e);if(ac(t))return function E_(t,e){return new ut(n=>{let r;return In(n,e,()=>{r=t[sc](),In(n,e,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){return void n.error(s)}i?n.complete():n.next(o)},0,!0)}),()=>z(r?.return)&&r.return()})}(t,e);if(lc(t))return function C_(t,e){return gc(uc(t),e)}(t,e)}throw ic(t)}(t,e):nr(t)}function xs(t,e,...n){return!0===e?(t(),null):!1===e?null:e(...n).pipe(function T_(t){return t<=0?()=>Ts:Cn((e,n)=>{let r=0;e.subscribe(tr(n,o=>{++r<=t&&(n.next(o),t<=r&&n.complete())}))})}(1)).subscribe(()=>t())}function ye(t){for(let e in t)if(t[e]===ye)return e;throw Error("Could not find renamed property on target object.")}function ve(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(ve).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function Rs(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const S_=ye({__forward_ref__:ye});function Fs(t){return t.__forward_ref__=Fs,t.toString=function(){return ve(this())},t}function Y(t){return function Os(t){return"function"==typeof t&&t.hasOwnProperty(S_)&&t.__forward_ref__===Fs}(t)?t():t}class ae extends Error{constructor(e,n){super(function Qo(t,e){return`NG0${Math.abs(t)}${e?": "+e.trim():""}`}(e,n)),this.code=e}}function ee(t){return"string"==typeof t?t:null==t?"":String(t)}function Yo(t,e){throw new ae(-201,!1)}function pt(t,e){null==t&&function me(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t}`+(null==r?"":` [Expected=> ${n} ${r} ${e} <=Actual]`))}(e,t,null,"!=")}function Me(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function rr(t){return{providers:t.providers||[],imports:t.imports||[]}}function ks(t){return mc(t,Zo)||mc(t,yc)}function mc(t,e){return t.hasOwnProperty(e)?t[e]:null}function _c(t){return t&&(t.hasOwnProperty(Ls)||t.hasOwnProperty(L_))?t[Ls]:null}const Zo=ye({\u0275prov:ye}),Ls=ye({\u0275inj:ye}),yc=ye({ngInjectableDef:ye}),L_=ye({ngInjectorDef:ye});var K=(()=>((K=K||{})[K.Default=0]="Default",K[K.Host=1]="Host",K[K.Self=2]="Self",K[K.SkipSelf=4]="SkipSelf",K[K.Optional=8]="Optional",K))();let Bs;function Qt(t){const e=Bs;return Bs=t,e}function vc(t,e,n){const r=ks(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&K.Optional?null:void 0!==e?e:void Yo(ve(t))}function Tn(t){return{toString:t}.toString()}var Rt=(()=>((Rt=Rt||{})[Rt.OnPush=0]="OnPush",Rt[Rt.Default=1]="Default",Rt))(),Yt=(()=>{return(t=Yt||(Yt={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",Yt;var t})();const _e=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),or={},pe=[],Ko=ye({\u0275cmp:ye}),Vs=ye({\u0275dir:ye}),Hs=ye({\u0275pipe:ye}),Dc=ye({\u0275mod:ye}),ln=ye({\u0275fac:ye}),Qr=ye({__NG_ELEMENT_ID__:ye});let V_=0;function cn(t){return Tn(()=>{const n=!0===t.standalone,r={},o={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:r,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Rt.OnPush,directiveDefs:null,pipeDefs:null,standalone:n,dependencies:n&&t.dependencies||null,getStandaloneInjector:null,selectors:t.selectors||pe,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Yt.Emulated,id:"c"+V_++,styles:t.styles||pe,_:null,setInput:null,schemas:t.schemas||null,tView:null},i=t.dependencies,s=t.features;return o.inputs=Ec(t.inputs,r),o.outputs=Ec(t.outputs),s&&s.forEach(a=>a(o)),o.directiveDefs=i?()=>("function"==typeof i?i():i).map(wc).filter(bc):null,o.pipeDefs=i?()=>("function"==typeof i?i():i).map(tt).filter(bc):null,o})}function wc(t){return De(t)||et(t)}function bc(t){return null!==t}const j_={};function Yr(t){return Tn(()=>{const e={type:t.type,bootstrap:t.bootstrap||pe,declarations:t.declarations||pe,imports:t.imports||pe,exports:t.exports||pe,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(j_[t.id]=t.type),e})}function Ec(t,e){if(null==t)return or;const n={};for(const r in t)if(t.hasOwnProperty(r)){let o=t[r],i=o;Array.isArray(o)&&(i=o[1],o=o[0]),n[o]=r,e&&(e[o]=i)}return n}const Et=cn;function lt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,standalone:!0===t.standalone,onDestroy:t.type.prototype.ngOnDestroy||null}}function De(t){return t[Ko]||null}function et(t){return t[Vs]||null}function tt(t){return t[Hs]||null}function ct(t){return Array.isArray(t)&&"object"==typeof t[1]}function Ot(t){return Array.isArray(t)&&!0===t[1]}function $s(t){return 0!=(8&t.flags)}function ti(t){return 2==(2&t.flags)}function ni(t){return 1==(1&t.flags)}function kt(t){return null!==t.template}function z_(t){return 0!=(256&t[2])}function qn(t,e){return t.hasOwnProperty(ln)?t[ln]:null}class Y_{constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}function Ic(t){return t.type.prototype.ngOnChanges&&(t.setInput=K_),Z_}function Z_(){const t=Ac(this),e=t?.current;if(e){const n=t.previous;if(n===or)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function K_(t,e,n,r){const o=Ac(t)||function X_(t,e){return t[Tc]=e}(t,{previous:or,current:null}),i=o.current||(o.current={}),s=o.previous,a=this.declaredInputs[n],u=s[a];i[a]=new Y_(u&&u.currentValue,e,s===or),t[r]=e}const Tc="__ngSimpleChanges__";function Ac(t){return t[Tc]||null}let Qs;function xe(t){return!!t.listen}const Sc={createRenderer:(t,e)=>function Ys(){return void 0!==Qs?Qs:typeof document<"u"?document:void 0}()};function Ve(t){for(;Array.isArray(t);)t=t[0];return t}function oi(t,e){return Ve(e[t])}function It(t,e){return Ve(e[t.index])}function Zs(t,e){return t.data[e]}function _t(t,e){const n=e[t];return ct(n)?n:n[0]}function Ks(t){return 64==(64&t[2])}function An(t,e){return null==e?null:t[e]}function xc(t){t[18]=0}function Xs(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const J={lFrame:Hc(null),bindingsEnabled:!0};function Rc(){return J.bindingsEnabled}function N(){return J.lFrame.lView}function fe(){return J.lFrame.tView}function Jr(t){return J.lFrame.contextLView=t,t[8]}function eo(t){return J.lFrame.contextLView=null,t}function $e(){let t=Fc();for(;null!==t&&64===t.type;)t=t.parent;return t}function Fc(){return J.lFrame.currentTNode}function Zt(t,e){const n=J.lFrame;n.currentTNode=t,n.isParent=e}function Js(){return J.lFrame.isParent}function ea(){J.lFrame.isParent=!1}function nt(){const t=J.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function cr(){return J.lFrame.bindingIndex++}function fn(t){const e=J.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function gy(t,e){const n=J.lFrame;n.bindingIndex=n.bindingRootIndex=t,ta(e)}function ta(t){J.lFrame.currentDirectiveIndex=t}function ra(t){J.lFrame.currentQueryIndex=t}function _y(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function Bc(t,e,n){if(n&K.SkipSelf){let o=e,i=t;for(;!(o=o.parent,null!==o||n&K.Host||(o=_y(i),null===o||(i=i[15],10&o.type))););if(null===o)return!1;e=o,t=i}const r=J.lFrame=Vc();return r.currentTNode=e,r.lView=t,!0}function si(t){const e=Vc(),n=t[1];J.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Vc(){const t=J.lFrame,e=null===t?null:t.child;return null===e?Hc(t):e}function Hc(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function jc(){const t=J.lFrame;return J.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Gc=jc;function ai(){const t=jc();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function rt(){return J.lFrame.selectedIndex}function Sn(t){J.lFrame.selectedIndex=t}function ui(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const i=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:u,ngAfterViewChecked:c,ngOnDestroy:f}=i;s&&(t.contentHooks||(t.contentHooks=[])).push(-n,s),a&&((t.contentHooks||(t.contentHooks=[])).push(n,a),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,a)),u&&(t.viewHooks||(t.viewHooks=[])).push(-n,u),c&&((t.viewHooks||(t.viewHooks=[])).push(n,c),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,c)),null!=f&&(t.destroyHooks||(t.destroyHooks=[])).push(n,f)}}function li(t,e,n){$c(t,e,3,n)}function ci(t,e,n,r){(3&t[2])===n&&$c(t,e,n,r)}function oa(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function $c(t,e,n,r){const i=r??-1,s=e.length-1;let a=0;for(let u=void 0!==r?65535&t[18]:0;u<s;u++)if("number"==typeof e[u+1]){if(a=e[u],null!=r&&a>=r)break}else e[u]<0&&(t[18]+=65536),(a<i||-1==i)&&(Iy(t,n,e,u),t[18]=(4294901760&t[18])+u+2),u++}function Iy(t,e,n,r){const o=n[r]<0,i=n[r+1],a=t[o?-n[r]:n[r]];if(o){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{i.call(a)}finally{}}}else try{i.call(a)}finally{}}class no{constructor(e,n,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=r}}function di(t,e,n){const r=xe(t);let o=0;for(;o<n.length;){const i=n[o];if("number"==typeof i){if(0!==i)break;o++;const s=n[o++],a=n[o++],u=n[o++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=i,a=n[++o];sa(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),o++}}return o}function Uc(t){return 3===t||4===t||6===t}function sa(t){return 64===t.charCodeAt(0)}function fi(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const o=e[r];"number"==typeof o?n=o:0===n||qc(t,n,o,null,-1===n||2===n?e[++r]:null)}}return t}function qc(t,e,n,r,o){let i=0,s=t.length;if(-1===e)s=-1;else for(;i<t.length;){const a=t[i++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=i-1;break}}}for(;i<t.length;){const a=t[i];if("number"==typeof a)break;if(a===n){if(null===r)return void(null!==o&&(t[i+1]=o));if(r===t[i+1])return void(t[i+2]=o)}i++,null!==r&&i++,null!==o&&i++}-1!==s&&(t.splice(s,0,e),i=s+1),t.splice(i++,0,n),null!==r&&t.splice(i++,0,r),null!==o&&t.splice(i++,0,o)}function zc(t){return-1!==t}function dr(t){return 32767&t}function fr(t,e){let n=function xy(t){return t>>16}(t),r=e;for(;n>0;)r=r[15],n--;return r}let aa=!0;function hi(t){const e=aa;return aa=t,e}let Py=0;const Kt={};function oo(t,e){const n=la(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,ua(r.data,t),ua(e,null),ua(r.blueprint,null));const o=pi(t,e),i=t.injectorIndex;if(zc(o)){const s=dr(o),a=fr(o,e),u=a[1].data;for(let c=0;c<8;c++)e[i+c]=a[s+c]|u[s+c]}return e[i+8]=o,i}function ua(t,e){t.push(0,0,0,0,0,0,0,0,e)}function la(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function pi(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,o=e;for(;null!==o;){if(r=td(o),null===r)return-1;if(n++,o=o[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function gi(t,e,n){!function Ry(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Qr)&&(r=n[Qr]),null==r&&(r=n[Qr]=Py++);const o=255&r;e.data[t+(o>>5)]|=1<<o}(t,e,n)}function Yc(t,e,n){if(n&K.Optional)return t;Yo()}function Zc(t,e,n,r){if(n&K.Optional&&void 0===r&&(r=null),0==(n&(K.Self|K.Host))){const o=t[9],i=Qt(void 0);try{return o?o.get(e,r,n&K.Optional):vc(e,r,n&K.Optional)}finally{Qt(i)}}return Yc(r,0,n)}function Kc(t,e,n,r=K.Default,o){if(null!==t){if(1024&e[2]){const s=function Vy(t,e,n,r,o){let i=t,s=e;for(;null!==i&&null!==s&&1024&s[2]&&!(256&s[2]);){const a=Xc(i,s,n,r|K.Self,Kt);if(a!==Kt)return a;let u=i.parent;if(!u){const c=s[21];if(c){const f=c.get(n,Kt,r);if(f!==Kt)return f}u=td(s),s=s[15]}i=u}return o}(t,e,n,r,Kt);if(s!==Kt)return s}const i=Xc(t,e,n,r,Kt);if(i!==Kt)return i}return Zc(e,n,r,o)}function Xc(t,e,n,r,o){const i=function ky(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Qr)?t[Qr]:void 0;return"number"==typeof e?e>=0?255&e:Ly:e}(n);if("function"==typeof i){if(!Bc(e,t,r))return r&K.Host?Yc(o,0,r):Zc(e,n,r,o);try{const s=i(r);if(null!=s||r&K.Optional)return s;Yo()}finally{Gc()}}else if("number"==typeof i){let s=null,a=la(t,e),u=-1,c=r&K.Host?e[16][6]:null;for((-1===a||r&K.SkipSelf)&&(u=-1===a?pi(t,e):e[a+8],-1!==u&&ed(r,!1)?(s=e[1],a=dr(u),e=fr(u,e)):a=-1);-1!==a;){const f=e[1];if(Jc(i,a,f.data)){const p=Oy(a,e,n,s,r,c);if(p!==Kt)return p}u=e[a+8],-1!==u&&ed(r,e[1].data[a+8]===c)&&Jc(i,a,e)?(s=f,a=dr(u),e=fr(u,e)):a=-1}}return o}function Oy(t,e,n,r,o,i){const s=e[1],a=s.data[t+8],f=function mi(t,e,n,r,o){const i=t.providerIndexes,s=e.data,a=1048575&i,u=t.directiveStart,f=i>>20,_=o?a+f:t.directiveEnd;for(let v=r?a:a+f;v<_;v++){const b=s[v];if(v<u&&n===b||v>=u&&b.type===n)return v}if(o){const v=s[u];if(v&&kt(v)&&v.type===n)return u}return null}(a,s,n,null==r?ti(a)&&aa:r!=s&&0!=(3&a.type),o&K.Host&&i===a);return null!==f?io(e,s,f,a):Kt}function io(t,e,n,r){let o=t[n];const i=e.data;if(function Ty(t){return t instanceof no}(o)){const s=o;s.resolving&&function N_(t,e){const n=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new ae(-200,`Circular dependency in DI detected for ${t}${n}`)}(function he(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():ee(t)}(i[n]));const a=hi(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?Qt(s.injectImpl):null;Bc(t,r,K.Default);try{o=t[n]=s.factory(void 0,i,t,r),e.firstCreatePass&&n>=r.directiveStart&&function My(t,e,n){const{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=e.type.prototype;if(r){const s=Ic(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s)}o&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,o),i&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,i),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,i))}(n,i[n],e)}finally{null!==u&&Qt(u),hi(a),s.resolving=!1,Gc()}}return o}function Jc(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function ed(t,e){return!(t&K.Self||t&K.Host&&e)}class hr{constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return Kc(this._tNode,this._lView,e,r,n)}}function Ly(){return new hr($e(),N())}function td(t){const e=t[1],n=e.type;return 2===n?e.declTNode:1===n?t[6]:null}const gr="__parameters__";function _r(t,e,n){return Tn(()=>{const r=function fa(t){return function(...n){if(t){const r=t(...n);for(const o in r)this[o]=r[o]}}}(e);function o(...i){if(this instanceof o)return r.apply(this,i),this;const s=new o(...i);return a.annotation=s,a;function a(u,c,f){const p=u.hasOwnProperty(gr)?u[gr]:Object.defineProperty(u,gr,{value:[]})[gr];for(;p.length<=f;)p.push(null);return(p[f]=p[f]||[]).push(s),u}}return n&&(o.prototype=Object.create(n.prototype)),o.prototype.ngMetadataName=t,o.annotationCls=o,o})}class de{constructor(e,n){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=Me({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function hn(t,e){t.forEach(n=>Array.isArray(n)?hn(n,e):e(n))}function rd(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function _i(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function vt(t,e,n){let r=yr(t,e);return r>=0?t[1|r]=n:(r=~r,function $y(t,e,n,r){let o=t.length;if(o==e)t.push(n,r);else if(1===o)t.push(r,t[0]),t[0]=n;else{for(o--,t.push(t[o-1],t[o]);o>e;)t[o]=t[o-2],o--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function pa(t,e){const n=yr(t,e);if(n>=0)return t[1|n]}function yr(t,e){return function sd(t,e,n){let r=0,o=t.length>>n;for(;o!==r;){const i=r+(o-r>>1),s=t[i<<n];if(e===s)return i<<n;s>e?o=i:r=i+1}return~(o<<n)}(t,e,1)}const lo={},ma="__NG_DI_FLAG__",vi="ngTempTokenPath",Ky=/\n/gm,ad="__source";let co;function Di(t){const e=co;return co=t,e}function Jy(t,e=K.Default){if(void 0===co)throw new ae(-203,!1);return null===co?vc(t,void 0,e):co.get(t,e&K.Optional?null:void 0,e)}function ge(t,e=K.Default){return(function B_(){return Bs}()||Jy)(Y(t),e)}function _a(t){const e=[];for(let n=0;n<t.length;n++){const r=Y(t[n]);if(Array.isArray(r)){if(0===r.length)throw new ae(900,!1);let o,i=K.Default;for(let s=0;s<r.length;s++){const a=r[s],u=tv(a);"number"==typeof u?-1===u?o=a.token:i|=u:o=a}e.push(ge(o,i))}else e.push(ge(r))}return e}function fo(t,e){return t[ma]=e,t.prototype[ma]=e,t}function tv(t){return t[ma]}const wi=fo(_r("Optional"),8),bi=fo(_r("SkipSelf"),4);function xn(t){return t instanceof class vd{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}?t.changingThisBreaksApplicationSecurity:t}function Ia(t){return t.ngOriginalError}class wr{constructor(){this._console=console}handleError(e){const n=this._findOriginalError(e);this._console.error("ERROR",e),n&&this._console.error("ORIGINAL ERROR",n)}_findOriginalError(e){let n=e&&Ia(e);for(;n&&Ia(n);)n=Ia(n);return n||null}}const Ta=new Map;let Wv=0;const Sa="__ngContext__";function Xe(t,e){ct(e)?(t[Sa]=e[20],function Yv(t){Ta.set(t[20],t)}(e)):t[Sa]=e}function yo(t){const e=t[Sa];return"number"==typeof e?function Nd(t){return Ta.get(t)||null}(e):e||null}function Na(t){const e=yo(t);return e?ct(e)?e:e.lView:null}const oD=(()=>(typeof requestAnimationFrame<"u"&&requestAnimationFrame||setTimeout).bind(_e))();function Od(t){return t.ownerDocument.defaultView}var Dt=(()=>((Dt=Dt||{})[Dt.Important=1]="Important",Dt[Dt.DashCase=2]="DashCase",Dt))();function Pa(t,e){return undefined(t,e)}function vo(t){const e=t[3];return Ot(e)?e[3]:e}function Ra(t){return Hd(t[13])}function Fa(t){return Hd(t[4])}function Hd(t){for(;null!==t&&!Ot(t);)t=t[4];return t}function Er(t,e,n,r,o){if(null!=r){let i,s=!1;Ot(r)?i=r:ct(r)&&(s=!0,r=r[0]);const a=Ve(r);0===t&&null!==n?null==o?zd(e,n,a):zn(e,n,a,o||null,!0):1===t&&null!==n?zn(e,n,a,o||null,!0):2===t?function ef(t,e,n){const r=Si(t,e);r&&function yD(t,e,n,r){xe(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=i&&function wD(t,e,n,r,o){const i=n[7];i!==Ve(n)&&Er(e,t,r,i,o);for(let a=10;a<n.length;a++){const u=n[a];Do(u[1],u,t,e,r,i)}}(e,t,i,n,o)}}function ka(t,e,n){if(xe(t))return t.createElement(e,n);{const r=null!==n?function ny(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(n):null;return null===r?t.createElement(e):t.createElementNS(r,e)}}function Gd(t,e){const n=t[9],r=n.indexOf(e),o=e[3];512&e[2]&&(e[2]&=-513,Xs(o,-1)),n.splice(r,1)}function La(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Gd(o,r),e>0&&(t[n-1][4]=r[4]);const i=_i(t,10+e);!function cD(t,e){Do(t,e,e[11],2,null,null),e[0]=null,e[6]=null}(r[1],r);const s=i[19];null!==s&&s.detachView(i[1]),r[3]=null,r[4]=null,r[2]&=-65}return r}function $d(t,e){if(!(128&e[2])){const n=e[11];xe(n)&&n.destroyNode&&Do(t,e,n,3,null,null),function hD(t){let e=t[13];if(!e)return Ba(t[1],t);for(;e;){let n=null;if(ct(e))n=e[13];else{const r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)ct(e)&&Ba(e[1],e),e=e[3];null===e&&(e=t),ct(e)&&Ba(e[1],e),n=e&&e[4]}e=n}}(e)}}function Ba(t,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function _D(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const o=e[n[r]];if(!(o instanceof no)){const i=n[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){const a=o[i[s]],u=i[s+1];try{u.call(a)}finally{}}else try{i.call(o)}finally{}}}}(t,e),function mD(t,e){const n=t.cleanup,r=e[7];let o=-1;if(null!==n)for(let i=0;i<n.length-1;i+=2)if("string"==typeof n[i]){const s=n[i+1],a="function"==typeof s?s(e):Ve(e[s]),u=r[o=n[i+2]],c=n[i+3];"boolean"==typeof c?a.removeEventListener(n[i],u,c):c>=0?r[o=c]():r[o=-c].unsubscribe(),i+=2}else{const s=r[o=n[i+1]];n[i].call(s)}if(null!==r){for(let i=o+1;i<r.length;i++)r[i]();e[7]=null}}(t,e),1===e[1].type&&xe(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&Ot(e[3])){n!==e[3]&&Gd(n,e);const r=e[19];null!==r&&r.detachView(t)}!function Zv(t){Ta.delete(t[20])}(e)}}function Ud(t,e,n){return function qd(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const o=t.data[r.directiveStart].encapsulation;if(o===Yt.None||o===Yt.Emulated)return null}return It(r,n)}(t,e.parent,n)}function zn(t,e,n,r,o){xe(t)?t.insertBefore(e,n,r,o):(Qd(e)?e.content:e).insertBefore(n,r,o)}function zd(t,e,n){xe(t)?t.appendChild(e,n):(Qd(e)?e.content:e).appendChild(n)}function Wd(t,e,n,r,o){null!==r?zn(t,e,n,r,o):zd(t,e,n)}function Qd(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}function Si(t,e){return xe(t)?t.parentNode(e):e.parentNode}let Kd=function Zd(t,e,n){return 40&t.type?It(t,n):null};function Ni(t,e,n,r){const o=Ud(t,r,e),i=e[11],a=function Yd(t,e,n){return Kd(t,e,n)}(r.parent||e[6],r,e);if(null!=o)if(Array.isArray(n))for(let u=0;u<n.length;u++)Wd(i,o,n[u],a,!1);else Wd(i,o,n,a,!1)}function xi(t,e){if(null!==e){const n=e.type;if(3&n)return It(e,t);if(4&n)return Ha(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return xi(t,r);{const o=t[e.index];return Ot(o)?Ha(-1,o):Ve(o)}}if(32&n)return Pa(e,t)()||Ve(t[e.index]);{const r=Jd(t,e);return null!==r?Array.isArray(r)?r[0]:xi(vo(t[16]),r):xi(t,e.next)}}return null}function Jd(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Ha(t,e){const n=10+t+1;if(n<e.length){const r=e[n],o=r[1].firstChild;if(null!==o)return xi(r,o)}return e[7]}function ja(t,e,n,r,o,i,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&Xe(Ve(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)ja(t,e,n.child,r,o,i,!1),Er(e,t,o,a,i);else if(32&u){const c=Pa(n,r);let f;for(;f=c();)Er(e,t,o,f,i);Er(e,t,o,a,i)}else 16&u?tf(t,e,r,n,o,i):Er(e,t,o,a,i);n=s?n.projectionNext:n.next}}function Do(t,e,n,r,o,i){ja(n,r,t.firstChild,e,o,i,!1)}function tf(t,e,n,r,o,i){const s=n[16],u=s[6].projection[r.projection];if(Array.isArray(u))for(let c=0;c<u.length;c++)Er(e,t,o,u[c],i);else ja(t,e,u,s[3],o,i,!0)}function nf(t,e,n){xe(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Ga(t,e,n){xe(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function rf(t,e,n){let r=t.length;for(;;){const o=t.indexOf(e,n);if(-1===o)return o;if(0===o||t.charCodeAt(o-1)<=32){const i=e.length;if(o+i===r||t.charCodeAt(o+i)<=32)return o}n=o+1}}const of="ng-template";function ED(t,e,n){let r=0;for(;r<t.length;){let o=t[r++];if(n&&"class"===o){if(o=t[r],-1!==rf(o.toLowerCase(),e,0))return!0}else if(1===o){for(;r<t.length&&"string"==typeof(o=t[r++]);)if(o.toLowerCase()===e)return!0;return!1}}return!1}function sf(t){return 4===t.type&&t.value!==of}function CD(t,e,n){return e===(4!==t.type||n?t.value:of)}function MD(t,e,n){let r=4;const o=t.attrs||[],i=function AD(t){for(let e=0;e<t.length;e++)if(Uc(t[e]))return e;return t.length}(o);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!CD(t,u,n)||""===u&&1===e.length){if(Lt(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!ED(t.attrs,c,n)){if(Lt(r))return!1;s=!0}continue}const p=ID(8&r?"class":u,o,sf(t),n);if(-1===p){if(Lt(r))return!1;s=!0;continue}if(""!==c){let _;_=p>i?"":o[p+1].toLowerCase();const v=8&r?_:null;if(v&&-1!==rf(v,c,0)||2&r&&c!==_){if(Lt(r))return!1;s=!0}}}}else{if(!s&&!Lt(r)&&!Lt(u))return!1;if(s&&Lt(u))continue;s=!1,r=u|1&r}}return Lt(r)||s}function Lt(t){return 0==(1&t)}function ID(t,e,n,r){if(null===e)return-1;let o=0;if(r||!n){let i=!1;for(;o<e.length;){const s=e[o];if(s===t)return o;if(3===s||6===s)i=!0;else{if(1===s||2===s){let a=e[++o];for(;"string"==typeof a;)a=e[++o];continue}if(4===s)break;if(0===s){o+=4;continue}}o+=i?1:2}return-1}return function SD(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function af(t,e,n=!1){for(let r=0;r<e.length;r++)if(MD(t,e[r],n))return!0;return!1}function uf(t,e){return t?":not("+e.trim()+")":e}function xD(t){let e=t[0],n=1,r=2,o="",i=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const a=t[++n];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?o+="."+s:4&r&&(o+=" "+s);else""!==o&&!Lt(s)&&(e+=uf(i,o),o=""),r=s,i=i||!Lt(r);n++}return""!==o&&(e+=uf(i,o)),e}const te={};function ke(t){lf(fe(),N(),rt()+t,!1)}function lf(t,e,n,r){if(!r)if(3==(3&e[2])){const i=t.preOrderCheckHooks;null!==i&&li(e,i,n)}else{const i=t.preOrderHooks;null!==i&&ci(e,i,0,n)}Sn(n)}const hf=new de("ENVIRONMENT_INITIALIZER"),pf=new de("INJECTOR_DEF_TYPES");function VD(...t){return{\u0275providers:gf(0,t)}}function gf(t,...e){const n=[],r=new Set;let o;return hn(e,i=>{const s=i;$a(s,n,[],r)&&(o||(o=[]),o.push(s))}),void 0!==o&&mf(o,n),n}function mf(t,e){for(let n=0;n<t.length;n++){const{providers:o}=t[n];hn(o,i=>{e.push(i)})}}function $a(t,e,n,r){if(!(t=Y(t)))return!1;let o=null,i=_c(t);const s=!i&&De(t);if(i||s){if(s&&!s.standalone)return!1;o=t}else{const u=t.ngModule;if(i=_c(u),!i)return!1;o=u}const a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){const u="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const c of u)$a(c,e,n,r)}}else{if(!i)return!1;{if(null!=i.imports&&!a){let c;r.add(o);try{hn(i.imports,f=>{$a(f,e,n,r)&&(c||(c=[]),c.push(f))})}finally{}void 0!==c&&mf(c,e)}if(!a){const c=qn(o)||(()=>new o);e.push({provide:o,useFactory:c,deps:pe},{provide:pf,useValue:o,multi:!0},{provide:hf,useValue:()=>ge(o),multi:!0})}const u=i.providers;null==u||a||hn(u,f=>{e.push(f)})}}return o!==t&&void 0!==t.providers}const HD=ye({provide:String,useValue:ye});function Ua(t){return null!==t&&"object"==typeof t&&HD in t}function Wn(t){return"function"==typeof t}const qa=new de("INJECTOR",-1);class vf{get(e,n=lo){if(n===lo){const r=new Error(`NullInjectorError: No provider for ${ve(e)}!`);throw r.name="NullInjectorError",r}return n}}const za=new de("Set Injector scope."),Pi={},GD={};let Wa;function Qa(){return void 0===Wa&&(Wa=new vf),Wa}class wo{}class Df extends wo{constructor(e,n,r,o){super(),this.parent=n,this.source=r,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Za(e,s=>this.processProvider(s)),this.records.set(qa,Cr(void 0,this)),o.has("environment")&&this.records.set(wo,Cr(void 0,this));const i=this.records.get(za);null!=i&&"string"==typeof i.value&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(pf.multi,pe,K.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}get(e,n=lo,r=K.Default){this.assertNotDestroyed();const o=Di(this),i=Qt(void 0);try{if(!(r&K.SkipSelf)){let a=this.records.get(e);if(void 0===a){const u=function WD(t){return"function"==typeof t||"object"==typeof t&&t instanceof de}(e)&&ks(e);a=u&&this.injectableDefInScope(u)?Cr(Ya(e),Pi):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(r&K.Self?Qa():this.parent).get(e,n=r&K.Optional&&n===lo?null:n)}catch(s){if("NullInjectorError"===s.name){if((s[vi]=s[vi]||[]).unshift(ve(e)),o)throw s;return function nv(t,e,n,r){const o=t[vi];throw e[ad]&&o.unshift(e[ad]),t.message=function rv(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.slice(2):t;let o=ve(e);if(Array.isArray(e))o=e.map(ve).join(" -> ");else if("object"==typeof e){let i=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];i.push(s+":"+("string"==typeof a?JSON.stringify(a):ve(a)))}o=`{${i.join(", ")}}`}return`${n}${r?"("+r+")":""}[${o}]: ${t.replace(Ky,"\n  ")}`}("\n"+t.message,o,n,r),t.ngTokenPath=o,t[vi]=null,t}(s,e,"R3InjectorError",this.source)}throw s}finally{Qt(i),Di(o)}}resolveInjectorInitializers(){const e=Di(this),n=Qt(void 0);try{const r=this.get(hf.multi,pe,K.Self);for(const o of r)o()}finally{Di(e),Qt(n)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(ve(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ae(205,!1)}processProvider(e){let n=Wn(e=Y(e))?e:Y(e&&e.provide);const r=function UD(t){return Ua(t)?Cr(void 0,t.useValue):Cr(function wf(t,e,n){let r;if(Wn(t)){const o=Y(t);return qn(o)||Ya(o)}if(Ua(t))r=()=>Y(t.useValue);else if(function yf(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(..._a(t.deps||[]));else if(function _f(t){return!(!t||!t.useExisting)}(t))r=()=>ge(Y(t.useExisting));else{const o=Y(t&&(t.useClass||t.provide));if(!function qD(t){return!!t.deps}(t))return qn(o)||Ya(o);r=()=>new o(..._a(t.deps))}return r}(t),Pi)}(e);if(Wn(e)||!0!==e.multi)this.records.get(n);else{let o=this.records.get(n);o||(o=Cr(void 0,Pi,!0),o.factory=()=>_a(o.multi),this.records.set(n,o)),n=e,o.multi.push(e)}this.records.set(n,r)}hydrate(e,n){return n.value===Pi&&(n.value=GD,n.value=n.factory()),"object"==typeof n.value&&n.value&&function zD(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}injectableDefInScope(e){if(!e.providedIn)return!1;const n=Y(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}}function Ya(t){const e=ks(t),n=null!==e?e.factory:qn(t);if(null!==n)return n;if(t instanceof de)throw new ae(204,!1);if(t instanceof Function)return function $D(t){const e=t.length;if(e>0)throw function uo(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}(e,"?"),new ae(204,!1);const n=function O_(t){const e=t&&(t[Zo]||t[yc]);if(e){const n=function k_(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new ae(204,!1)}function Cr(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function QD(t){return!!t.\u0275providers}function Za(t,e){for(const n of t)Array.isArray(n)?Za(n,e):QD(n)?Za(n.\u0275providers,e):e(n)}function bf(t,e=null,n=null,r){const o=Ef(t,e,n,r);return o.resolveInjectorInitializers(),o}function Ef(t,e=null,n=null,r,o=new Set){const i=[n||pe,VD(t)];return r=r||("object"==typeof t?void 0:ve(t)),new Df(i,e||Qa(),r||null,o)}let Jt=(()=>{class t{static create(n,r){if(Array.isArray(n))return bf({name:""},r,n,"");{const o=n.name??"";return bf({name:o},n.parent,n.providers,o)}}}return t.THROW_IF_NOT_FOUND=lo,t.NULL=new vf,t.\u0275prov=Me({token:t,providedIn:"any",factory:()=>ge(qa)}),t.__NG_ELEMENT_ID__=-1,t})();function X(t,e=K.Default){const n=N();return null===n?ge(t,e):Kc($e(),n,Y(t),e)}function Fi(t,e){return t<<17|e<<2}function Bt(t){return t>>17&32767}function ou(t){return 2|t}function gn(t){return(131068&t)>>2}function iu(t,e){return-131069&t|e<<2}function su(t){return 1|t}function $f(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const o=n[r],i=n[r+1];if(-1!==i){const s=t.data[i];ra(o),s.contentQueries(2,e[i],i)}}}function bo(t,e,n,r,o,i,s,a,u,c,f){const p=e.blueprint.slice();return p[0]=o,p[2]=76|r,(null!==f||t&&1024&t[2])&&(p[2]|=1024),xc(p),p[3]=p[15]=t,p[8]=n,p[10]=s||t&&t[10],p[11]=a||t&&t[11],p[12]=u||t&&t[12]||null,p[9]=c||t&&t[9]||null,p[6]=i,p[20]=function Qv(){return Wv++}(),p[21]=f,p[16]=2==e.type?t[16]:p,p}function Ir(t,e,n,r,o){let i=t.data[e];if(null===i)i=function gu(t,e,n,r,o){const i=Fc(),s=Js(),u=t.data[e]=function Tw(t,e,n,r,o,i){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?i:i&&i.parent,n,e,r,o);return null===t.firstChild&&(t.firstChild=u),null!==i&&(s?null==i.child&&null!==u.parent&&(i.child=u):null===i.next&&(i.next=u)),u}(t,e,n,r,o),function py(){return J.lFrame.inI18n}()&&(i.flags|=64);else if(64&i.type){i.type=n,i.value=r,i.attrs=o;const s=function to(){const t=J.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();i.injectorIndex=null===s?-1:s.injectorIndex}return Zt(i,!0),i}function Tr(t,e,n,r){if(0===n)return-1;const o=e.length;for(let i=0;i<n;i++)e.push(r),t.blueprint.push(r),t.data.push(null);return o}function Eo(t,e,n){si(e);try{const r=t.viewQuery;null!==r&&Cu(1,r,n);const o=t.template;null!==o&&Uf(t,e,o,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&$f(t,e),t.staticViewQueries&&Cu(2,t.viewQuery,n);const i=t.components;null!==i&&function Cw(t,e){for(let n=0;n<e.length;n++)qw(t,e[n])}(e,i)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[2]&=-5,ai()}}function Ar(t,e,n,r){const o=e[2];if(128!=(128&o)){si(e);try{xc(e),function Oc(t){return J.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&Uf(t,e,n,2,r);const s=3==(3&o);if(s){const c=t.preOrderCheckHooks;null!==c&&li(e,c,null)}else{const c=t.preOrderHooks;null!==c&&ci(e,c,0,null),oa(e,0)}if(function $w(t){for(let e=Ra(t);null!==e;e=Fa(e)){if(!e[2])continue;const n=e[9];for(let r=0;r<n.length;r++){const o=n[r],i=o[3];0==(512&o[2])&&Xs(i,1),o[2]|=512}}}(e),function Gw(t){for(let e=Ra(t);null!==e;e=Fa(e))for(let n=10;n<e.length;n++){const r=e[n],o=r[1];Ks(r)&&Ar(o,r,o.template,r[8])}}(e),null!==t.contentQueries&&$f(t,e),s){const c=t.contentCheckHooks;null!==c&&li(e,c)}else{const c=t.contentHooks;null!==c&&ci(e,c,1),oa(e,1)}!function bw(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const o=n[r];if(o<0)Sn(~o);else{const i=o,s=n[++r],a=n[++r];gy(s,i),a(2,e[i])}}}finally{Sn(-1)}}(t,e);const a=t.components;null!==a&&function Ew(t,e){for(let n=0;n<e.length;n++)Uw(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Cu(2,u,r),s){const c=t.viewCheckHooks;null!==c&&li(e,c)}else{const c=t.viewHooks;null!==c&&ci(e,c,2),oa(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,Xs(e[3],-1))}finally{ai()}}}function Mw(t,e,n,r){const o=e[10],s=function Nc(t){return 4==(4&t[2])}(e);try{!s&&o.begin&&o.begin(),s&&Eo(t,e,r),Ar(t,e,n,r)}finally{!s&&o.end&&o.end()}}function Uf(t,e,n,r,o){const i=rt(),s=2&r;try{Sn(-1),s&&e.length>22&&lf(t,e,22,!1),n(r,o)}finally{Sn(i)}}function qf(t,e,n){if($s(e)){const o=e.directiveEnd;for(let i=e.directiveStart;i<o;i++){const s=t.data[i];s.contentQueries&&s.contentQueries(1,n[i],i)}}}function mu(t,e,n){!Rc()||(function Fw(t,e,n,r){const o=n.directiveStart,i=n.directiveEnd;t.firstCreatePass||oo(n,e),Xe(r,e);const s=n.initialInputs;for(let a=o;a<i;a++){const u=t.data[a],c=kt(u);c&&Vw(e,n,u);const f=io(e,t,a,n);Xe(f,e),null!==s&&Hw(0,a-o,f,u,0,s),c&&(_t(n.index,e)[8]=f)}}(t,e,n,It(n,e)),128==(128&n.flags)&&function Ow(t,e,n){const r=n.directiveStart,o=n.directiveEnd,i=n.index,s=function my(){return J.lFrame.currentDirectiveIndex}();try{Sn(i);for(let a=r;a<o;a++){const u=t.data[a],c=e[a];ta(a),(null!==u.hostBindings||0!==u.hostVars||null!==u.hostAttrs)&&Xf(u,c)}}finally{Sn(-1),ta(s)}}(t,e,n))}function _u(t,e,n=It){const r=e.localNames;if(null!==r){let o=e.index+1;for(let i=0;i<r.length;i+=2){const s=r[i+1],a=-1===s?n(e,t):t[s];t[o++]=a}}}function zf(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Li(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Li(t,e,n,r,o,i,s,a,u,c){const f=22+r,p=f+o,_=function Iw(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:te);return n}(f,p),v="function"==typeof c?c():c;return _[1]={type:t,blueprint:_,template:n,queries:null,viewQuery:a,declTNode:e,data:_.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:p,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:v,incompleteFirstPass:!1}}function Zf(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const o=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,o):n[r]=[e,o]}return n}function yu(t,e,n,r){let o=!1;if(Rc()){const i=function kw(t,e,n){const r=t.directiveRegistry;let o=null;if(r)for(let i=0;i<r.length;i++){const s=r[i];af(n,s.selectors,!1)&&(o||(o=[]),gi(oo(n,e),t,s.type),kt(s)?(Jf(t,n),o.unshift(s)):o.push(s))}return o}(t,e,n),s=null===r?null:{"":-1};if(null!==i){o=!0,eh(n,t.data.length,i.length);for(let f=0;f<i.length;f++){const p=i[f];p.providersResolver&&p.providersResolver(p)}let a=!1,u=!1,c=Tr(t,e,i.length,null);for(let f=0;f<i.length;f++){const p=i[f];n.mergedAttrs=fi(n.mergedAttrs,p.hostAttrs),th(t,n,e,c,p),Bw(c,p,s),null!==p.contentQueries&&(n.flags|=8),(null!==p.hostBindings||null!==p.hostAttrs||0!==p.hostVars)&&(n.flags|=128);const _=p.type.prototype;!a&&(_.ngOnChanges||_.ngOnInit||_.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),a=!0),!u&&(_.ngOnChanges||_.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),u=!0),c++}!function Aw(t,e){const r=e.directiveEnd,o=t.data,i=e.attrs,s=[];let a=null,u=null;for(let c=e.directiveStart;c<r;c++){const f=o[c],p=f.inputs,_=null===i||sf(e)?null:jw(p,i);s.push(_),a=Zf(p,c,a),u=Zf(f.outputs,c,u)}null!==a&&(a.hasOwnProperty("class")&&(e.flags|=16),a.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=s,e.inputs=a,e.outputs=u}(t,n)}s&&function Lw(t,e,n){if(e){const r=t.localNames=[];for(let o=0;o<e.length;o+=2){const i=n[e[o+1]];if(null==i)throw new ae(-301,!1);r.push(e[o],i)}}}(n,r,s)}return n.mergedAttrs=fi(n.mergedAttrs,n.attrs),o}function Kf(t,e,n,r,o,i){const s=i.hostBindings;if(s){let a=t.hostBindingOpCodes;null===a&&(a=t.hostBindingOpCodes=[]);const u=~e.index;(function Rw(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(a)!=u&&a.push(u),a.push(r,o,s)}}function Xf(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Jf(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Bw(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;kt(e)&&(n[""]=t)}}function eh(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function th(t,e,n,r,o){t.data[r]=o;const i=o.factory||(o.factory=qn(o.type)),s=new no(i,kt(o),X);t.blueprint[r]=s,n[r]=s,Kf(t,e,0,r,Tr(t,n,o.hostVars,te),o)}function Vw(t,e,n){const r=It(e,t),o=zf(n),i=t[10],s=Bi(t,bo(t,o,null,n.onPush?32:16,r,e,i,i.createRenderer(r,n),null,null,null));t[e.index]=s}function Hw(t,e,n,r,o,i){const s=i[e];if(null!==s){const a=r.setInput;for(let u=0;u<s.length;){const c=s[u++],f=s[u++],p=s[u++];null!==a?r.setInput(n,p,c,f):n[f]=p}}}function jw(t,e){let n=null,r=0;for(;r<e.length;){const o=e[r];if(0!==o)if(5!==o){if("number"==typeof o)break;t.hasOwnProperty(o)&&(null===n&&(n=[]),n.push(o,t[o],e[r+1])),r+=2}else r+=2;else r+=4}return n}function nh(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Uw(t,e){const n=_t(e,t);if(Ks(n)){const r=n[1];48&n[2]?Ar(r,n,r.template,n[8]):n[5]>0&&Du(n)}}function Du(t){for(let r=Ra(t);null!==r;r=Fa(r))for(let o=10;o<r.length;o++){const i=r[o];if(512&i[2]){const s=i[1];Ar(s,i,s.template,i[8])}else i[5]>0&&Du(i)}const n=t[1].components;if(null!==n)for(let r=0;r<n.length;r++){const o=_t(n[r],t);Ks(o)&&o[5]>0&&Du(o)}}function qw(t,e){const n=_t(e,t),r=n[1];(function zw(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])})(r,n),Eo(r,n,n[8])}function Bi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function wu(t){for(;t;){t[2]|=32;const e=vo(t);if(z_(t)&&!e)return t;t=e}return null}function rh(t){!function bu(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Na(n);if(null!==r){const o=r[1];Mw(o,r,o.template,n)}}}(t[8])}function Cu(t,e,n){ra(0),e(t,n)}const Qw=(()=>Promise.resolve(null))();function oh(t){return t[7]||(t[7]=[])}function ih(t){return t.cleanup||(t.cleanup=[])}function ah(t,e){const n=t[9],r=n?n.get(wr,null):null;r&&r.handleError(e)}function uh(t,e,n,r,o){for(let i=0;i<n.length;){const s=n[i++],a=n[i++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,o,r,a):u[a]=o}}function mn(t,e,n){const r=oi(e,t);!function jd(t,e,n){xe(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}function Vi(t,e,n){let r=n?t.styles:null,o=n?t.classes:null,i=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?i=a:1==i?o=Rs(o,a):2==i&&(r=Rs(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=o:t.classesWithoutHost=o}function s0(){const t=$e();ui(N()[1],t)}let Hi=null;function Qn(){if(!Hi){const t=_e.Symbol;if(t&&t.iterator)Hi=t.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<e.length;++n){const r=e[n];"entries"!==r&&"size"!==r&&Map.prototype[r]===Map.prototype.entries&&(Hi=r)}}}return Hi}function Co(t){return!!Tu(t)&&(Array.isArray(t)||!(t instanceof Map)&&Qn()in t)}function Tu(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Je(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function _n(t,e,n,r,o,i,s,a){const u=N(),c=fe(),f=t+22,p=c.firstCreatePass?function _0(t,e,n,r,o,i,s,a,u){const c=e.consts,f=Ir(e,t,4,s||null,An(c,a));yu(e,n,f,An(c,u)),ui(e,f);const p=f.tViews=Li(2,f,r,o,i,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,f),p.queries=e.queries.embeddedTView(f)),f}(f,c,u,e,n,r,o,i,s):c.data[f];Zt(p,!1);const _=u[11].createComment("");Ni(c,u,_,p),Xe(_,u),Bi(u,u[f]=nh(_,u,_,p)),ni(p)&&mu(c,u,p),null!=s&&_u(u,p,a)}function Re(t,e,n){const r=N();return Je(r,cr(),e)&&function wt(t,e,n,r,o,i,s,a){const u=It(e,n);let f,c=e.inputs;!a&&null!=c&&(f=c[r])?(uh(t,n,f,r,o),ti(e)&&function Nw(t,e){const n=_t(e,t);16&n[2]||(n[2]|=32)}(n,e.index)):3&e.type&&(r=function Sw(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(r),o=null!=s?s(o,e.value||"",r):o,xe(i)?i.setProperty(u,r,o):sa(r)||(u.setProperty?u.setProperty(r,o):u[r]=o))}(fe(),function Pe(){const t=J.lFrame;return Zs(t.tView,t.selectedIndex)}(),r,t,e,r[11],n,!1),Re}function Au(t,e,n,r,o){const s=o?"class":"style";uh(t,n,e.inputs[s],s,r)}function we(t,e,n,r){const o=N(),i=fe(),s=22+t,a=o[11],u=o[s]=ka(a,e,function Cy(){return J.lFrame.currentNamespace}()),c=i.firstCreatePass?function D0(t,e,n,r,o,i,s){const a=e.consts,c=Ir(e,t,2,o,An(a,i));return yu(e,n,c,An(a,s)),null!==c.attrs&&Vi(c,c.attrs,!1),null!==c.mergedAttrs&&Vi(c,c.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,c),c}(s,i,o,0,e,n,r):i.data[s];Zt(c,!0);const f=c.mergedAttrs;null!==f&&di(a,u,f);const p=c.classes;null!==p&&Ga(a,u,p);const _=c.styles;return null!==_&&nf(a,u,_),64!=(64&c.flags)&&Ni(i,o,u,c),0===function uy(){return J.lFrame.elementDepthCount}()&&Xe(u,o),function ly(){J.lFrame.elementDepthCount++}(),ni(c)&&(mu(i,o,c),qf(i,c,o)),null!==r&&_u(o,c),we}function Ee(){let t=$e();Js()?ea():(t=t.parent,Zt(t,!1));const e=t;!function cy(){J.lFrame.elementDepthCount--}();const n=fe();return n.firstCreatePass&&(ui(n,t),$s(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function Sy(t){return 0!=(16&t.flags)}(e)&&Au(n,e,N(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function Ny(t){return 0!=(32&t.flags)}(e)&&Au(n,e,N(),e.stylesWithoutHost,!1),Ee}function Fn(t,e,n,r){return we(t,e,n,r),Ee(),Fn}function Gi(t,e,n){const r=N(),o=fe(),i=t+22,s=o.firstCreatePass?function w0(t,e,n,r,o){const i=e.consts,s=An(i,r),a=Ir(e,t,8,"ng-container",s);return null!==s&&Vi(a,s,!0),yu(e,n,a,An(i,o)),null!==e.queries&&e.queries.elementStart(e,a),a}(i,o,r,e,n):o.data[i];Zt(s,!0);const a=r[i]=r[11].createComment("");return Ni(o,r,a,s),Xe(a,r),ni(s)&&(mu(o,r,s),qf(o,s,r)),null!=n&&_u(r,s),Gi}function $i(){let t=$e();const e=fe();return Js()?ea():(t=t.parent,Zt(t,!1)),e.firstCreatePass&&(ui(e,t),$s(t)&&e.queries.elementEnd(t)),$i}function Ui(){return N()}function Su(t){return!!t&&"function"==typeof t.then}function Rh(t){return!!t&&"function"==typeof t.subscribe}const b0=Rh;function bt(t,e,n,r){const o=N(),i=fe(),s=$e();return function Oh(t,e,n,r,o,i,s,a){const u=ni(r),f=t.firstCreatePass&&ih(t),p=e[8],_=oh(e);let v=!0;if(3&r.type||a){const x=It(r,e),R=a?a(x):x,H=_.length,S=a?j=>a(Ve(j[r.index])):r.index;if(xe(n)){let j=null;if(!a&&u&&(j=function E0(t,e,n,r){const o=t.cleanup;if(null!=o)for(let i=0;i<o.length-1;i+=2){const s=o[i];if(s===n&&o[i+1]===r){const a=e[7],u=o[i+2];return a.length>u?a[u]:null}"string"==typeof s&&(i+=2)}return null}(t,e,o,r.index)),null!==j)(j.__ngLastListenerFn__||j).__ngNextListenerFn__=i,j.__ngLastListenerFn__=i,v=!1;else{i=Nu(r,e,p,i,!1);const le=n.listen(R,o,i);_.push(i,le),f&&f.push(o,S,H,H+1)}}else i=Nu(r,e,p,i,!0),R.addEventListener(o,i,s),_.push(i),f&&f.push(o,S,H,s)}else i=Nu(r,e,p,i,!1);const b=r.outputs;let I;if(v&&null!==b&&(I=b[o])){const x=I.length;if(x)for(let R=0;R<x;R+=2){const Ie=e[I[R]][I[R+1]].subscribe(i),er=_.length;_.push(i,Ie),f&&f.push(o,r.index,er,-(er+1))}}}(i,o,o[11],s,t,e,!!n,r),bt}function kh(t,e,n,r){try{return!1!==n(r)}catch(o){return ah(t,o),!1}}function Nu(t,e,n,r,o){return function i(s){if(s===Function)return r;wu(2&t.flags?_t(t.index,e):e);let u=kh(e,0,r,s),c=i.__ngNextListenerFn__;for(;c;)u=kh(e,0,c,s)&&u,c=c.__ngNextListenerFn__;return o&&!1===u&&(s.preventDefault(),s.returnValue=!1),u}}function Zn(t=1){return function yy(t){return(J.lFrame.contextLView=function vy(t,e){for(;t>0;)e=e[15],t--;return e}(t,J.lFrame.contextLView))[8]}(t)}function zh(t,e,n,r,o){const i=t[n+1],s=null===e;let a=r?Bt(i):gn(i),u=!1;for(;0!==a&&(!1===u||s);){const f=t[a+1];S0(t[a],e)&&(u=!0,t[a+1]=r?su(f):ou(f)),a=r?Bt(f):gn(f)}u&&(t[n+1]=r?ou(i):su(i))}function S0(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&yr(t,e)>=0}const qe={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Wh(t){return t.substring(qe.key,qe.keyEnd)}function N0(t){return t.substring(qe.value,qe.valueEnd)}function Qh(t,e){const n=qe.textEnd;return n===e?-1:(e=qe.keyEnd=function R0(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,qe.key=e,n),Br(t,e,n))}function Yh(t,e){const n=qe.textEnd;let r=qe.key=Br(t,e,n);return n===r?-1:(r=qe.keyEnd=function F0(t,e,n){let r;for(;e<n&&(45===(r=t.charCodeAt(e))||95===r||(-33&r)>=65&&(-33&r)<=90||r>=48&&r<=57);)e++;return e}(t,r,n),r=Kh(t,r,n),r=qe.value=Br(t,r,n),r=qe.valueEnd=function O0(t,e,n){let r=-1,o=-1,i=-1,s=e,a=s;for(;s<n;){const u=t.charCodeAt(s++);if(59===u)return a;34===u||39===u?a=s=Xh(t,u,s,n):e===s-4&&85===i&&82===o&&76===r&&40===u?a=s=Xh(t,41,s,n):u>32&&(a=s),i=o,o=r,r=-33&u}return a}(t,r,n),Kh(t,r,n))}function Zh(t){qe.key=0,qe.keyEnd=0,qe.value=0,qe.valueEnd=0,qe.textEnd=t.length}function Br(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function Kh(t,e,n,r){return(e=Br(t,e,n))<n&&e++,e}function Xh(t,e,n,r){let o=-1,i=n;for(;i<r;){const s=t.charCodeAt(i++);if(s==e&&92!==o)return i;o=92==s&&92===o?0:s}throw new Error}function qi(t,e,n){return function jt(t,e,n,r){const o=N(),i=fe(),s=fn(2);i.firstUpdatePass&&np(i,t,s,r),e!==te&&Je(o,s,e)&&op(i,i.data[rt()],o,o[11],t,o[s+1]=function $0(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=ve(xn(t)))),t}(e,n),r,s)}(t,e,n,!1),qi}function k0(t,e){for(let n=function P0(t){return Zh(t),Yh(t,Br(t,0,qe.textEnd))}(e);n>=0;n=Yh(e,n))rp(t,Wh(e),N0(e))}function nn(t,e){for(let n=function x0(t){return Zh(t),Qh(t,Br(t,0,qe.textEnd))}(e);n>=0;n=Qh(e,n))vt(t,Wh(e),!0)}function Gt(t,e,n,r){const o=fe(),i=fn(2);o.firstUpdatePass&&np(o,null,i,r);const s=N();if(n!==te&&Je(s,i,n)){const a=o.data[rt()];if(sp(a,r)&&!tp(o,i)){let u=r?a.classesWithoutHost:a.stylesWithoutHost;null!==u&&(n=Rs(u,n||"")),Au(o,a,s,n,r)}else!function G0(t,e,n,r,o,i,s,a){o===te&&(o=pe);let u=0,c=0,f=0<o.length?o[0]:null,p=0<i.length?i[0]:null;for(;null!==f||null!==p;){const _=u<o.length?o[u+1]:void 0,v=c<i.length?i[c+1]:void 0;let I,b=null;f===p?(u+=2,c+=2,_!==v&&(b=p,I=v)):null===p||null!==f&&f<p?(u+=2,b=f):(c+=2,b=p,I=v),null!==b&&op(t,e,n,r,b,I,s,a),f=u<o.length?o[u]:null,p=c<i.length?i[c]:null}}(o,a,s,s[11],s[i+1],s[i+1]=function j0(t,e,n){if(null==n||""===n)return pe;const r=[],o=xn(n);if(Array.isArray(o))for(let i=0;i<o.length;i++)t(r,o[i],!0);else if("object"==typeof o)for(const i in o)o.hasOwnProperty(i)&&t(r,i,o[i]);else"string"==typeof o&&e(r,o);return r}(t,e,n),r,i)}}function tp(t,e){return e>=t.expandoStartIndex}function np(t,e,n,r){const o=t.data;if(null===o[n+1]){const i=o[rt()],s=tp(t,n);sp(i,r)&&null===e&&!s&&(e=!1),e=function L0(t,e,n,r){const o=function na(t){const e=J.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let i=r?e.residualClasses:e.residualStyles;if(null===o)0===(r?e.classBindings:e.styleBindings)&&(n=Io(n=Pu(null,t,e,n,r),e.attrs,r),i=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==o)if(n=Pu(o,t,e,n,r),null===i){let u=function B0(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==gn(r))return t[Bt(r)]}(t,e,r);void 0!==u&&Array.isArray(u)&&(u=Pu(null,t,e,u[1],r),u=Io(u,e.attrs,r),function V0(t,e,n,r){t[Bt(n?e.classBindings:e.styleBindings)]=r}(t,e,r,u))}else i=function H0(t,e,n){let r;const o=e.directiveEnd;for(let i=1+e.directiveStylingLast;i<o;i++)r=Io(r,t[i].hostAttrs,n);return Io(r,e.attrs,n)}(t,e,r)}return void 0!==i&&(r?e.residualClasses=i:e.residualStyles=i),n}(o,i,e,r),function T0(t,e,n,r,o,i){let s=i?e.classBindings:e.styleBindings,a=Bt(s),u=gn(s);t[r]=n;let f,c=!1;if(Array.isArray(n)){const p=n;f=p[1],(null===f||yr(p,f)>0)&&(c=!0)}else f=n;if(o)if(0!==u){const _=Bt(t[a+1]);t[r+1]=Fi(_,a),0!==_&&(t[_+1]=iu(t[_+1],r)),t[a+1]=function fw(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=Fi(a,0),0!==a&&(t[a+1]=iu(t[a+1],r)),a=r;else t[r+1]=Fi(u,0),0===a?a=r:t[u+1]=iu(t[u+1],r),u=r;c&&(t[r+1]=ou(t[r+1])),zh(t,f,r,!0),zh(t,f,r,!1),function A0(t,e,n,r,o){const i=o?t.residualClasses:t.residualStyles;null!=i&&"string"==typeof e&&yr(i,e)>=0&&(n[r+1]=su(n[r+1]))}(e,f,t,r,i),s=Fi(a,u),i?e.classBindings=s:e.styleBindings=s}(o,i,e,n,s,r)}}function Pu(t,e,n,r,o){let i=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(i=e[a],r=Io(r,i.hostAttrs,o),i!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function Io(t,e,n){const r=n?1:2;let o=-1;if(null!==e)for(let i=0;i<e.length;i++){const s=e[i];"number"==typeof s?o=s:o===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),vt(t,s,!!n||e[++i]))}return void 0===t?null:t}function rp(t,e,n){vt(t,e,xn(n))}function op(t,e,n,r,o,i,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];zi(function Of(t){return 1==(1&t)}(c)?ip(u,e,n,o,gn(c),s):void 0)||(zi(i)||function Ff(t){return 2==(2&t)}(c)&&(i=ip(u,null,n,o,a,s)),function bD(t,e,n,r,o){const i=xe(t);if(e)o?i?t.addClass(n,r):n.classList.add(r):i?t.removeClass(n,r):n.classList.remove(r);else{let s=-1===r.indexOf("-")?void 0:Dt.DashCase;if(null==o)i?t.removeStyle(n,r,s):n.style.removeProperty(r);else{const a="string"==typeof o&&o.endsWith("!important");a&&(o=o.slice(0,-10),s|=Dt.Important),i?t.setStyle(n,r,o,s):n.style.setProperty(r,o,a?"important":"")}}}(r,s,oi(rt(),n),o,i))}function ip(t,e,n,r,o,i){const s=null===e;let a;for(;o>0;){const u=t[o],c=Array.isArray(u),f=c?u[1]:u,p=null===f;let _=n[o+1];_===te&&(_=p?pe:void 0);let v=p?pa(_,r):f===r?_:void 0;if(c&&!zi(v)&&(v=pa(u,r)),zi(v)&&(a=v,s))return a;const b=t[o+1];o=s?Bt(b):gn(b)}if(null!==e){let u=i?e.residualClasses:e.residualStyles;null!=u&&(a=pa(u,r))}return a}function zi(t){return void 0!==t}function sp(t,e){return 0!=(t.flags&(e?16:32))}function At(t,e=""){const n=N(),r=fe(),o=t+22,i=r.firstCreatePass?Ir(r,o,1,e,null):r.data[o],s=n[o]=function Oa(t,e){return xe(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Ni(r,n,s,i),Zt(i,!1)}function To(t){return Wi("",t,""),To}function Wi(t,e,n){const r=N(),o=function Nr(t,e,n,r){return Je(t,cr(),n)?e+ee(n)+r:te}(r,t,e,n);return o!==te&&mn(r,rt(),o),Wi}const Hr="en-US";let Ap=Hr;class cE{resolveComponentFactory(e){throw function lE(t){const e=Error(`No component factory found for ${ve(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(e)}}let Xi=(()=>{class t{}return t.NULL=new cE,t})();class Xn{}class tg{}function hE(){return Gr($e(),N())}function Gr(t,e){return new $r(It(t,e))}let $r=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=hE,t})();class ng{}let Vu=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function mE(){const t=N(),n=_t($e().index,t);return function gE(t){return t[11]}(ct(n)?n:t)}(),t})(),_E=(()=>{class t{}return t.\u0275prov=Me({token:t,providedIn:"root",factory:()=>null}),t})();class Hu{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const yE=new Hu("14.0.3"),ju={};function Ji(t,e,n,r,o=!1){for(;null!==n;){const i=e[n.index];if(null!==i&&r.push(Ve(i)),Ot(i))for(let a=10;a<i.length;a++){const u=i[a],c=u[1].firstChild;null!==c&&Ji(u[1],u,c,r)}const s=n.type;if(8&s)Ji(t,e,n.child,r);else if(32&s){const a=Pa(n,e);let u;for(;u=a();)r.push(u)}else if(16&s){const a=Jd(e,n);if(Array.isArray(a))r.push(...a);else{const u=vo(e[16]);Ji(u[1],u,a,r,!0)}}n=o?n.projectionNext:n.next}return r}class Po{constructor(e,n){this._lView=e,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,n=e[1];return Ji(n,e,n.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(Ot(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&(La(e,r),_i(n,r))}this._attachedToViewContainer=!1}$d(this._lView[1],this._lView)}onDestroy(e){!function Yf(t,e,n,r){const o=oh(e);null===n?o.push(r):(o.push(n),t.firstCreatePass&&ih(t).push(r,o.length-1))}(this._lView[1],this._lView,null,e)}markForCheck(){wu(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){!function Eu(t,e,n){const r=e[10];r.begin&&r.begin();try{Ar(t,e,t.template,n)}catch(o){throw ah(e,o),o}finally{r.end&&r.end()}}(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ae(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function fD(t,e){Do(t,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ae(902,!1);this._appRef=e}}class vE extends Po{constructor(e){super(e),this._view=e}detectChanges(){rh(this._view)}checkNoChanges(){}get context(){return null}}class Gu extends Xi{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=De(e);return new $u(n,this.ngModule)}}function rg(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}class wE{constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){const o=this.injector.get(e,ju,r);return o!==ju||n===ju?o:this.parentInjector.get(e,n,r)}}class $u extends tg{constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function PD(t){return t.map(xD).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return rg(this.componentDef.inputs)}get outputs(){return rg(this.componentDef.outputs)}create(e,n,r,o){let i=(o=o||this.ngModule)instanceof wo?o:o?.injector;i&&null!==this.componentDef.getStandaloneInjector&&(i=this.componentDef.getStandaloneInjector(i)||i);const s=i?new wE(e,i):e,a=s.get(ng,Sc),u=s.get(_E,null),c=a.createRenderer(null,this.componentDef),f=this.componentDef.selectors[0][0]||"div",p=r?function Qf(t,e,n){if(xe(t))return t.selectRootElement(e,n===Yt.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(c,r,this.componentDef.encapsulation):ka(a.createRenderer(null,this.componentDef),f,function DE(t){const e=t.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(f)),_=this.componentDef.onPush?288:272,v=function vh(t,e){return{components:[],scheduler:t||oD,clean:Qw,playerHandler:e||null,flags:0}}(),b=Li(0,null,null,1,0,null,null,null,null,null),I=bo(null,b,v,_,null,null,a,c,u,s,null);let x,R;si(I);try{const H=function _h(t,e,n,r,o,i){const s=n[1];n[22]=t;const u=Ir(s,22,2,"#host",null),c=u.mergedAttrs=e.hostAttrs;null!==c&&(Vi(u,c,!0),null!==t&&(di(o,t,c),null!==u.classes&&Ga(o,t,u.classes),null!==u.styles&&nf(o,t,u.styles)));const f=r.createRenderer(t,e),p=bo(n,zf(e),null,e.onPush?32:16,n[22],u,r,f,i||null,null,null);return s.firstCreatePass&&(gi(oo(u,n),s,e.type),Jf(s,u),eh(u,n.length,1)),Bi(n,p),n[22]=p}(p,this.componentDef,I,a,c);if(p)if(r)di(c,p,["ng-version",yE.full]);else{const{attrs:S,classes:j}=function RD(t){const e=[],n=[];let r=1,o=2;for(;r<t.length;){let i=t[r];if("string"==typeof i)2===o?""!==i&&e.push(i,t[++r]):8===o&&n.push(i);else{if(!Lt(o))break;o=i}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);S&&di(c,p,S),j&&j.length>0&&Ga(c,p,j.join(" "))}if(R=Zs(b,22),void 0!==n){const S=R.projection=[];for(let j=0;j<this.ngContentSelectors.length;j++){const le=n[j];S.push(null!=le?Array.from(le):null)}}x=function yh(t,e,n,r,o){const i=n[1],s=function Pw(t,e,n){const r=$e();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),th(t,r,e,Tr(t,e,1,null),n));const o=io(e,t,r.directiveStart,r);Xe(o,e);const i=It(r,e);return i&&Xe(i,e),o}(i,n,e);if(r.components.push(s),t[8]=s,null!==o)for(const u of o)u(s,e);if(e.contentQueries){const u=$e();e.contentQueries(1,s,u.directiveStart)}const a=$e();return!i.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(Sn(a.index),Kf(n[1],a,0,a.directiveStart,a.directiveEnd,e),Xf(e,s)),s}(H,this.componentDef,I,v,[s0]),Eo(b,I,null)}finally{ai()}return new EE(this.componentType,x,Gr(R,I),I,R)}}class EE extends class fE{}{constructor(e,n,r,o,i){super(),this.location=r,this._rootLView=o,this._tNode=i,this.instance=n,this.hostView=this.changeDetectorRef=new vE(o),this.componentType=e}get injector(){return new hr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}class og extends Xn{constructor(e,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Gu(this);const r=function gt(t,e){const n=t[Dc]||null;if(!n&&!0===e)throw new Error(`Type ${ve(t)} does not have '\u0275mod' property.`);return n}(e);this._bootstrapComponents=function pn(t){return t instanceof Function?t():t}(r.bootstrap),this._r3Injector=Ef(e,n,[{provide:Xn,useValue:this},{provide:Xi,useValue:this.componentFactoryResolver}],ve(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this.get(e)}get(e,n=Jt.THROW_IF_NOT_FOUND,r=K.Default){return e===Jt||e===Xn||e===qa?this:this._r3Injector.get(e,n,r)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class Uu extends class dE{}{constructor(e){super(),this.moduleType=e}create(e){return new og(this.moduleType,e)}}function yn(t,e,n,r){return sg(N(),nt(),t,e,n,r)}function sg(t,e,n,r,o,i){const s=e+n;return Je(t,s,o)?function tn(t,e,n){return t[e]=n}(t,s+1,i?r.call(i,o):r(o)):function Ro(t,e){const n=t[e];return n===te?void 0:n}(t,s+1)}function On(t,e){const n=fe();let r;const o=t+22;n.firstCreatePass?(r=function BE(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}}(e,n.pipeRegistry),n.data[o]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(o,r.onDestroy)):r=n.data[o];const i=r.factory||(r.factory=qn(r.type)),s=Qt(X);try{const a=hi(!1),u=i();return hi(a),function y0(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,N(),o,u),u}finally{Qt(s)}}function kn(t,e,n){const r=t+22,o=N(),i=function lr(t,e){return t[e]}(o,r);return function Fo(t,e){return t[1].data[e].pure}(o,r)?sg(o,nt(),e,i.transform,n,i):i.transform(n)}function qu(t){return e=>{setTimeout(t,void 0,e)}}const rn=class $E extends Wr{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,n,r){let o=e,i=n||(()=>null),s=r;if(e&&"object"==typeof e){const u=e;o=u.next?.bind(u),i=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(i=qu(i),o&&(o=qu(o)),s&&(s=qu(s)));const a=super.subscribe({next:o,error:i,complete:s});return e instanceof M&&e.add(a),a}};let vn=(()=>{class t{}return t.__NG_ELEMENT_ID__=WE,t})();const qE=vn,zE=class extends qE{constructor(e,n,r){super(),this._declarationLView=e,this._declarationTContainer=n,this.elementRef=r}createEmbeddedView(e,n){const r=this._declarationTContainer.tViews,o=bo(this._declarationLView,r,e,16,null,r.declTNode,null,null,null,null,n||null);o[17]=this._declarationLView[this._declarationTContainer.index];const s=this._declarationLView[19];return null!==s&&(o[19]=s.createEmbeddedView(r)),Eo(r,o,e),new Po(o)}};function WE(){return function es(t,e){return 4&t.type?new zE(e,t,Gr(t,e)):null}($e(),N())}let on=(()=>{class t{}return t.__NG_ELEMENT_ID__=QE,t})();function QE(){return function hg(t,e){let n;const r=e[t.index];if(Ot(r))n=r;else{let o;if(8&t.type)o=Ve(r);else{const i=e[11];o=i.createComment("");const s=It(t,e);zn(i,Si(i,s),o,function vD(t,e){return xe(t)?t.nextSibling(e):e.nextSibling}(i,s),!1)}e[t.index]=n=nh(r,e,o,t),Bi(e,n)}return new dg(n,t,e)}($e(),N())}const YE=on,dg=class extends YE{constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return Gr(this._hostTNode,this._hostLView)}get injector(){return new hr(this._hostTNode,this._hostLView)}get parentInjector(){const e=pi(this._hostTNode,this._hostLView);if(zc(e)){const n=fr(e,this._hostLView),r=dr(e);return new hr(n[1].data[r+8],n)}return new hr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=fg(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,r){let o,i;"number"==typeof r?o=r:null!=r&&(o=r.index,i=r.injector);const s=e.createEmbeddedView(n||{},i);return this.insert(s,o),s}createComponent(e,n,r,o,i){const s=e&&!function ao(t){return"function"==typeof t}(e);let a;if(s)a=n;else{const p=n||{};a=p.index,r=p.injector,o=p.projectableNodes,i=p.environmentInjector||p.ngModuleRef}const u=s?e:new $u(De(e)),c=r||this.parentInjector;if(!i&&null==u.ngModule){const _=(s?c:this.parentInjector).get(wo,null);_&&(i=_)}const f=u.create(c,o,void 0,i);return this.insert(f.hostView,a),f}insert(e,n){const r=e._lView,o=r[1];if(function ay(t){return Ot(t[3])}(r)){const f=this.indexOf(e);if(-1!==f)this.detach(f);else{const p=r[3],_=new dg(p,p[6],p[3]);_.detach(_.indexOf(e))}}const i=this._adjustIndex(n),s=this._lContainer;!function pD(t,e,n,r){const o=10+r,i=n.length;r>0&&(n[o-1][4]=e),r<i-10?(e[4]=n[o],rd(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function gD(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=64}(o,r,s,i);const a=Ha(i,s),u=r[11],c=Si(u,s[7]);return null!==c&&function dD(t,e,n,r,o,i){r[0]=o,r[6]=e,Do(t,r,n,1,o,i)}(o,s[6],u,r,c,a),e.attachToViewContainerRef(),rd(Wu(s),i,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=fg(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=La(this._lContainer,n);r&&(_i(Wu(this._lContainer),n),$d(r[1],r))}detach(e){const n=this._adjustIndex(e,-1),r=La(this._lContainer,n);return r&&null!=_i(Wu(this._lContainer),n)?new Po(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function fg(t){return t[8]}function Wu(t){return t[8]||(t[8]=[])}function ns(...t){}const Lg=new de("Application Initializer");let rs=(()=>{class t{constructor(n){this.appInits=n,this.resolve=ns,this.reject=ns,this.initialized=!1,this.done=!1,this.donePromise=new Promise((r,o)=>{this.resolve=r,this.reject=o})}runInitializers(){if(this.initialized)return;const n=[],r=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let o=0;o<this.appInits.length;o++){const i=this.appInits[o]();if(Su(i))n.push(i);else if(b0(i)){const s=new Promise((a,u)=>{i.subscribe({complete:a,error:u})});n.push(s)}}Promise.all(n).then(()=>{r()}).catch(o=>{this.reject(o)}),0===n.length&&r(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)(ge(Lg,8))},t.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Lo=new de("AppId",{providedIn:"root",factory:function Bg(){return`${rl()}${rl()}${rl()}`}});function rl(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Vg=new de("Platform Initializer"),Hg=new de("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),AC=new de("appBootstrapListener"),Dn=new de("LocaleId",{providedIn:"root",factory:()=>function ev(t,e=K.Default){return ge(t,e)}(Dn,K.Optional|K.SkipSelf)||function SC(){return typeof $localize<"u"&&$localize.locale||Hr}()}),RC=(()=>Promise.resolve(0))();function ol(t){typeof Zone>"u"?RC.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Qe{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:r=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new rn(!1),this.onMicrotaskEmpty=new rn(!1),this.onStable=new rn(!1),this.onError=new rn(!1),typeof Zone>"u")throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!r&&n,o.shouldCoalesceRunChangeDetection=r,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=function FC(){let t=_e.requestAnimationFrame,e=_e.cancelAnimationFrame;if(typeof Zone<"u"&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function LC(t){const e=()=>{!function kC(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(_e,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,sl(t),t.isCheckStableRunning=!0,il(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),sl(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,o,i,s,a)=>{try{return jg(t),n.invokeTask(o,i,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===i.type||t.shouldCoalesceRunChangeDetection)&&e(),Gg(t)}},onInvoke:(n,r,o,i,s,a,u)=>{try{return jg(t),n.invoke(o,i,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),Gg(t)}},onHasTask:(n,r,o,i)=>{n.hasTask(o,i),r===o&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,sl(t),il(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(n,r,o,i)=>(n.handleError(o,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(o)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Qe.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Qe.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,o){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,e,OC,ns,ns);try{return i.runTask(s,n,r)}finally{i.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const OC={};function il(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function sl(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function jg(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Gg(t){t._nesting--,il(t)}class BC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new rn,this.onMicrotaskEmpty=new rn,this.onStable=new rn,this.onError=new rn}run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,o){return e.apply(n,r)}}const $g=new de(""),os=new de("");let ll,al=(()=>{class t{constructor(n,r,o){this._ngZone=n,this.registry=r,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ll||(function VC(t){ll=t}(o),o.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Qe.assertNotInAngularZone(),ol(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())ol(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,o){let i=-1;r&&r>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==i),n(this._didWork,this.getPendingTasks())},r)),this._callbacks.push({doneCb:n,timeoutId:i,updateCb:o})}whenStable(n,r,o){if(o&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,o),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,o){return[]}}return t.\u0275fac=function(n){return new(n||t)(ge(Qe),ge(ul),ge(os))},t.\u0275prov=Me({token:t,factory:t.\u0275fac}),t})(),ul=(()=>{class t{constructor(){this._applications=new Map}registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return ll?.findTestabilityInTree(this,n,r)??null}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})(),Ln=null;const Ug=new de("AllowMultipleToken"),qg=new de("PlatformOnDestroy");function Wg(t,e,n=[]){const r=`Platform: ${e}`,o=new de(r);return(i=[])=>{let s=cl();if(!s||s.injector.get(Ug,!1)){const a=[...n,...i,{provide:o,useValue:!0}];t?t(a):function GC(t){if(Ln&&!Ln.get(Ug,!1))throw new ae(400,!1);Ln=t;const e=t.get(Yg);(function zg(t){const e=t.get(Vg,null);e&&e.forEach(n=>n())})(t)}(function Qg(t=[],e){return Jt.create({name:e,providers:[{provide:za,useValue:"platform"},{provide:qg,useValue:()=>Ln=null},...t]})}(a,r))}return function UC(t){const e=cl();if(!e)throw new ae(401,!1);return e}()}}function cl(){return Ln?.get(Yg)??null}let Yg=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,r){const o=function qC(t,e){let n;return n="noop"===t?new BC:("zone.js"===t?void 0:t)||new Qe(e),n}(r?.ngZone,function Zg(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!t||!t.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!t||!t.ngZoneRunCoalescing)||!1}}(r)),i=[{provide:Qe,useValue:o}];return o.run(()=>{const s=Jt.create({providers:i,parent:this.injector,name:n.moduleType.name}),a=n.create(s),u=a.injector.get(wr,null);if(!u)throw new ae(402,!1);return o.runOutsideAngular(()=>{const c=o.onError.subscribe({next:f=>{u.handleError(f)}});a.onDestroy(()=>{is(this._modules,a),c.unsubscribe()})}),function Kg(t,e,n){try{const r=n();return Su(r)?r.catch(o=>{throw e.runOutsideAngular(()=>t.handleError(o)),o}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(u,o,()=>{const c=a.injector.get(rs);return c.runInitializers(),c.donePromise.then(()=>(function Sp(t){pt(t,"Expected localeId to be defined"),"string"==typeof t&&(Ap=t.toLowerCase().replace(/_/g,"-"))}(a.injector.get(Dn,Hr)||Hr),this._moduleDoBootstrap(a),a))})})}bootstrapModule(n,r=[]){const o=Xg({},r);return function HC(t,e,n){const r=new Uu(n);return Promise.resolve(r)}(0,0,n).then(i=>this.bootstrapModuleFactory(i,o))}_moduleDoBootstrap(n){const r=n.injector.get(dl);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(o=>r.bootstrap(o));else{if(!n.instance.ngDoBootstrap)throw new ae(403,!1);n.instance.ngDoBootstrap(r)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ae(404,!1);this._modules.slice().forEach(r=>r.destroy()),this._destroyListeners.forEach(r=>r()),this._injector.get(qg,null)?.(),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(ge(Jt))},t.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"platform"}),t})();function Xg(t,e){return Array.isArray(e)?e.reduce(Xg,t):{...t,...e}}let dl=(()=>{class t{constructor(n,r,o,i){this._zone=n,this._injector=r,this._exceptionHandler=o,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new ut(u=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{u.next(this._stable),u.complete()})}),a=new ut(u=>{let c;this._zone.runOutsideAngular(()=>{c=this._zone.onStable.subscribe(()=>{Qe.assertNotInAngularZone(),ol(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,u.next(!0))})})});const f=this._zone.onUnstable.subscribe(()=>{Qe.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{u.next(!1)}))});return()=>{c.unsubscribe(),f.unsubscribe()}});this.isStable=function I_(...t){const e=Ss(t),n=function v_(t,e){return"number"==typeof As(t)?t.pop():e}(t,1/0),r=t;return r.length?1===r.length?nr(r[0]):fc(n)(Ns(r,e)):Ts}(s,a.pipe(function A_(t={}){const{connector:e=(()=>new Wr),resetOnError:n=!0,resetOnComplete:r=!0,resetOnRefCountZero:o=!0}=t;return i=>{let s=null,a=null,u=null,c=0,f=!1,p=!1;const _=()=>{a?.unsubscribe(),a=null},v=()=>{_(),s=u=null,f=p=!1},b=()=>{const I=s;v(),I?.unsubscribe()};return Cn((I,x)=>{c++,!p&&!f&&_();const R=u=u??e();x.add(()=>{c--,0===c&&!p&&!f&&(a=xs(b,o))}),R.subscribe(x),s||(s=new Ye({next:H=>R.next(H),error:H=>{p=!0,_(),a=xs(v,n,H),R.error(H)},complete:()=>{f=!0,_(),a=xs(v,r),R.complete()}}),Ns(I).subscribe(s))})(i)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,r){const o=n instanceof tg;if(!this._initStatus.done)throw!o&&function ko(t){const e=De(t)||et(t)||tt(t);return null!==e&&e.standalone}(n),new ae(405,false);let i;i=o?n:this._injector.get(Xi).resolveComponentFactory(n),this.componentTypes.push(i.componentType);const s=function jC(t){return t.isBoundToModule}(i)?void 0:this._injector.get(Xn),u=i.create(Jt.NULL,[],r||i.selector,s),c=u.location.nativeElement,f=u.injector.get($g,null);return f?.registerApplication(c),u.onDestroy(()=>{this.detachView(u.hostView),is(this.components,u),f?.unregisterApplication(c)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new ae(101,!1);try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;is(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(AC,[]).concat(this._bootstrapListeners).forEach(o=>o(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>is(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new ae(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return t.\u0275fac=function(n){return new(n||t)(ge(Qe),ge(Jt),ge(wr),ge(rs))},t.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function is(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}let em=!0,rm=(()=>{class t{}return t.__NG_ELEMENT_ID__=QC,t})();function QC(t){return function YC(t,e,n){if(ti(t)&&!n){const r=_t(t.index,e);return new Po(r,r)}return 47&t.type?new Po(e[16],e):null}($e(),N(),16==(16&t))}class sm{constructor(){}supports(e){return Co(e)}create(e){return new tM(e)}}const eM=(t,e)=>e;class tM{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||eM}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,o=0,i=null;for(;n||r;){const s=!r||n&&n.currentIndex<um(r,o,i)?n:r,a=um(s,o,i),u=s.currentIndex;if(s===r)o--,r=r._nextRemoved;else if(n=n._next,null==s.previousIndex)o++;else{i||(i=[]);const c=a-o,f=u-o;if(c!=f){for(let _=0;_<c;_++){const v=_<i.length?i[_]:i[_]=0,b=v+_;f<=b&&b<c&&(i[_]=v+1)}i[s.previousIndex]=f-c}}a!==u&&e(s,a,u)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!Co(e))throw new ae(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let o,i,s,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)i=e[a],s=this._trackByFn(a,i),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,i,s,a)),Object.is(n.item,i)||this._addIdentityChange(n,i)):(n=this._mismatch(n,i,s,a),r=!0),n=n._next}else o=0,function g0(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Qn()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(o,a),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,a,s,o)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,o),r=!0),n=n._next,o++}),this.length=o;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,o){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,i,o)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,o))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,i,o)):e=this._addAfter(new nM(n,r),i,o),e}_verifyReinsertion(e,n,r,o){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==i?e=this._reinsertAfter(i,e._prev,o):e.currentIndex!=o&&(e.currentIndex=o,this._addToMoves(e,o)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const o=e._prevRemoved,i=e._nextRemoved;return null===o?this._removalsHead=i:o._nextRemoved=i,null===i?this._removalsTail=o:i._prevRemoved=o,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const o=null===n?this._itHead:n._next;return e._next=o,e._prev=n,null===o?this._itTail=e:o._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new am),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new am),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class nM{constructor(e,n){this.item=e,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class rM{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class am{constructor(){this.map=new Map}put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new rM,this.map.set(n,r)),r.add(e)}get(e,n){const o=this.map.get(e);return o?o.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function um(t,e,n){const r=t.previousIndex;if(null===r)return r;let o=0;return n&&r<n.length&&(o=n[r]),r+e+o}class lm{constructor(){}supports(e){return e instanceof Map||Tu(e)}create(){return new oM}}class oM{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let n;for(n=this._mapHead;null!==n;n=n._next)e(n)}forEachPreviousItem(e){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)e(n)}forEachChangedItem(e){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}diff(e){if(e){if(!(e instanceof Map||Tu(e)))throw new ae(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,o)=>{if(n&&n.key===o)this._maybeAddToChanges(n,r),this._appendAfter=n,n=n._next;else{const i=this._getOrCreateRecordForKey(o,r);n=this._insertBeforeOrAppend(n,i)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let r=n;null!==r;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,n){if(e){const r=e._prev;return n._next=e,n._prev=r,e._prev=n,r&&(r._next=n),e===this._mapHead&&(this._mapHead=n),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(e,n){if(this._records.has(e)){const o=this._records.get(e);this._maybeAddToChanges(o,n);const i=o._prev,s=o._next;return i&&(i._next=s),s&&(s._prev=i),o._next=null,o._prev=null,o}const r=new iM(e);return this._records.set(e,r),r.currentValue=n,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,n){Object.is(n,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=n,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,n){e instanceof Map?e.forEach(n):Object.keys(e).forEach(r=>n(e[r],r))}}class iM{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function cm(){return new us([new sm])}let us=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(null!=r){const o=r.factories.slice();n=n.concat(o)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||cm()),deps:[[t,new bi,new wi]]}}find(n){const r=this.factories.find(o=>o.supports(n));if(null!=r)return r;throw new ae(901,!1)}}return t.\u0275prov=Me({token:t,providedIn:"root",factory:cm}),t})();function dm(){return new Bo([new lm])}let Bo=(()=>{class t{constructor(n){this.factories=n}static create(n,r){if(r){const o=r.factories.slice();n=n.concat(o)}return new t(n)}static extend(n){return{provide:t,useFactory:r=>t.create(n,r||dm()),deps:[[t,new bi,new wi]]}}find(n){const r=this.factories.find(o=>o.supports(n));if(r)return r;throw new ae(901,!1)}}return t.\u0275prov=Me({token:t,providedIn:"root",factory:dm}),t})();const uM=Wg(null,"core",[]);let lM=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(ge(dl))},t.\u0275mod=Yr({type:t}),t.\u0275inj=rr({}),t})(),ls=null;function Vo(){return ls}const $t=new de("DocumentToken");let vs=(()=>{class t{constructor(n,r,o,i){this._iterableDiffers=n,this._keyValueDiffers=r,this._ngEl=o,this._renderer=i,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(n){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof n?n.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(n){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof n?n.split(/\s+/):n,this._rawClass&&(Co(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const n=this._iterableDiffer.diff(this._rawClass);n&&this._applyIterableChanges(n)}else if(this._keyValueDiffer){const n=this._keyValueDiffer.diff(this._rawClass);n&&this._applyKeyValueChanges(n)}}_applyKeyValueChanges(n){n.forEachAddedItem(r=>this._toggleClass(r.key,r.currentValue)),n.forEachChangedItem(r=>this._toggleClass(r.key,r.currentValue)),n.forEachRemovedItem(r=>{r.previousValue&&this._toggleClass(r.key,!1)})}_applyIterableChanges(n){n.forEachAddedItem(r=>{if("string"!=typeof r.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${ve(r.item)}`);this._toggleClass(r.item,!0)}),n.forEachRemovedItem(r=>this._toggleClass(r.item,!1))}_applyClasses(n){n&&(Array.isArray(n)||n instanceof Set?n.forEach(r=>this._toggleClass(r,!0)):Object.keys(n).forEach(r=>this._toggleClass(r,!!n[r])))}_removeClasses(n){n&&(Array.isArray(n)||n instanceof Set?n.forEach(r=>this._toggleClass(r,!1)):Object.keys(n).forEach(r=>this._toggleClass(r,!1)))}_toggleClass(n,r){(n=n.trim())&&n.split(/\s+/g).forEach(o=>{r?this._renderer.addClass(this._ngEl.nativeElement,o):this._renderer.removeClass(this._ngEl.nativeElement,o)})}}return t.\u0275fac=function(n){return new(n||t)(X(us),X(Bo),X($r),X(Vu))},t.\u0275dir=Et({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class tI{constructor(e,n,r,o){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Go=(()=>{class t{constructor(n,r,o){this._viewContainer=n,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((o,i,s)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new tI(o.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===i?void 0:i);else if(null!==i){const a=r.get(i);r.move(a,s),bm(a,o)}});for(let o=0,i=r.length;o<i;o++){const a=r.get(o).context;a.index=o,a.count=i,a.ngForOf=this._ngForOf}n.forEachIdentityChange(o=>{bm(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(n,r){return!0}}return t.\u0275fac=function(n){return new(n||t)(X(on),X(vn),X(us))},t.\u0275dir=Et({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();function bm(t,e){t.context.$implicit=e.item}let Em=(()=>{class t{constructor(n,r){this._viewContainer=n,this._context=new nI,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){Cm("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){Cm("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,r){return!0}}return t.\u0275fac=function(n){return new(n||t)(X(on),X(vn))},t.\u0275dir=Et({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class nI{constructor(){this.$implicit=null,this.ngIf=null}}function Cm(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${ve(e)}'.`)}class uI{createSubscription(e,n){return e.subscribe({next:n,error:r=>{throw r}})}dispose(e){e.unsubscribe()}}class lI{createSubscription(e,n){return e.then(n,r=>{throw r})}dispose(e){}}const cI=new lI,dI=new uI;let Tl=(()=>{class t{constructor(n){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){return this._obj?n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue:(n&&this._subscribe(n),this._latestValue)}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r))}_selectStrategy(n){if(Su(n))return cI;if(Rh(n))return dI;throw function qt(t,e){return new ae(2100,!1)}()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this._ref.markForCheck())}}return t.\u0275fac=function(n){return new(n||t)(X(rm,16))},t.\u0275pipe=lt({name:"async",type:t,pure:!1}),t})(),AI=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Yr({type:t}),t.\u0275inj=rr({}),t})();class Nl extends class FI extends class fM{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function dM(t){ls||(ls=t)}(new Nl)}onAndCancel(e,n,r){return e.addEventListener(n,r,!1),()=>{e.removeEventListener(n,r,!1)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function OI(){return $o=$o||document.querySelector("base"),$o?$o.getAttribute("href"):null}();return null==n?null:function kI(t){Ds=Ds||document.createElement("a"),Ds.setAttribute("href",t);const e=Ds.pathname;return"/"===e.charAt(0)?e:`/${e}`}(n)}resetBaseElement(){$o=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function JM(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[o,i]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(o.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,e)}}let Ds,$o=null;const Sm=new de("TRANSITION_ID"),BI=[{provide:Lg,useFactory:function LI(t,e,n){return()=>{n.get(rs).donePromise.then(()=>{const r=Vo(),o=e.querySelectorAll(`style[ng-transition="${t}"]`);for(let i=0;i<o.length;i++)r.remove(o[i])})}},deps:[Sm,$t,Jt],multi:!0}];let HI=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Me({token:t,factory:t.\u0275fac}),t})();const ws=new de("EventManagerPlugins");let bs=(()=>{class t{constructor(n,r){this._zone=r,this._eventNameToPlugin=new Map,n.forEach(o=>o.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,r,o){return this._findPluginFor(r).addEventListener(n,r,o)}addGlobalEventListener(n,r,o){return this._findPluginFor(r).addGlobalEventListener(n,r,o)}getZone(){return this._zone}_findPluginFor(n){const r=this._eventNameToPlugin.get(n);if(r)return r;const o=this._plugins;for(let i=0;i<o.length;i++){const s=o[i];if(s.supports(n))return this._eventNameToPlugin.set(n,s),s}throw new Error(`No event manager plugin found for event ${n}`)}}return t.\u0275fac=function(n){return new(n||t)(ge(ws),ge(Qe))},t.\u0275prov=Me({token:t,factory:t.\u0275fac}),t})();class Nm{constructor(e){this._doc=e}addGlobalEventListener(e,n,r){const o=Vo().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${n}`);return this.addEventListener(o,n,r)}}let xm=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(n){const r=new Set;n.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Me({token:t,factory:t.\u0275fac}),t})(),Uo=(()=>{class t extends xm{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,r,o){n.forEach(i=>{const s=this._doc.createElement("style");s.textContent=i,o.push(r.appendChild(s))})}addHost(n){const r=[];this._addStylesToHost(this._stylesSet,n,r),this._hostNodes.set(n,r)}removeHost(n){const r=this._hostNodes.get(n);r&&r.forEach(Pm),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(n,o,r)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(Pm))}}return t.\u0275fac=function(n){return new(n||t)(ge($t))},t.\u0275prov=Me({token:t,factory:t.\u0275fac}),t})();function Pm(t){Vo().remove(t)}const xl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Pl=/%COMP%/g;function Es(t,e,n){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Es(t,o,n):(o=o.replace(Pl,t),n.push(o))}return n}function Om(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Rl=(()=>{class t{constructor(n,r,o){this.eventManager=n,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Fl(n)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;switch(r.encapsulation){case Yt.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new zI(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(n),o}case 1:case Yt.ShadowDom:return new WI(this.eventManager,this.sharedStylesHost,n,r);default:if(!this.rendererByCompId.has(r.id)){const o=Es(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(n){return new(n||t)(ge(bs),ge(Uo),ge(Lo))},t.\u0275prov=Me({token:t,factory:t.\u0275fac}),t})();class Fl{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,n){return n?document.createElementNS(xl[n]||n,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,n){(Lm(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(Lm(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,o){if(o){n=o+":"+n;const i=xl[o];i?e.setAttributeNS(i,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const o=xl[r];o?e.removeAttributeNS(o,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,o){o&(Dt.DashCase|Dt.Important)?e.style.setProperty(n,r,o&Dt.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Dt.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e[n]=r}setValue(e,n){e.nodeValue=n}listen(e,n,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,n,Om(r)):this.eventManager.addEventListener(e,n,Om(r))}}function Lm(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class zI extends Fl{constructor(e,n,r,o){super(e),this.component=r;const i=Es(o+"-"+r.id,r.styles,[]);n.addStyles(i),this.contentAttr=function $I(t){return"_ngcontent-%COMP%".replace(Pl,t)}(o+"-"+r.id),this.hostAttr=function UI(t){return"_nghost-%COMP%".replace(Pl,t)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}class WI extends Fl{constructor(e,n,r,o){super(e),this.sharedStylesHost=n,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=Es(o.id,o.styles,[]);for(let s=0;s<i.length;s++){const a=document.createElement("style");a.textContent=i[s],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let QI=(()=>{class t extends Nm{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,o){return n.addEventListener(r,o,!1),()=>this.removeEventListener(n,r,o)}removeEventListener(n,r,o){return n.removeEventListener(r,o)}}return t.\u0275fac=function(n){return new(n||t)(ge($t))},t.\u0275prov=Me({token:t,factory:t.\u0275fac}),t})();const Bm=["alt","control","meta","shift"],ZI={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Vm={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},KI={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let XI=(()=>{class t extends Nm{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,o){const i=t.parseEventName(r),s=t.eventCallback(i.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Vo().onAndCancel(n,i.domEventName,s))}static parseEventName(n){const r=n.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const i=t._normalizeKey(r.pop());let s="";if(Bm.forEach(u=>{const c=r.indexOf(u);c>-1&&(r.splice(c,1),s+=u+".")}),s+=i,0!=r.length||0===i.length)return null;const a={};return a.domEventName=o,a.fullKey=s,a}static getEventFullKey(n){let r="",o=function JI(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Vm.hasOwnProperty(e)&&(e=Vm[e]))}return ZI[e]||e}(n);return o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Bm.forEach(i=>{i!=o&&KI[i](n)&&(r+=i+".")}),r+=o,r}static eventCallback(n,r,o){return i=>{t.getEventFullKey(i)===n&&o.runGuarded(()=>r(i))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return t.\u0275fac=function(n){return new(n||t)(ge($t))},t.\u0275prov=Me({token:t,factory:t.\u0275fac}),t})();const rT=Wg(uM,"browser",[{provide:Hg,useValue:"browser"},{provide:Vg,useValue:function eT(){Nl.makeCurrent()},multi:!0},{provide:$t,useFactory:function nT(){return function ry(t){Qs=t}(document),document},deps:[]}]),jm=new de(""),Gm=[{provide:os,useClass:class VI{addToWindow(e){_e.getAngularTestability=(r,o=!0)=>{const i=e.findTestabilityInTree(r,o);if(null==i)throw new Error("Could not find testability for element.");return i},_e.getAllAngularTestabilities=()=>e.getAllTestabilities(),_e.getAllAngularRootElements=()=>e.getAllRootElements(),_e.frameworkStabilizers||(_e.frameworkStabilizers=[]),_e.frameworkStabilizers.push(r=>{const o=_e.getAllAngularTestabilities();let i=o.length,s=!1;const a=function(u){s=s||u,i--,0==i&&r(s)};o.forEach(function(u){u.whenStable(a)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?Vo().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}},deps:[]},{provide:$g,useClass:al,deps:[Qe,ul,os]},{provide:al,useClass:al,deps:[Qe,ul,os]}],$m=[{provide:za,useValue:"root"},{provide:wr,useFactory:function tT(){return new wr},deps:[]},{provide:ws,useClass:QI,multi:!0,deps:[$t,Qe,Hg]},{provide:ws,useClass:XI,multi:!0,deps:[$t]},{provide:Rl,useClass:Rl,deps:[bs,Uo,Lo]},{provide:ng,useExisting:Rl},{provide:xm,useExisting:Uo},{provide:Uo,useClass:Uo,deps:[$t]},{provide:bs,useClass:bs,deps:[ws,Qe]},{provide:class RI{},useClass:HI,deps:[]},[]];let oT=(()=>{class t{constructor(n){}static withServerTransition(n){return{ngModule:t,providers:[{provide:Lo,useValue:n.appId},{provide:Sm,useExisting:Lo},BI]}}}return t.\u0275fac=function(n){return new(n||t)(ge(jm,12))},t.\u0275mod=Yr({type:t}),t.\u0275inj=rr({providers:[...$m,...Gm],imports:[AI,lM]}),t})();typeof window<"u"&&window;const Cs={name:"",knob:0,notes:[],connected:!1,hold:!0},gT={C4:"#12963d","C#4":"#e7322d",D4:"#89509b","D#4":"#89509b",E4:"#127ab5",F4:"#fddb18","F#4":"#127ab5",G4:"#9d9fa6","G#4":"#f07c14",A4:"#9d9fa6","A#4":"#fddb18",B4:"#9d9fa6"};function zm(t,e,n,r,o,i,s){try{var a=t[i](s),u=a.value}catch(c){return void n(c)}a.done?e(u):Promise.resolve(u).then(r,o)}function at(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function s(u){zm(i,r,o,s,a,"next",u)}function a(u){zm(i,r,o,s,a,"throw",u)}s(void 0)})}}class zt{constructor(e=!1){this.eventMap={},this.eventsSuspended=1==e}addListener(e,n,r={}){if("string"==typeof e&&e.length<1||e instanceof String&&e.length<1||"string"!=typeof e&&!(e instanceof String)&&e!==zt.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if("function"!=typeof n)throw new TypeError("The callback must be a function.");const o=new Wm(e,this,n,r);return this.eventMap[e]||(this.eventMap[e]=[]),r.prepend?this.eventMap[e].unshift(o):this.eventMap[e].push(o),o}addOneTimeListener(e,n,r={}){r.remaining=1,this.addListener(e,n,r)}static get ANY_EVENT(){return Symbol.for("Any event")}hasListener(e,n){return void 0===e?!!(this.eventMap[zt.ANY_EVENT]&&this.eventMap[zt.ANY_EVENT].length>0)||Object.entries(this.eventMap).some(([,r])=>r.length>0):!!(this.eventMap[e]&&this.eventMap[e].length>0)&&(n instanceof Wm?this.eventMap[e].filter(r=>r===n).length>0:"function"==typeof n?this.eventMap[e].filter(r=>r.callback===n).length>0:null==n)}get eventNames(){return Object.keys(this.eventMap)}getListeners(e){return this.eventMap[e]||[]}suspendEvent(e){this.getListeners(e).forEach(n=>{n.suspended=!0})}unsuspendEvent(e){this.getListeners(e).forEach(n=>{n.suspended=!1})}getListenerCount(e){return this.getListeners(e).length}emit(e,...n){if("string"!=typeof e&&!(e instanceof String))throw new TypeError("The 'event' parameter must be a string.");if(this.eventsSuspended)return;let r=[],o=this.eventMap[zt.ANY_EVENT]||[];return this.eventMap[e]&&(o=o.concat(this.eventMap[e])),o.forEach(i=>{if(i.suspended)return;let s=[...n];Array.isArray(i.arguments)&&(s=s.concat(i.arguments)),i.remaining>0&&(r.push(i.callback.apply(i.context,s)),i.count++),--i.remaining<1&&i.remove()}),r}removeListener(e,n,r={}){if(void 0===e)return void(this.eventMap={});if(!this.eventMap[e])return;let o=this.eventMap[e].filter(i=>n&&i.callback!==n||r.remaining&&r.remaining!==i.remaining||r.context&&r.context!==i.context);o.length?this.eventMap[e]=o:delete this.eventMap[e]}waitFor(e,n={}){var r=this;return at(function*(){return n.duration=parseInt(n.duration),(isNaN(n.duration)||n.duration<=0)&&(n.duration=1/0),new Promise((o,i)=>{let s,a=r.addListener(e,()=>{clearTimeout(s),o()},{remaining:1});n.duration!==1/0&&(s=setTimeout(()=>{a.remove(),i("The duration expired before the event was emitted.")},n.duration))})})()}get eventCount(){return Object.keys(this.eventMap).length}}class Wm{constructor(e,n,r,o={}){if("string"!=typeof e&&!(e instanceof String)&&e!==zt.ANY_EVENT)throw new TypeError("The 'event' parameter must be a string or EventEmitter.ANY_EVENT.");if(!n)throw new ReferenceError("The 'target' parameter is mandatory.");if("function"!=typeof r)throw new TypeError("The 'callback' must be a function.");void 0===o.arguments||Array.isArray(o.arguments)||(o.arguments=[o.arguments]),(o=Object.assign({context:n,remaining:1/0,arguments:void 0,duration:1/0},o)).duration!==1/0&&setTimeout(()=>this.remove(),o.duration),this.arguments=o.arguments,this.callback=r,this.context=o.context,this.count=0,this.event=e,this.remaining=parseInt(o.remaining)>=1?parseInt(o.remaining):1/0,this.suspended=!1,this.target=n}remove(){this.target.removeListener(this.event,this.callback,{context:this.context,remaining:this.remaining})}}class A{static get MIDI_CHANNEL_MESSAGES(){return{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,programchange:12,channelaftertouch:13,pitchbend:14}}static get MIDI_CHANNEL_NUMBERS(){return[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]}static get MIDI_CHANNEL_MODE_MESSAGES(){return{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_CONTROL_CHANGE_MESSAGES(){return{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,controller3:3,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,controller9:9,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,controller14:14,controller15:15,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,controller20:20,controller21:21,controller22:22,controller23:23,controller24:24,controller25:25,controller26:26,controller27:27,controller28:28,controller29:29,controller30:30,controller31:31,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,controller35:35,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,controller41:41,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,controller46:46,controller47:47,controller48:48,controller49:49,controller50:50,controller51:51,controller52:52,controller53:53,controller54:54,controller55:55,controller56:56,controller57:57,controller58:58,controller59:59,controller60:60,controller61:61,controller62:62,controller63:63,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,controller84:84,controller85:85,controller86:86,controller87:87,controller88:88,controller89:89,controller90:90,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101,controller102:102,controller103:103,controller104:104,controller105:105,controller106:106,controller107:107,controller108:108,controller109:109,controller110:110,controller111:111,controller112:112,controller113:113,controller114:114,controller115:115,controller116:116,controller117:117,controller118:118,controller119:119,allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127}}static get MIDI_REGISTERED_PARAMETERS(){return{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]}}static get MIDI_SYSTEM_MESSAGES(){return{sysex:240,timecode:241,songposition:242,songselect:243,tunerequest:246,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1}}static get CHANNEL_EVENTS(){return["noteoff","controlchange","noteon","keyaftertouch","programchange","channelaftertouch","pitchbend","allnotesoff","allsoundoff","localcontrol","monomode","omnimode","resetallcontrollers","nrpn","nrpn-dataentrycoarse","nrpn-dataentryfine","nrpn-databuttonincrement","nrpn-databuttondecrement","rpn","rpn-dataentrycoarse","rpn-dataentryfine","rpn-databuttonincrement","rpn-databuttondecrement"]}}class zr{constructor(e,n={}){this.duration=O.defaults.note.duration,this.attack=O.defaults.note.attack,this.release=O.defaults.note.release,null!=n.duration&&(this.duration=n.duration),null!=n.attack&&(this.attack=n.attack),null!=n.rawAttack&&(this.attack=F.from7bitToFloat(n.rawAttack)),null!=n.release&&(this.release=n.release),null!=n.rawRelease&&(this.release=F.from7bitToFloat(n.rawRelease)),this.identifier=Number.isInteger(e)?F.toNoteIdentifier(e):e}get identifier(){return this._name+(this._accidental||"")+this._octave}set identifier(e){const n=F.getNoteDetails(e);if(O.validation&&!e)throw new Error("Invalid note identifier");this._name=n.name,this._accidental=n.accidental,this._octave=n.octave}get name(){return this._name}set name(e){if(O.validation&&(e=e.toUpperCase(),!["C","D","E","F","G","A","B"].includes(e)))throw new Error("Invalid name value");this._name=e}get accidental(){return this._accidental}set accidental(e){if(O.validation&&(e=e.toLowerCase(),!["#","##","b","bb"].includes(e)))throw new Error("Invalid accidental value");this._accidental=e}get octave(){return this._octave}set octave(e){if(O.validation&&(e=parseInt(e),isNaN(e)))throw new Error("Invalid octave value");this._octave=e}get duration(){return this._duration}set duration(e){if(O.validation&&(e=parseFloat(e),isNaN(e)||null===e||e<0))throw new RangeError("Invalid duration value.");this._duration=e}get attack(){return this._attack}set attack(e){if(O.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid attack value.");this._attack=e}get release(){return this._release}set release(e){if(O.validation&&(e=parseFloat(e),isNaN(e)||!(e>=0&&e<=1)))throw new RangeError("Invalid release value.");this._release=e}get rawAttack(){return F.fromFloatTo7Bit(this._attack)}set rawAttack(e){this._attack=F.from7bitToFloat(e)}get rawRelease(){return F.fromFloatTo7Bit(this._release)}set rawRelease(e){this._release=F.from7bitToFloat(e)}get number(){return F.toNoteNumber(this.identifier)}getOffsetNumber(e=0,n=0){return O.validation&&(e=parseInt(e)||0,n=parseInt(n)||0),Math.min(Math.max(this.number+12*e+n,0),127)}}class F{static toNoteNumber(e,n=0){if(n=null==n?0:parseInt(n),isNaN(n))throw new RangeError("Invalid 'octaveOffset' value");"string"!=typeof e&&(e="");const r=this.getNoteDetails(e);if(!r)throw new TypeError("Invalid note identifier");let o=12*(r.octave+1+n);if(o+={C:0,D:2,E:4,F:5,G:7,A:9,B:11}[r.name],r.accidental&&(r.accidental.startsWith("b")?o-=r.accidental.length:o+=r.accidental.length),o<0||o>127)throw new RangeError("Invalid octaveOffset value");return o}static getNoteDetails(e){Number.isInteger(e)&&(e=this.toNoteIdentifier(e));const n=e.match(/^([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)$/i);if(!n)throw new TypeError("Invalid note identifier");const r=n[1].toUpperCase(),o=parseInt(n[3]);let i=n[2].toLowerCase();return i=""===i?void 0:i,{accidental:i,identifier:r+(i||"")+o,name:r,octave:o}}static sanitizeChannels(e){let n;if(this.validation)if("all"===e)n=["all"];else if("none"===e)return[];return n=Array.isArray(e)?e:[e],n.indexOf("all")>-1&&(n=A.MIDI_CHANNEL_NUMBERS),n.map(function(r){return parseInt(r)}).filter(function(r){return r>=1&&r<=16})}static toTimestamp(e){let n=!1;const r=parseFloat(e);return!isNaN(r)&&("string"==typeof e&&"+"===e.substring(0,1)?r>=0&&(n=O.time+r):r>=0&&(n=r),n)}static guessNoteNumber(e,n){n=parseInt(n)||0;let r=!1;if(Number.isInteger(e)&&e>=0&&e<=127)r=parseInt(e);else if(parseInt(e)>=0&&parseInt(e)<=127)r=parseInt(e);else if("string"==typeof e||e instanceof String)try{r=this.toNoteNumber(e.trim(),n)}catch{return!1}return r}static toNoteIdentifier(e,n){if(e=parseInt(e),isNaN(e)||e<0||e>127)throw new RangeError("Invalid note number");if(n=null==n?0:parseInt(n),isNaN(n))throw new RangeError("Invalid octaveOffset value");const r=Math.floor(e/12-1)+n;return["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"][e%12]+r.toString()}static buildNote(e,n={}){if(n.octaveOffset=parseInt(n.octaveOffset)||0,e instanceof zr)return e;let r=this.guessNoteNumber(e,n.octaveOffset);if(!1===r)throw new TypeError(`The input could not be parsed as a note (${e})`);return n.octaveOffset=void 0,new zr(r,n)}static buildNoteArray(e,n={}){let r=[];return Array.isArray(e)||(e=[e]),e.forEach(o=>{r.push(this.buildNote(o,n))}),r}static from7bitToFloat(e){return e===1/0&&(e=127),e=parseInt(e)||0,Math.min(Math.max(e/127,0),1)}static fromFloatTo7Bit(e){return e===1/0&&(e=1),e=parseFloat(e)||0,Math.min(Math.max(Math.round(127*e),0),127)}static fromMsbLsbToFloat(e,n=0){return O.validation&&(e=Math.min(Math.max(parseInt(e)||0,0),127),n=Math.min(Math.max(parseInt(n)||0,0),127)),Math.min(Math.max(((e<<7)+n)/16383,0),1)}static fromFloatToMsbLsb(e){O.validation&&(e=Math.min(Math.max(parseFloat(e)||0,0),1));const n=Math.round(16383*e);return{msb:n>>7,lsb:127&n}}static offsetNumber(e,n=0,r=0){if(O.validation){if(e=parseInt(e),isNaN(e))throw new Error("Invalid note number");n=parseInt(n)||0,r=parseInt(r)||0}return Math.min(Math.max(e+12*n+r,0),127)}static getPropertyByValue(e,n){return Object.keys(e).find(r=>e[r]===n)}static getCcNameByNumber(e){return F.getPropertyByValue(A.MIDI_CONTROL_CHANGE_MESSAGES,e)}static getChannelModeByNumber(e){if(!(e>=120&&e<=127))return!1;for(let n in A.MIDI_CHANNEL_MODE_MESSAGES)if(A.MIDI_CHANNEL_MODE_MESSAGES.hasOwnProperty(n)&&e===A.MIDI_CHANNEL_MODE_MESSAGES[n])return n;return!1}static get isNode(){return new Function("try { return this === global; } catch(e) { return false; }")()}static get isBrowser(){return new Function("try { return this === window; } catch(e) { return false; }")()}}class mT extends zt{constructor(e,n){super(),this._output=e,this._number=n,this._octaveOffset=0}destroy(){this._output=null,this._number=null,this._octaveOffset=0,this.removeListener()}send(e,n={time:0}){return this.output.send(e,n),this}sendKeyAftertouch(e,n,r={}){if(O.validation){if(r.useRawValue&&(r.rawValue=r.useRawValue),isNaN(parseFloat(n)))throw new RangeError("Invalid key aftertouch value.");if(r.rawValue){if(!(n>=0&&n<=127&&Number.isInteger(n)))throw new RangeError("Key aftertouch raw value must be an integer between 0 and 127.")}else if(!(n>=0&&n<=1))throw new RangeError("Key aftertouch value must be a float between 0 and 1.")}r.rawValue||(n=F.fromFloatTo7Bit(n));const o=O.octaveOffset+this.output.octaveOffset+this.octaveOffset;return Array.isArray(e)||(e=[e]),F.buildNoteArray(e).forEach(i=>{this.send([this.number-1+(A.MIDI_CHANNEL_MESSAGES.keyaftertouch<<4),i.getOffsetNumber(o),n],{time:F.toTimestamp(r.time)})}),this}sendControlChange(e,n,r={}){if("string"==typeof e&&(e=A.MIDI_CONTROL_CHANGE_MESSAGES[e]),Array.isArray(n)||(n=[n]),O.validation){if(void 0===e)throw new TypeError("Control change must be identified with a valid name or an integer between 0 and 127.");if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new TypeError("Control change number must be an integer between 0 and 127.");if(2===(n=n.map(o=>{const i=Math.min(Math.max(parseInt(o),0),127);if(isNaN(i))throw new TypeError("Values must be integers between 0 and 127");return i})).length&&e>=32)throw new TypeError("To use a value array, the controller must be between 0 and 31")}return n.forEach((o,i)=>{this.send([this.number-1+(A.MIDI_CHANNEL_MESSAGES.controlchange<<4),e+32*i,n[i]],{time:F.toTimestamp(r.time)})}),this}_selectNonRegisteredParameter(e,n={}){return this.sendControlChange(99,e[0],n),this.sendControlChange(98,e[1],n),this}_deselectRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_deselectNonRegisteredParameter(e={}){return this.sendControlChange(101,127,e),this.sendControlChange(100,127,e),this}_selectRegisteredParameter(e,n={}){return this.sendControlChange(101,e[0],n),this.sendControlChange(100,e[1],n),this}_setCurrentParameter(e,n={}){return e=[].concat(e),this.sendControlChange(6,e[0],n),e.length<2||this.sendControlChange(38,e[1],n),this}sendRpnDecrement(e,n={}){if(Array.isArray(e)||(e=A.MIDI_REGISTERED_PARAMETERS[e]),O.validation){if(void 0===e)throw new TypeError("The specified registered parameter is invalid.");let r=!1;if(Object.getOwnPropertyNames(A.MIDI_REGISTERED_PARAMETERS).forEach(o=>{A.MIDI_REGISTERED_PARAMETERS[o][0]===e[0]&&A.MIDI_REGISTERED_PARAMETERS[o][1]===e[1]&&(r=!0)}),!r)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,n),this.sendControlChange(97,0,n),this._deselectRegisteredParameter(n),this}sendRpnIncrement(e,n={}){if(Array.isArray(e)||(e=A.MIDI_REGISTERED_PARAMETERS[e]),O.validation){if(void 0===e)throw new TypeError("The specified registered parameter is invalid.");let r=!1;if(Object.getOwnPropertyNames(A.MIDI_REGISTERED_PARAMETERS).forEach(o=>{A.MIDI_REGISTERED_PARAMETERS[o][0]===e[0]&&A.MIDI_REGISTERED_PARAMETERS[o][1]===e[1]&&(r=!0)}),!r)throw new TypeError("The specified registered parameter is invalid.")}return this._selectRegisteredParameter(e,n),this.sendControlChange(96,0,n),this._deselectRegisteredParameter(n),this}playNote(e,n={}){if(this.sendNoteOn(e,n),n.duration>0&&isFinite(String(n.duration).trim()||NaN)){let r={time:(F.toTimestamp(n.time)||O.time)+n.duration,release:n.release,rawRelease:n.rawRelease};this.sendNoteOff(e,r)}return this}sendNoteOff(e,n={}){if(O.validation){if(null!=n.rawRelease&&!(n.rawRelease>=0&&n.rawRelease<=127))throw new RangeError("The 'rawRelease' option must be an integer between 0 and 127");if(null!=n.release&&!(n.release>=0&&n.release<=1))throw new RangeError("The 'release' option must be an number between 0 and 1");n.rawVelocity&&(n.rawRelease=n.velocity,console.warn("The 'rawVelocity' option is deprecated. Use 'rawRelease' instead.")),n.velocity&&(n.release=n.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let r=64;null!=n.rawRelease?r=n.rawRelease:isNaN(n.release)||(r=Math.round(127*n.release));const o=O.octaveOffset+this.output.octaveOffset+this.octaveOffset;return F.buildNoteArray(e,{rawRelease:parseInt(r)}).forEach(i=>{this.send([this.number-1+(A.MIDI_CHANNEL_MESSAGES.noteoff<<4),i.getOffsetNumber(o),i.rawRelease],{time:F.toTimestamp(n.time)})}),this}stopNote(e,n={}){return this.sendNoteOff(e,n)}sendNoteOn(e,n={}){if(O.validation){if(null!=n.rawAttack&&!(n.rawAttack>=0&&n.rawAttack<=127))throw new RangeError("The 'rawAttack' option must be an integer between 0 and 127");if(null!=n.attack&&!(n.attack>=0&&n.attack<=1))throw new RangeError("The 'attack' option must be an number between 0 and 1");n.rawVelocity&&(n.rawAttack=n.velocity,n.rawRelease=n.release,console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' or 'rawRelease'.")),n.velocity&&(n.attack=n.velocity,console.warn("The 'velocity' option is deprecated. Use 'attack' instead."))}let r=64;null!=n.rawAttack?r=n.rawAttack:isNaN(n.attack)||(r=Math.round(127*n.attack));const o=O.octaveOffset+this.output.octaveOffset+this.octaveOffset;return F.buildNoteArray(e,{rawAttack:r}).forEach(i=>{this.send([this.number-1+(A.MIDI_CHANNEL_MESSAGES.noteon<<4),i.getOffsetNumber(o),i.rawAttack],{time:F.toTimestamp(n.time)})}),this}sendChannelMode(e,n=0,r={}){if("string"==typeof e&&(e=A.MIDI_CHANNEL_MODE_MESSAGES[e]),O.validation){if(void 0===e)throw new TypeError("Invalid channel mode message name or number.");if(isNaN(e)||!(e>=120&&e<=127))throw new TypeError("Invalid channel mode message number.");if(isNaN(parseInt(n))||n<0||n>127)throw new RangeError("Value must be an integer between 0 and 127.")}return this.send([this.number-1+(A.MIDI_CHANNEL_MESSAGES.controlchange<<4),e,n],{time:F.toTimestamp(r.time)}),this}sendOmniMode(e,n={}){return this.sendChannelMode(void 0===e||e?"omnimodeon":"omnimodeoff",0,n),this}sendChannelAftertouch(e,n={}){if(O.validation){if(isNaN(parseFloat(e)))throw new RangeError("Invalid channel aftertouch value.");if(n.rawValue){if(!(e>=0&&e<=127&&Number.isInteger(e)))throw new RangeError("Channel aftertouch raw value must be an integer between 0 and 127.")}else if(!(e>=0&&e<=1))throw new RangeError("Channel aftertouch value must be a float between 0 and 1.")}return this.send([this.number-1+(A.MIDI_CHANNEL_MESSAGES.channelaftertouch<<4),Math.round(127*e)],{time:F.toTimestamp(n.time)}),this}sendMasterTuning(e,n={}){if(e=parseFloat(e)||0,O.validation&&!(e>-65&&e<64))throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");let r=Math.floor(e)+64,o=e-Math.floor(e);o=Math.round((o+1)/2*16383);let i=o>>7&127,s=127&o;return this.sendRpnValue("channelcoarsetuning",r,n),this.sendRpnValue("channelfinetuning",[i,s],n),this}sendModulationRange(e,n,r={}){if(O.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!(null==n||Number.isInteger(n)&&n>=0&&n<=127))throw new RangeError("If specified, the cents value must be an integer between 0 and 127.")}return n>=0&&n<=127||(n=0),this.sendRpnValue("modulationrange",[e,n],r),this}sendNrpnValue(e,n,r={}){if(n=[].concat(n),O.validation){if(!Array.isArray(e)||!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the NRPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the NRPN must be between 0 and 127.");n.forEach(o=>{if(!(o>=0&&o<=127))throw new RangeError("The data bytes of the NRPN must be between 0 and 127.")})}return this._selectNonRegisteredParameter(e,r),this._setCurrentParameter(n,r),this._deselectNonRegisteredParameter(r),this}sendPitchBend(e,n={}){if(O.validation)if(n.rawValue&&Array.isArray(e)){if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The pitch bend LSB must be an integer between 0 and 127.")}else if(n.rawValue&&!Array.isArray(e)){if(!(e>=0&&e<=127))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}else{if(isNaN(e)||null===e)throw new RangeError("Invalid pitch bend value.");if(!(e>=-1&&e<=1))throw new RangeError("The pitch bend MSB must be an integer between 0 and 127.")}let r=0,o=0;if(n.rawValue&&Array.isArray(e))r=e[0],o=e[1];else if(n.rawValue&&!Array.isArray(e))r=e;else{const i=F.fromFloatToMsbLsb((e+1)/2);r=i.msb,o=i.lsb}return this.send([this.number-1+(A.MIDI_CHANNEL_MESSAGES.pitchbend<<4),o,r],{time:F.toTimestamp(n.time)}),this}sendPitchBendRange(e,n,r={}){if(O.validation){if(!Number.isInteger(e)||!(e>=0&&e<=127))throw new RangeError("The semitones value must be an integer between 0 and 127.");if(!Number.isInteger(n)||!(n>=0&&n<=127))throw new RangeError("The cents value must be an integer between 0 and 127.")}return this.sendRpnValue("pitchbendrange",[e,n],r),this}sendProgramChange(e,n={}){if(e=parseInt(e)||0,O.validation&&!(e>=0&&e<=127))throw new RangeError("The program number must be between 0 and 127.");return this.send([this.number-1+(A.MIDI_CHANNEL_MESSAGES.programchange<<4),e],{time:F.toTimestamp(n.time)}),this}sendRpnValue(e,n,r={}){if(Array.isArray(e)||(e=A.MIDI_REGISTERED_PARAMETERS[e]),O.validation){if(!Number.isInteger(e[0])||!Number.isInteger(e[1]))throw new TypeError("The specified NRPN is invalid.");if(!(e[0]>=0&&e[0]<=127))throw new RangeError("The first byte of the RPN must be between 0 and 127.");if(!(e[1]>=0&&e[1]<=127))throw new RangeError("The second byte of the RPN must be between 0 and 127.");[].concat(n).forEach(o=>{if(!(o>=0&&o<=127))throw new RangeError("The data bytes of the RPN must be between 0 and 127.")})}return this._selectRegisteredParameter(e,r),this._setCurrentParameter(n,r),this._deselectRegisteredParameter(r),this}sendTuningBank(e,n={}){if(O.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning bank number must be between 0 and 127.");return this.sendRpnValue("tuningbank",e,n),this}sendTuningProgram(e,n={}){if(O.validation&&(!Number.isInteger(e)||!(e>=0&&e<=127)))throw new RangeError("The tuning program number must be between 0 and 127.");return this.sendRpnValue("tuningprogram",e,n),this}sendLocalControl(e,n={}){return this.sendChannelMode("localcontrol",e?127:0,n)}sendAllNotesOff(e={}){return this.sendChannelMode("allnotesoff",0,e)}sendAllSoundOff(e={}){return this.sendChannelMode("allsoundoff",0,e)}sendResetAllControllers(e={}){return this.sendChannelMode("resetallcontrollers",0,e)}sendPolyphonicMode(e,n={}){return this.sendChannelMode("mono"===e?"monomodeon":"polymodeon",0,n)}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get output(){return this._output}get number(){return this._number}}class Ll extends zt{constructor(e){super(),this._midiOutput=e,this._octaveOffset=0,this.channels=[];for(let n=1;n<=16;n++)this.channels[n]=new mT(this,n);this._midiOutput.onstatechange=this._onStateChange.bind(this)}destroy(){var e=this;return at(function*(){e.removeListener(),e.channels.forEach(n=>n.destroy()),e.channels=[],e._midiOutput.onstatechange=null,yield e.close(),e._midiOutput=null})()}_onStateChange(e){let n={timestamp:O.time};"open"===e.port.connection?(n.type="opened",n.target=this,n.port=n.target,this.emit("opened",n)):"closed"===e.port.connection&&"connected"===e.port.state?(n.type="closed",n.target=this,n.port=n.target,this.emit("closed",n)):"closed"===e.port.connection&&"disconnected"===e.port.state?(n.type="disconnected",n.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",n)):"pending"===e.port.connection&&"disconnected"===e.port.state||console.warn("This statechange event was not caught:",e.port.connection,e.port.state)}open(){var e=this;return at(function*(){try{return yield e._midiOutput.open(),Promise.resolve(e)}catch(n){return Promise.reject(n)}})()}close(){var e=this;return at(function*(){e._midiOutput?yield e._midiOutput.close():yield Promise.resolve()})()}send(e,n={time:0},r=0){if(e instanceof Ym&&(e=F.isNode?e.data:e.rawData),e instanceof Uint8Array&&F.isNode&&(e=Array.from(e)),O.validation){if(Array.isArray(e)||e instanceof Uint8Array||(e=[e],Array.isArray(n)&&(e=e.concat(n)),n=isNaN(r)?{time:0}:{time:r}),!(parseInt(e[0])>=128&&parseInt(e[0])<=255))throw new RangeError("The first byte (status) must be an integer between 128 and 255.");e.slice(1).forEach(o=>{if(!((o=parseInt(o))>=0&&o<=255))throw new RangeError("Data bytes must be integers between 0 and 255.")}),n||(n={time:0})}return this._midiOutput.send(e,F.toTimestamp(n.time)),this}sendSysex(e,n=[],r={}){if(e=[].concat(e),n instanceof Uint8Array){const o=new Uint8Array(1+e.length+n.length+1);o[0]=A.MIDI_SYSTEM_MESSAGES.sysex,o.set(Uint8Array.from(e),1),o.set(n,1+e.length),o[o.length-1]=A.MIDI_SYSTEM_MESSAGES.sysexend,this.send(o,{time:r.time})}else{const o=e.concat(n,A.MIDI_SYSTEM_MESSAGES.sysexend);this.send([A.MIDI_SYSTEM_MESSAGES.sysex].concat(o),{time:r.time})}return this}clear(){return this._midiOutput.clear?this._midiOutput.clear():O.validation&&console.warn("The 'clear()' method has not yet been implemented in your environment."),this}sendTimecodeQuarterFrame(e,n={}){if(O.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The value must be an integer between 0 and 127.");return this.send([A.MIDI_SYSTEM_MESSAGES.timecode,e],{time:n.time}),this}sendSongPosition(e=0,n={}){var r=(e=Math.floor(e)||0)>>7&127;return this.send([A.MIDI_SYSTEM_MESSAGES.songposition,r,127&e],{time:n.time}),this}sendSongSelect(e=0,n={}){if(O.validation&&(e=parseInt(e),isNaN(e)||!(e>=0&&e<=127)))throw new RangeError("The program value must be between 0 and 127");return this.send([A.MIDI_SYSTEM_MESSAGES.songselect,e],{time:n.time}),this}sendTuneRequest(e={}){return this.send([A.MIDI_SYSTEM_MESSAGES.tunerequest],{time:e.time}),this}sendClock(e={}){return this.send([A.MIDI_SYSTEM_MESSAGES.clock],{time:e.time}),this}sendStart(e={}){return this.send([A.MIDI_SYSTEM_MESSAGES.start],{time:e.time}),this}sendContinue(e={}){return this.send([A.MIDI_SYSTEM_MESSAGES.continue],{time:e.time}),this}sendStop(e={}){return this.send([A.MIDI_SYSTEM_MESSAGES.stop],{time:e.time}),this}sendActiveSensing(e={}){return this.send([A.MIDI_SYSTEM_MESSAGES.activesensing],{time:e.time}),this}sendReset(e={}){return this.send([A.MIDI_SYSTEM_MESSAGES.reset],{time:e.time}),this}sendTuningRequest(e={}){return O.validation&&console.warn("The sendTuningRequest() method has been deprecated. Use sendTuningRequest() instead."),this.sendTuneRequest(e)}sendKeyAftertouch(e,n,r={}){return null==r.channels&&(r.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(r.channels).forEach(o=>{this.channels[o].sendKeyAftertouch(e,n,r)}),this}sendControlChange(e,n,r={},o={}){if(O.validation&&(Array.isArray(r)||Number.isInteger(r)||"all"===r)){const i=r;(r=o).channels=i,"all"===r.channels&&(r.channels=A.MIDI_CHANNEL_NUMBERS)}return null==r.channels&&(r.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendControlChange(e,n,r)}),this}sendPitchBendRange(e=0,n=0,r={}){return null==r.channels&&(r.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(r.channels).forEach(o=>{this.channels[o].sendPitchBendRange(e,n,r)}),this}setPitchBendRange(e=0,n=0,r="all",o={}){return O.validation&&(console.warn("The setPitchBendRange() method is deprecated. Use sendPitchBendRange() instead."),o.channels=r,"all"===o.channels&&(o.channels=A.MIDI_CHANNEL_NUMBERS)),this.sendPitchBendRange(e,n,o)}sendRpnValue(e,n,r={}){return null==r.channels&&(r.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(r.channels).forEach(o=>{this.channels[o].sendRpnValue(e,n,r)}),this}setRegisteredParameter(e,n=[],r="all",o={}){return O.validation&&(console.warn("The setRegisteredParameter() method is deprecated. Use sendRpnValue() instead."),o.channels=r,"all"===o.channels&&(o.channels=A.MIDI_CHANNEL_NUMBERS)),this.sendRpnValue(e,n,o)}sendChannelAftertouch(e,n={},r={}){if(O.validation&&(Array.isArray(n)||Number.isInteger(n)||"all"===n)){const o=n;(n=r).channels=o,"all"===n.channels&&(n.channels=A.MIDI_CHANNEL_NUMBERS)}return null==n.channels&&(n.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(o=>{this.channels[o].sendChannelAftertouch(e,n)}),this}sendPitchBend(e,n={},r={}){if(O.validation&&(Array.isArray(n)||Number.isInteger(n)||"all"===n)){const o=n;(n=r).channels=o,"all"===n.channels&&(n.channels=A.MIDI_CHANNEL_NUMBERS)}return null==n.channels&&(n.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(o=>{this.channels[o].sendPitchBend(e,n)}),this}sendProgramChange(e=0,n={},r={}){if(O.validation&&(Array.isArray(n)||Number.isInteger(n)||"all"===n)){const o=n;(n=r).channels=o,"all"===n.channels&&(n.channels=A.MIDI_CHANNEL_NUMBERS)}return null==n.channels&&(n.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(o=>{this.channels[o].sendProgramChange(e,n)}),this}sendModulationRange(e,n,r={}){return null==r.channels&&(r.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(r.channels).forEach(o=>{this.channels[o].sendModulationRange(e,n,r)}),this}setModulationRange(e=0,n=0,r="all",o={}){return O.validation&&(console.warn("The setModulationRange() method is deprecated. Use sendModulationRange() instead."),o.channels=r,"all"===o.channels&&(o.channels=A.MIDI_CHANNEL_NUMBERS)),this.sendModulationRange(e,n,o)}sendMasterTuning(e,n={}){return null==n.channels&&(n.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendMasterTuning(e,n)}),this}setMasterTuning(e,n={},r={}){return O.validation&&(console.warn("The setMasterTuning() method is deprecated. Use sendMasterTuning() instead."),r.channels=n,"all"===r.channels&&(r.channels=A.MIDI_CHANNEL_NUMBERS)),this.sendMasterTuning(e,r)}sendTuningProgram(e,n={}){return null==n.channels&&(n.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendTuningProgram(e,n)}),this}setTuningProgram(e,n="all",r={}){return O.validation&&(console.warn("The setTuningProgram() method is deprecated. Use sendTuningProgram() instead."),r.channels=n,"all"===r.channels&&(r.channels=A.MIDI_CHANNEL_NUMBERS)),this.sendTuningProgram(e,r)}sendTuningBank(e=0,n={}){return null==n.channels&&(n.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendTuningBank(e,n)}),this}setTuningBank(e,n="all",r={}){return O.validation&&(console.warn("The setTuningBank() method is deprecated. Use sendTuningBank() instead."),r.channels=n,"all"===r.channels&&(r.channels=A.MIDI_CHANNEL_NUMBERS)),this.sendTuningBank(e,r)}sendChannelMode(e,n=0,r={},o={}){if(O.validation&&(Array.isArray(r)||Number.isInteger(r)||"all"===r)){const i=r;(r=o).channels=i,"all"===r.channels&&(r.channels=A.MIDI_CHANNEL_NUMBERS)}return null==r.channels&&(r.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(r.channels).forEach(i=>{this.channels[i].sendChannelMode(e,n,r)}),this}sendAllSoundOff(e={}){return null==e.channels&&(e.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(e.channels).forEach(n=>{this.channels[n].sendAllSoundOff(e)}),this}sendAllNotesOff(e={}){return null==e.channels&&(e.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(e.channels).forEach(n=>{this.channels[n].sendAllNotesOff(e)}),this}sendResetAllControllers(e={},n={}){if(O.validation&&(Array.isArray(e)||Number.isInteger(e)||"all"===e)){const r=e;(e=n).channels=r,"all"===e.channels&&(e.channels=A.MIDI_CHANNEL_NUMBERS)}return null==e.channels&&(e.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(e.channels).forEach(r=>{this.channels[r].sendResetAllControllers(e)}),this}sendPolyphonicMode(e,n={},r={}){if(O.validation&&(Array.isArray(n)||Number.isInteger(n)||"all"===n)){const o=n;(n=r).channels=o,"all"===n.channels&&(n.channels=A.MIDI_CHANNEL_NUMBERS)}return null==n.channels&&(n.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(o=>{this.channels[o].sendPolyphonicMode(e,n)}),this}sendLocalControl(e,n={},r={}){if(O.validation&&(Array.isArray(n)||Number.isInteger(n)||"all"===n)){const o=n;(n=r).channels=o,"all"===n.channels&&(n.channels=A.MIDI_CHANNEL_NUMBERS)}return null==n.channels&&(n.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(o=>{this.channels[o].sendLocalControl(e,n)}),this}sendOmniMode(e,n={},r={}){if(O.validation&&(Array.isArray(n)||Number.isInteger(n)||"all"===n)){const o=n;(n=r).channels=o,"all"===n.channels&&(n.channels=A.MIDI_CHANNEL_NUMBERS)}return null==n.channels&&(n.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(o=>{this.channels[o].sendOmniMode(e,n)}),this}sendNrpnValue(e,n,r={}){return null==r.channels&&(r.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(r.channels).forEach(o=>{this.channels[o].sendNrpnValue(e,n,r)}),this}setNonRegisteredParameter(e,n=[],r="all",o={}){return O.validation&&(console.warn("The setNonRegisteredParameter() method is deprecated. Use sendNrpnValue() instead."),o.channels=r,"all"===o.channels&&(o.channels=A.MIDI_CHANNEL_NUMBERS)),this.sendNrpnValue(e,n,o)}sendRpnIncrement(e,n={}){return null==n.channels&&(n.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendRpnIncrement(e,n)}),this}incrementRegisteredParameter(e,n="all",r={}){return O.validation&&(console.warn("The incrementRegisteredParameter() method is deprecated. Use sendRpnIncrement() instead."),r.channels=n,"all"===r.channels&&(r.channels=A.MIDI_CHANNEL_NUMBERS)),this.sendRpnIncrement(e,r)}sendRpnDecrement(e,n={}){return null==n.channels&&(n.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(r=>{this.channels[r].sendRpnDecrement(e,n)}),this}decrementRegisteredParameter(e,n="all",r={}){return O.validation&&(console.warn("The decrementRegisteredParameter() method is deprecated. Use sendRpnDecrement() instead."),r.channels=n,"all"===r.channels&&(r.channels=A.MIDI_CHANNEL_NUMBERS)),this.sendRpnDecrement(e,r)}sendNoteOff(e,n={},r={}){if(O.validation&&(Array.isArray(n)||Number.isInteger(n)||"all"===n)){const o=n;(n=r).channels=o,"all"===n.channels&&(n.channels=A.MIDI_CHANNEL_NUMBERS)}return null==n.channels&&(n.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(o=>{this.channels[o].sendNoteOff(e,n)}),this}stopNote(e,n){return this.sendNoteOff(e,n)}playNote(e,n={},r={}){if(O.validation&&(n.rawVelocity&&console.warn("The 'rawVelocity' option is deprecated. Use 'rawAttack' instead."),n.velocity&&console.warn("The 'velocity' option is deprecated. Use 'velocity' instead."),Array.isArray(n)||Number.isInteger(n)||"all"===n)){const o=n;(n=r).channels=o,"all"===n.channels&&(n.channels=A.MIDI_CHANNEL_NUMBERS)}return null==n.channels&&(n.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(o=>{this.channels[o].playNote(e,n)}),this}sendNoteOn(e,n={},r={}){if(O.validation&&(Array.isArray(n)||Number.isInteger(n)||"all"===n)){const o=n;(n=r).channels=o,"all"===n.channels&&(n.channels=A.MIDI_CHANNEL_NUMBERS)}return null==n.channels&&(n.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(n.channels).forEach(o=>{this.channels[o].sendNoteOn(e,n)}),this}get name(){return this._midiOutput.name}get id(){return this._midiOutput.id}get connection(){return this._midiOutput.connection}get manufacturer(){return this._midiOutput.manufacturer}get state(){return this._midiOutput.state}get type(){return this._midiOutput.type}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}}class Qm{constructor(e=[],n={}){this.destinations=[],this.types=[...Object.keys(A.MIDI_SYSTEM_MESSAGES),...Object.keys(A.MIDI_CHANNEL_MESSAGES)],this.channels=A.MIDI_CHANNEL_NUMBERS,this.suspended=!1,Array.isArray(e)||(e=[e]),n.types&&!Array.isArray(n.types)&&(n.types=[n.types]),n.channels&&!Array.isArray(n.channels)&&(n.channels=[n.channels]),O.validation&&(e.forEach(r=>{if(!(r instanceof Ll))throw new TypeError("Destinations must be of type 'Output'.")}),void 0!==n.types&&n.types.forEach(r=>{if(!A.MIDI_SYSTEM_MESSAGES.hasOwnProperty(r)&&!A.MIDI_CHANNEL_MESSAGES.hasOwnProperty(r))throw new TypeError("Type must be a valid message type.")}),void 0!==n.channels&&n.channels.forEach(r=>{if(!A.MIDI_CHANNEL_NUMBERS.includes(r))throw new TypeError("MIDI channel must be between 1 and 16.")})),this.destinations=e,n.types&&(this.types=n.types),n.channels&&(this.channels=n.channels)}forward(e){this.suspended||this.types.includes(e.type)&&(e.channel&&!this.channels.includes(e.channel)||this.destinations.forEach(n=>{(!O.validation||n instanceof Ll)&&n.send(e)}))}}class _T extends zt{constructor(e,n){super(),this._input=e,this._number=n,this._octaveOffset=0,this._nrpnBuffer=[],this._rpnBuffer=[],this.parameterNumberEventsEnabled=!0,this.notesState=new Array(128).fill(!1)}destroy(){this._input=null,this._number=null,this._octaveOffset=0,this._nrpnBuffer=[],this.notesState=new Array(128).fill(!1),this.parameterNumberEventsEnabled=!1,this.removeListener()}_processMidiMessageEvent(e){const n=Object.assign({},e);n.port=this.input,n.target=this,n.type="midimessage",this.emit(n.type,n),this._parseEventForStandardMessages(n)}_parseEventForStandardMessages(e){const n=Object.assign({},e);n.type=n.message.type||"unknownmessage";const r=e.message.dataBytes[0],o=e.message.dataBytes[1];if("noteoff"===n.type||"noteon"===n.type&&0===o)this.notesState[r]=!1,n.type="noteoff",n.note=new zr(F.offsetNumber(r,this.octaveOffset+this.input.octaveOffset+O.octaveOffset),{rawAttack:0,rawRelease:o}),n.value=F.from7bitToFloat(o),n.rawValue=o,n.velocity=n.note.release,n.rawVelocity=n.note.rawRelease;else if("noteon"===n.type)this.notesState[r]=!0,n.note=new zr(F.offsetNumber(r,this.octaveOffset+this.input.octaveOffset+O.octaveOffset),{rawAttack:o}),n.value=F.from7bitToFloat(o),n.rawValue=o,n.velocity=n.note.attack,n.rawVelocity=n.note.rawAttack;else if("keyaftertouch"===n.type)n.note=new zr(F.offsetNumber(r,this.octaveOffset+this.input.octaveOffset+O.octaveOffset)),n.value=F.from7bitToFloat(o),n.rawValue=o,n.identifier=n.note.identifier,n.key=n.note.number,n.rawKey=r;else if("controlchange"===n.type){n.controller={number:r,name:F.getCcNameByNumber(r)},n.subtype=n.controller.name||"controller"+r,n.value=F.from7bitToFloat(o),n.rawValue=o;const i=Object.assign({},n);i.type=`${n.type}-controller${r}`,delete i.subtype,this.emit(i.type,i),n.message.dataBytes[0]>=120&&this._parseChannelModeMessage(n),this.parameterNumberEventsEnabled&&this._isRpnOrNrpnController(n.message.dataBytes[0])&&this._parseEventForParameterNumber(n)}else"programchange"===n.type?(n.value=r,n.rawValue=n.value):"channelaftertouch"===n.type?(n.value=F.from7bitToFloat(r),n.rawValue=r):"pitchbend"===n.type?(n.value=((o<<7)+r-8192)/8192,n.rawValue=(o<<7)+r):n.type="unknownmessage";this.emit(n.type,n)}_parseChannelModeMessage(e){const n=Object.assign({},e);n.type=n.controller.name,"localcontrol"===n.type&&(n.value=127===n.message.data[2],n.rawValue=n.message.data[2]),"omnimodeon"===n.type?(n.type="omnimode",n.value=!0,n.rawValue=n.message.data[2]):"omnimodeoff"===n.type&&(n.type="omnimode",n.value=!1,n.rawValue=n.message.data[2]),"monomodeon"===n.type?(n.type="monomode",n.value=!0,n.rawValue=n.message.data[2]):"polymodeon"===n.type&&(n.type="monomode",n.value=!1,n.rawValue=n.message.data[2]),this.emit(n.type,n)}_parseEventForParameterNumber(e){const n=e.message.dataBytes[0],r=e.message.dataBytes[1],o=A.MIDI_CONTROL_CHANGE_MESSAGES;n===o.nonregisteredparameterfine||n===o.registeredparameterfine?(this._nrpnBuffer=[],this._rpnBuffer=[],n===o.nonregisteredparameterfine?this._nrpnBuffer=[e.message]:127!==r&&(this._rpnBuffer=[e.message])):n===o.nonregisteredparametercoarse||n===o.registeredparametercoarse?n===o.nonregisteredparametercoarse?(this._rpnBuffer=[],1===this._nrpnBuffer.length?this._nrpnBuffer.push(e.message):this._nrpnBuffer=[]):(this._nrpnBuffer=[],1===this._rpnBuffer.length&&127!==r?this._rpnBuffer.push(e.message):this._rpnBuffer=[]):n!==o.dataentrycoarse&&n!==o.dataentryfine&&n!==o.databuttonincrement&&n!==o.databuttondecrement||(2===this._rpnBuffer.length?this._dispatchParameterNumberEvent("rpn",this._rpnBuffer[0].dataBytes[1],this._rpnBuffer[1].dataBytes[1],e):2===this._nrpnBuffer.length?this._dispatchParameterNumberEvent("nrpn",this._nrpnBuffer[0].dataBytes[1],this._nrpnBuffer[1].dataBytes[1],e):(this._nrpnBuffer=[],this._rpnBuffer=[]))}_isRpnOrNrpnController(e){return e===A.MIDI_CONTROL_CHANGE_MESSAGES.dataentrycoarse||e===A.MIDI_CONTROL_CHANGE_MESSAGES.dataentryfine||e===A.MIDI_CONTROL_CHANGE_MESSAGES.databuttonincrement||e===A.MIDI_CONTROL_CHANGE_MESSAGES.databuttondecrement||e===A.MIDI_CONTROL_CHANGE_MESSAGES.nonregisteredparametercoarse||e===A.MIDI_CONTROL_CHANGE_MESSAGES.nonregisteredparameterfine||e===A.MIDI_CONTROL_CHANGE_MESSAGES.registeredparametercoarse||e===A.MIDI_CONTROL_CHANGE_MESSAGES.registeredparameterfine}_dispatchParameterNumberEvent(e,n,r,o){e="nrpn"===e?"nrpn":"rpn";const i={target:o.target,timestamp:o.timestamp,message:o.message,parameterMsb:n,parameterLsb:r,value:F.from7bitToFloat(o.message.dataBytes[1]),rawValue:o.message.dataBytes[1]};i.parameter="rpn"===e?Object.keys(A.MIDI_REGISTERED_PARAMETERS).find(a=>A.MIDI_REGISTERED_PARAMETERS[a][0]===n&&A.MIDI_REGISTERED_PARAMETERS[a][1]===r):(n<<7)+r;const s=F.getPropertyByValue(A.MIDI_CONTROL_CHANGE_MESSAGES,o.message.dataBytes[0]);i.type=`${e}-${s}`,this.emit(i.type,i),i.type=e,i.subtype=s,this.emit(i.type,i)}getChannelModeByNumber(e){return O.validation&&(console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class."),e=Math.floor(e)),F.getChannelModeByNumber(e)}getCcNameByNumber(e){if(O.validation&&(console.warn("The 'getCcNameByNumber()' method has been moved to the 'Utilities' class."),!((e=parseInt(e))>=0&&e<=127)))throw new RangeError("Invalid control change number.");return F.getCcNameByNumber(e)}getNoteState(e){e instanceof zr&&(e=e.identifier);const n=F.guessNoteNumber(e,O.octaveOffset+this.input.octaveOffset+this.octaveOffset);return this.notesState[n]}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get input(){return this._input}get number(){return this._number}get nrpnEventsEnabled(){return this.parameterNumberEventsEnabled}set nrpnEventsEnabled(e){this.validation&&(e=!!e),this.parameterNumberEventsEnabled=e}}class Ym{constructor(e){this.rawData=e,this.data=Array.from(this.rawData),this.statusByte=this.rawData[0],this.rawDataBytes=this.rawData.slice(1),this.dataBytes=this.data.slice(1),this.isChannelMessage=!1,this.isSystemMessage=!1,this.command=void 0,this.channel=void 0,this.manufacturerId=void 0,this.type=void 0,this.statusByte<240?(this.isChannelMessage=!0,this.command=this.statusByte>>4,this.channel=1+(15&this.statusByte)):(this.isSystemMessage=!0,this.command=this.statusByte),this.isChannelMessage?this.type=F.getPropertyByValue(A.MIDI_CHANNEL_MESSAGES,this.command):this.isSystemMessage&&(this.type=F.getPropertyByValue(A.MIDI_SYSTEM_MESSAGES,this.command)),this.statusByte===A.MIDI_SYSTEM_MESSAGES.sysex&&(0===this.dataBytes[0]?(this.manufacturerId=this.dataBytes.slice(0,3),this.dataBytes=this.dataBytes.slice(3,this.rawDataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(3,this.rawDataBytes.length-1)):(this.manufacturerId=[this.dataBytes[0]],this.dataBytes=this.dataBytes.slice(1,this.dataBytes.length-1),this.rawDataBytes=this.rawDataBytes.slice(1,this.rawDataBytes.length-1)))}}class yT extends zt{constructor(e){super(),this._midiInput=e,this._octaveOffset=0,this.channels=[];for(let n=1;n<=16;n++)this.channels[n]=new _T(this,n);this._forwarders=[],this._midiInput.onstatechange=this._onStateChange.bind(this),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}destroy(){var e=this;return at(function*(){e.removeListener(),e.channels.forEach(n=>n.destroy()),e.channels=[],e._forwarders=[],e._midiInput&&(e._midiInput.onstatechange=null,e._midiInput.onmidimessage=null),yield e.close(),e._midiInput=null})()}_onStateChange(e){let n={timestamp:O.time,target:this,port:this};"open"===e.port.connection?(n.type="opened",this.emit("opened",n)):"closed"===e.port.connection&&"connected"===e.port.state?(n.type="closed",this.emit("closed",n)):"closed"===e.port.connection&&"disconnected"===e.port.state?(n.type="disconnected",n.port={connection:e.port.connection,id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this.emit("disconnected",n)):"pending"===e.port.connection&&"disconnected"===e.port.state||console.warn("This statechange event was not caught: ",e.port.connection,e.port.state)}_onMidiMessage(e){const n=new Ym(e.data),r={port:this,target:this,message:n,timestamp:e.timeStamp,type:"midimessage",data:n.data,rawData:n.data,statusByte:n.data[0],dataBytes:n.dataBytes};this.emit("midimessage",r),n.isSystemMessage?this._parseEvent(r):n.isChannelMessage&&this.channels[n.channel]._processMidiMessageEvent(r),this._forwarders.forEach(o=>o.forward(n))}_parseEvent(e){const n=Object.assign({},e);n.type=n.message.type||"unknownmidimessage","songselect"===n.type&&(n.song=e.data[1]+1,n.value=e.data[1],n.rawValue=n.value),this.emit(n.type,n)}open(){var e=this;return at(function*(){try{yield e._midiInput.open()}catch(n){return Promise.reject(n)}return Promise.resolve(e)})()}close(){var e=this;return at(function*(){if(!e._midiInput)return Promise.resolve(e);try{yield e._midiInput.close()}catch(n){return Promise.reject(n)}return Promise.resolve(e)})()}getChannelModeByNumber(){O.validation&&console.warn("The 'getChannelModeByNumber()' method has been moved to the 'Utilities' class.")}addListener(e,n,r={}){if(O.validation&&"function"==typeof r){let o=null!=n?[].concat(n):void 0;n=r,r={channels:o}}if(A.CHANNEL_EVENTS.includes(e)){void 0===r.channels&&(r.channels=A.MIDI_CHANNEL_NUMBERS);let o=[];return F.sanitizeChannels(r.channels).forEach(i=>{o.push(this.channels[i].addListener(e,n,r))}),o}return super.addListener(e,n,r)}addOneTimeListener(e,n,r={}){return r.remaining=1,this.addListener(e,n,r)}on(e,n,r,o){return this.addListener(e,n,r,o)}hasListener(e,n,r={}){if(O.validation&&"function"==typeof r){let o=[].concat(n);n=r,r={channels:o}}return A.CHANNEL_EVENTS.includes(e)?(void 0===r.channels&&(r.channels=A.MIDI_CHANNEL_NUMBERS),F.sanitizeChannels(r.channels).every(o=>this.channels[o].hasListener(e,n))):super.hasListener(e,n)}removeListener(e,n,r={}){if(O.validation&&"function"==typeof r){let o=[].concat(n);n=r,r={channels:o}}if(void 0===r.channels&&(r.channels=A.MIDI_CHANNEL_NUMBERS),null==e)return F.sanitizeChannels(r.channels).forEach(o=>{this.channels[o]&&this.channels[o].removeListener()}),super.removeListener();A.CHANNEL_EVENTS.includes(e)?F.sanitizeChannels(r.channels).forEach(o=>{this.channels[o].removeListener(e,n,r)}):super.removeListener(e,n,r)}addForwarder(e,n={}){let r;return r=e instanceof Qm?e:new Qm(e,n),this._forwarders.push(r),r}removeForwarder(e){this._forwarders=this._forwarders.filter(n=>n!==e)}hasForwarder(e){return this._forwarders.includes(e)}get name(){return this._midiInput.name}get id(){return this._midiInput.id}get connection(){return this._midiInput.connection}get manufacturer(){return this._midiInput.manufacturer}get octaveOffset(){return this._octaveOffset}set octaveOffset(e){if(this.validation&&(e=parseInt(e),isNaN(e)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=e}get state(){return this._midiInput.state}get type(){return this._midiInput.type}get nrpnEventsEnabled(){return O.validation&&console.warn("The 'nrpnEventsEnabled' property has been moved to the 'InputChannel' class."),!1}}const O=new class extends zt{constructor(){super(),this.defaults={note:{attack:F.from7bitToFloat(64),release:F.from7bitToFloat(64),duration:1/0}},this.interface=null,this.validation=!0,this._inputs=[],this._disconnectedInputs=[],this._outputs=[],this._disconnectedOutputs=[],this._stateChangeQueue=[],this._octaveOffset=0}enable(t={},e=!1){var n=this;return at(function*(){if(F.isNode)try{window}catch{global.navigator=yield Object.getPrototypeOf(at(function*(){})).constructor('\n        let jzz = await import("jzz");\n        return jzz.default;\n        ')()}if(n.validation=!1!==t.validation,n.validation&&("function"==typeof t&&(t={callback:t,sysex:e}),e&&(t.sysex=!0)),n.enabled)return"function"==typeof t.callback&&t.callback(),Promise.resolve();const r={timestamp:n.time,target:n,type:"error",error:void 0},o={timestamp:n.time,target:n,type:"midiaccessgranted"},i={timestamp:n.time,target:n,type:"enabled"};try{n.interface="function"==typeof t.requestMIDIAccessFunction?yield t.requestMIDIAccessFunction({sysex:t.sysex,software:t.software}):yield navigator.requestMIDIAccess({sysex:t.sysex,software:t.software})}catch(s){return r.error=s,n.emit("error",r),"function"==typeof t.callback&&t.callback(s),Promise.reject(s)}n.emit("midiaccessgranted",o),n.interface.onstatechange=n._onInterfaceStateChange.bind(n);try{yield n._updateInputsAndOutputs()}catch(s){return r.error=s,n.emit("error",r),"function"==typeof t.callback&&t.callback(s),Promise.reject(s)}return n.emit("enabled",i),"function"==typeof t.callback&&t.callback(),Promise.resolve(n)})()}disable(){var t=this;return at(function*(){return t._destroyInputsAndOutputs().then(()=>{navigator&&"function"==typeof navigator.close&&navigator.close(),t.interface&&(t.interface.onstatechange=void 0),t.interface=null,t.emit("disabled",{timestamp:t.time,target:t,type:"disabled"}),t.removeListener()})})()}getInputById(t,e={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return}if(e.disconnected){for(let n=0;n<this._disconnectedInputs.length;n++)if(this._disconnectedInputs[n].id===t.toString())return this._disconnectedInputs[n]}else for(let n=0;n<this.inputs.length;n++)if(this.inputs[n].id===t.toString())return this.inputs[n]}getInputByName(t,e={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return;t=t.toString()}if(e.disconnected){for(let n=0;n<this._disconnectedInputs.length;n++)if(~this._disconnectedInputs[n].name.indexOf(t))return this._disconnectedInputs[n]}else for(let n=0;n<this.inputs.length;n++)if(~this.inputs[n].name.indexOf(t))return this.inputs[n]}getOutputByName(t,e={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return;t=t.toString()}if(e.disconnected){for(let n=0;n<this._disconnectedOutputs.length;n++)if(~this._disconnectedOutputs[n].name.indexOf(t))return this._disconnectedOutputs[n]}else for(let n=0;n<this.outputs.length;n++)if(~this.outputs[n].name.indexOf(t))return this.outputs[n]}getOutputById(t,e={disconnected:!1}){if(this.validation){if(!this.enabled)throw new Error("WebMidi is not enabled.");if(!t)return}if(e.disconnected){for(let n=0;n<this._disconnectedOutputs.length;n++)if(this._disconnectedOutputs[n].id===t.toString())return this._disconnectedOutputs[n]}else for(let n=0;n<this.outputs.length;n++)if(this.outputs[n].id===t.toString())return this.outputs[n]}noteNameToNumber(t){return this.validation&&console.warn("The noteNameToNumber() method is deprecated. Use Utilities.toNoteNumber() instead."),F.toNoteNumber(t,this.octaveOffset)}getOctave(t){return this.validation&&(console.warn("The getOctave()is deprecated. Use Utilities.getNoteDetails() instead"),t=parseInt(t)),!isNaN(t)&&t>=0&&t<=127&&F.getNoteDetails(F.offsetNumber(t,this.octaveOffset)).octave}sanitizeChannels(t){return this.validation&&console.warn("The sanitizeChannels() method has been moved to the utilities class."),F.sanitizeChannels(t)}toMIDIChannels(t){return this.validation&&console.warn("The toMIDIChannels() method has been deprecated. Use Utilities.sanitizeChannels() instead."),F.sanitizeChannels(t)}guessNoteNumber(t){return this.validation&&console.warn("The guessNoteNumber() method has been deprecated. Use Utilities.guessNoteNumber() instead."),F.guessNoteNumber(t,this.octaveOffset)}getValidNoteArray(t,e={}){return this.validation&&console.warn("The getValidNoteArray() method has been moved to the Utilities.buildNoteArray()"),F.buildNoteArray(t,e)}convertToTimestamp(t){return this.validation&&console.warn("The convertToTimestamp() method has been moved to Utilities.toTimestamp()."),F.toTimestamp(t)}_destroyInputsAndOutputs(){var t=this;return at(function*(){let e=[];return t.inputs.forEach(n=>e.push(n.destroy())),t.outputs.forEach(n=>e.push(n.destroy())),Promise.all(e).then(()=>{t._inputs=[],t._outputs=[]})})()}_onInterfaceStateChange(t){this._updateInputsAndOutputs();let e={timestamp:t.timeStamp,type:t.port.state,target:this};if("connected"===t.port.state&&"open"===t.port.connection){"output"===t.port.type?e.port=this.getOutputById(t.port.id):"input"===t.port.type&&(e.port=this.getInputById(t.port.id)),this.emit(t.port.state,e);const n=Object.assign({},e);n.type="portschanged",this.emit(n.type,n)}else if("disconnected"===t.port.state&&"pending"===t.port.connection){"input"===t.port.type?e.port=this.getInputById(t.port.id,{disconnected:!0}):"output"===t.port.type&&(e.port=this.getOutputById(t.port.id,{disconnected:!0})),this.emit(t.port.state,e);const n=Object.assign({},e);n.type="portschanged",this.emit(n.type,n)}}_updateInputsAndOutputs(){var t=this;return at(function*(){return Promise.all([t._updateInputs(),t._updateOutputs()])})()}_updateInputs(){var t=this;return at(function*(){if(!t.interface)return;for(let n=t._inputs.length-1;n>=0;n--){const r=t._inputs[n];Array.from(t.interface.inputs.values()).find(o=>o===r._midiInput)||(t._disconnectedInputs.push(r),t._inputs.splice(n,1))}let e=[];return t.interface.inputs.forEach(n=>{if(!t._inputs.find(r=>r._midiInput===n)){let r=t._disconnectedInputs.find(o=>o._midiInput===n);r||(r=new yT(n)),t._inputs.push(r),e.push(r.open())}}),Promise.all(e)})()}_updateOutputs(){var t=this;return at(function*(){if(!t.interface)return;for(let n=t._outputs.length-1;n>=0;n--){const r=t._outputs[n];Array.from(t.interface.outputs.values()).find(o=>o===r._midiOutput)||(t._disconnectedOutputs.push(r),t._outputs.splice(n,1))}let e=[];return t.interface.outputs.forEach(n=>{if(!t._outputs.find(r=>r._midiOutput===n)){let r=t._disconnectedOutputs.find(o=>o._midiOutput===n);r||(r=new Ll(n)),t._outputs.push(r),e.push(r.open())}}),Promise.all(e)})()}get enabled(){return null!==this.interface}get inputs(){return this._inputs}get isNode(){return this.validation&&console.warn("WebMidi.isNode has been deprecated. Use Utilities.isNode instead."),F.isNode}get isBrowser(){return this.validation&&console.warn("WebMidi.isBrowser has been deprecated. Use Utilities.isBrowser instead."),F.isBrowser}get octaveOffset(){return this._octaveOffset}set octaveOffset(t){if(this.validation&&(t=parseInt(t),isNaN(t)))throw new TypeError("The 'octaveOffset' property must be an integer.");this._octaveOffset=t}get outputs(){return this._outputs}get supported(){return typeof navigator<"u"&&navigator.requestMIDIAccess}get sysexEnabled(){return!(!this.interface||!this.interface.sysexEnabled)}get time(){return performance.now()}get version(){return"3.0.20"}get CHANNEL_EVENTS(){return this.validation&&console.warn("The CHANNEL_EVENTS enum has been moved to Enumerations.CHANNEL_EVENTS."),A.CHANNEL_EVENTS}get MIDI_SYSTEM_MESSAGES(){return this.validation&&console.warn("The MIDI_SYSTEM_MESSAGES enum has been moved to Enumerations.MIDI_SYSTEM_MESSAGES."),A.MIDI_SYSTEM_MESSAGES}get MIDI_CHANNEL_MODE_MESSAGES(){return this.validation&&console.warn("The MIDI_CHANNEL_MODE_MESSAGES enum has been moved to Enumerations.MIDI_CHANNEL_MODE_MESSAGES."),A.MIDI_CHANNEL_MODE_MESSAGES}get MIDI_CONTROL_CHANGE_MESSAGES(){return this.validation&&console.warn("The MIDI_CONTROL_CHANGE_MESSAGES enum has been moved to Enumerations.MIDI_CONTROL_CHANGE_MESSAGES."),A.MIDI_CONTROL_CHANGE_MESSAGES}get MIDI_REGISTERED_PARAMETER(){return this.validation&&console.warn("The MIDI_REGISTERED_PARAMETER enum has been moved to Enumerations.MIDI_REGISTERED_PARAMETERS."),this.MIDI_REGISTERED_PARAMETERS}get NOTES(){return this.validation&&console.warn("The NOTES enum has been deprecated."),["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"]}};O.constructor=null;class Bl extends Wr{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Vn=Z(461),vT=(Z(630),Z(952)),DT=Z.n(vT);class Vl{constructor(e,n){this.name="",this.sounds={},this.name=e,this.sounds=n}}const Zm=new Vl("Pack One",{C4:Ae("assets/sounds/1/kick.wav"),"C#4":Ae("assets/sounds/1/lev.wav"),D4:Ae("assets/sounds/1/tom.wav"),"D#4":Ae("assets/sounds/1/hat.wav"),E4:Ae("assets/sounds/1/mp_abstract_decay.wav"),F4:Ae("assets/sounds/1/mp_abstract_fader.wav"),"F#4":Ae("assets/sounds/1/mp_abstract_finger.wav"),G4:Ae("assets/sounds/1/mp_abstract_howl.wav"),"G#4":Ae("assets/sounds/1/mp_abstract_odd.wav"),A4:Ae("assets/sounds/1/mp_layer_crumble.wav"),"A#4":Ae("assets/sounds/1/mp_layer_krush.wav"),B4:Ae("assets/sounds/1/shot_mud.wav")}),wT=new Vl("Pack Two",{C4:Ae("assets/sounds/2/kick.wav"),"C#4":Ae("assets/sounds/2/snare.wav"),D4:Ae("assets/sounds/2/rain.wav"),"D#4":Ae("assets/sounds/2/clap.wav"),E4:Ae("assets/sounds/2/guiro.wav"),F4:Ae("assets/sounds/2/hat-closed.wav"),"F#4":Ae("assets/sounds/2/hat-closed-b.wav"),G4:Ae("assets/sounds/2/hat-open.wav"),"G#4":Ae("assets/sounds/2/hat-reverse.wav"),A4:Ae("assets/sounds/2/c-black.wav"),"A#4":Ae("assets/sounds/2/c-sharp.wav"),B4:Ae("assets/sounds/2/e.wav")});function Ae(t){return new Vn.Howl({src:[t],volume:.5})}class bT{constructor(){this.packs=[Zm,wT],this.customPack=new Vl("custom pack",{}),this.selectedPack=Zm,this.tuna=new(DT())(Vn.Howler.ctx),this.effects={}}play(e){this.selectedPack?.sounds[e]&&(this.selectedPack.sounds[e].stop(),this.selectedPack.sounds[e].volume(.5),this.selectedPack.sounds[e].play())}stop(e){this.selectedPack?.sounds[e]&&this.selectedPack.sounds[e].fade(.5,0,40)}updateEffect(e){this.effects.delay&&(this.effects.delay.delayTime=10*e),this.effects.overdrive&&(this.effects.overdrive.drive=e/100),this.effects["low-pass"]&&(this.effects["low-pass"].frequency=10*e),this.effects.reverb&&(this.effects.reverb.wetLevel=e/100)}toggleEffect(e){return this.effects[e]?this.removeEffect(e):this.addEffect(e),Object.keys(this.effects)}selectPack(e){this.selectedPack=e>this.packs.length?this.customPack:this.packs[e]}updateCustomPackNote(e,n,r){const o=new Vn.Howl({src:n,format:r,volume:.5});this.customPack.sounds[e]=o}removeEffect(e){const n=this.effects[e];n&&(Vn.Howler.removeEffect(n),delete this.effects[e])}addEffect(e){let n;switch(e){case"low-pass":n=new this.tuna.Filter({frequency:800,Q:1,gain:0,filterType:"lowpass",bypass:0}),this.effects["low-pass"]=n;break;case"delay":n=new this.tuna.Delay({feedback:.45,delayTime:100,wetLevel:.5,dryLevel:1,cutoff:2e4,bypass:0}),this.effects.delay=n;break;case"overdrive":n=new this.tuna.Overdrive({outputGain:-9.154,drive:.197,curveAmount:.979,algorithmIndex:0,bypass:0}),this.effects.overdrive=n;break;case"reverb":n=new this.tuna.Convolver({highCut:22050,lowCut:20,dryLevel:1,wetLevel:1,level:1,impulse:"assets/impulses/impulse_rev.wav",bypass:0}),this.effects.reverb=n}n&&Vn.Howler.addEffect(n)}}let qo=(()=>{class t{constructor(){this.data=Cs,this.notes$=new Bl(this.data.notes),this.knob$=new Bl(this.data.knob),this.effects$=new Wr,this.hold$=new Bl(this.data.hold)}enable(){this.player=new bT,O.enable().then(()=>this.onMidiEnabled()).catch(n=>alert(n))}onMidiEnabled(){this.listenForDevice()}listenForDevice(){if(O.inputs.length<1)this.data.name="No device detected.";else{let n=[];O.inputs.forEach((r,o)=>{n.push(`${o}: ${r.name}`)}),this.data.name=n.join(","),this.data.connected=!0,this.listenForNotes(),this.listenForKnob()}}listenForNotes(){O.inputs[0].addListener("noteon",n=>{this.data.notes.push(n.note.identifier),this.notes$.next(this.data.notes),this.player&&this.player.play(n.note.identifier)},{channels:[1,2,3]}),O.inputs[0].addListener("noteoff",n=>{this.data.notes=this.data.notes.filter(r=>r!=n.note.identifier),this.notes$.next(this.data.notes),this.data.hold||this.player?.stop(n.note.identifier)},{channels:[1,2,3]})}listenForKnob(){O.inputs[0].addListener("controlchange",n=>{const r=Math.round(100*n.value);this.data.knob=r,this.player&&this.player.updateEffect(r),this.knob$.next(this.data.knob)},{channels:[1,2,3]})}toggleEffect(n){if(this.player){const r=this.player.toggleEffect(n);this.effects$.next(r)}}getPackNames(){return this.player?this.player?.packs.map(n=>n.name):[]}selectPack(n){this.player&&this.player.selectPack(n)}updateCustomPackNote(n,r,o){this.player&&this.player.updateCustomPackNote(n,r,o)}updateSetting(n){"hold"===n&&(this.data.hold=!this.data.hold,this.hold$.next(this.data.hold))}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=Me({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function ET(t,e){if(1&t&&(we(0,"div"),At(1),Ee()),2&t){const n=e.$implicit;ke(1),To(n)}}let CT=(()=>{class t{constructor(){this.data=Cs}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=cn({type:t,selectors:[["app-debugger"]],inputs:{data:"data"},decls:14,vars:3,consts:[[1,"bold"],[1,"notes"],[4,"ngFor","ngForOf"]],template:function(n,r){1&n&&(we(0,"div",0),At(1,"Debugger"),Ee(),we(2,"div"),At(3,"Devices:"),Ee(),we(4,"div"),At(5),Ee(),we(6,"div"),At(7,"Notes:"),Ee(),we(8,"section",1),_n(9,ET,2,1,"div",2),Ee(),we(10,"div"),At(11,"Knob:"),Ee(),we(12,"div"),At(13),Ee()),2&n&&(ke(5),To(r.data.name),ke(4),Re("ngForOf",r.data.notes),ke(4),To(r.data.knob))},dependencies:[Go],styles:["[_nghost-%COMP%]{display:block;padding:0 10px;margin:20px;border:1px solid gray;position:absolute;right:0;font-family:monospace;z-index:100;background-color:#fffc;top:0;font-size:14px}.notes[_ngcontent-%COMP%]{display:flex;gap:8px;min-height:20px}.bold[_ngcontent-%COMP%]{font-weight:700}"]}),t})();function Km(...t){return function MT(){return fc(1)}()(Ns(t,Ss(t)))}const AT=function(t){return{active:t}};function ST(t,e){if(1&t&&Fn(0,"div",4),2&t){const n=e.$implicit;qi("background-image","url(assets/emojis/"+n.icon+")"),Re("ngClass",yn(3,AT,n.active))}}let NT=(()=>{class t{constructor(n,r){this.holomate=n,this.changeDetection=r,this.notes=[{note:"A4",active:!1,icon:"emoji-04.png"},{note:"A#4",active:!1,icon:"emoji-05.png"},{note:"B4",active:!1,icon:"emoji-06.png"},{note:"F#4",active:!1,icon:"emoji-07.png"},{note:"G4",active:!1,icon:"emoji-08.png"},{note:"G#4",active:!1,icon:"emoji-09.png"},{note:"D#4",active:!1,icon:"emoji-10.png"},{note:"E4",active:!1,icon:"emoji-11.png"},{note:"F4",active:!1,icon:"emoji-12.png"},{note:"C4",active:!1,icon:"emoji-13.png"},{note:"C#4",active:!1,icon:"emoji-14.png"},{note:"D4",active:!1,icon:"emoji-15.png"}],this.activeNotes=[],this.rotation$=this.holomate.knob$.pipe(Mn(o=>`transform: rotate(${15+330*o/100}deg)`)),this.color$=this.holomate.effects$.pipe(function IT(...t){const e=Ss(t);return Cn((n,r)=>{(e?Km(t,n,e):Km(t,n)).subscribe(r)})}([]),Mn(o=>o[o.length-1]))}ngOnInit(){this.holomate.notes$.pipe(Mn(n=>{this.notes.forEach(r=>{r.active=n.some(o=>o===r.note)})}),function TT(t,e,n){const r=z(t)||e||n?{next:t,error:e,complete:n}:t;return r?Cn((o,i)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;o.subscribe(tr(i,u=>{var c;null===(c=r.next)||void 0===c||c.call(r,u),i.next(u)},()=>{var u;a=!1,null===(u=r.complete)||void 0===u||u.call(r),i.complete()},u=>{var c;a=!1,null===(c=r.error)||void 0===c||c.call(r,u),i.error(u)},()=>{var u,c;a&&(null===(u=r.unsubscribe)||void 0===u||u.call(r)),null===(c=r.finalize)||void 0===c||c.call(r)}))}):an}(n=>this.changeDetection.detectChanges())).subscribe()}}return t.\u0275fac=function(n){return new(n||t)(X(qo),X(rm))},t.\u0275cmp=cn({type:t,selectors:[["app-holomate"]],decls:6,vars:9,consts:[[1,"knob-space"],[1,"control","control__knob"],[1,"grid"],["class","control",3,"ngClass","background-image",4,"ngFor","ngForOf"],[1,"control",3,"ngClass"]],template:function(n,r){1&n&&(we(0,"div",0)(1,"div",1),On(2,"async"),On(3,"async"),Ee()(),we(4,"section",2),_n(5,ST,1,5,"div",3),Ee()),2&n&&(ke(1),function Ht(t){Gt(rp,k0,t,!1)}(kn(2,5,r.rotation$)),function ep(t){Gt(vt,nn,t,!0)}(kn(3,7,r.color$)),ke(4),Re("ngForOf",r.notes))},dependencies:[vs,Go,Tl],styles:['[_nghost-%COMP%]{display:flex;border:1px solid var(--border-color);background-color:var(--holomate-bg-color);border-radius:var(--border-radius);justify-content:space-between;align-items:center;position:relative;flex-direction:column}.grid[_ngcontent-%COMP%]{padding:var(--padding);display:grid;grid-template-columns:1fr 1fr 1fr;gap:12px 21px;align-items:center;justify-content:center}.control[_ngcontent-%COMP%]{border-radius:50%;width:var(--btn-size);height:var(--btn-size);background-color:var(--btn-bg-color);border:1px solid var(--border-color);position:relative;z-index:10;background-size:contain;transition-duration:40ms}.control.active[_ngcontent-%COMP%]{background-color:var(--btn-bg-color--active)}.knob-space[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:var(--padding);padding-bottom:0;align-self:flex-end;padding-right:55px}.control__knob[_ngcontent-%COMP%]{--btn-size: 90px;transition-duration:.15s;transition-property:background-color,color}.control__knob[_ngcontent-%COMP%]:after{content:"";display:block;width:2px;height:40%;background-color:var(--border-knob-color);position:absolute;left:50%;bottom:-1px;transition-property:background-color,color;transition-duration:.3s;transition-timing-function:ease-in-out}.control__knob.hold[_ngcontent-%COMP%]{background-color:var(--color-green)}.control__knob.delay[_ngcontent-%COMP%]{background-color:var(--color-purple)}.control__knob.low-pass[_ngcontent-%COMP%]{background-color:var(--color-blue)}.control__knob.overdrive[_ngcontent-%COMP%]{background-color:var(--color-orange)}.control__knob.reverb[_ngcontent-%COMP%]{background-color:var(--color-red)}']}),t})();const zo=function(t){return{active:t}};let xT=(()=>{class t{constructor(n){this.holomate=n,this.holdOn$=this.holomate.hold$,this.delayOn$=this.holomate.effects$.pipe(Mn(r=>r.some(o=>"delay"===o))),this.filterOn$=this.holomate.effects$.pipe(Mn(r=>r.some(o=>"low-pass"===o))),this.overdriveOn$=this.holomate.effects$.pipe(Mn(r=>r.some(o=>"overdrive"===o))),this.reverbOn$=this.holomate.effects$.pipe(Mn(r=>r.some(o=>"reverb"===o)))}ngOnInit(){}effect(n){this.holomate.toggleEffect(n)}toggle(n){this.holomate.updateSetting(n)}}return t.\u0275fac=function(n){return new(n||t)(X(qo))},t.\u0275cmp=cn({type:t,selectors:[["app-settings"]],decls:10,vars:25,consts:[[1,"hold","green",3,"ngClass","click"],[1,"purple","delay",3,"ngClass","click"],[1,"blue","filter",3,"ngClass","click"],[1,"orange","overdrive",3,"ngClass","click"],[1,"red","reverb",3,"ngClass","click"]],template:function(n,r){1&n&&(we(0,"button",0),bt("click",function(){return r.toggle("hold")}),On(1,"async"),Ee(),we(2,"button",1),bt("click",function(){return r.effect("delay")}),On(3,"async"),Ee(),we(4,"button",2),bt("click",function(){return r.effect("low-pass")}),On(5,"async"),Ee(),we(6,"button",3),bt("click",function(){return r.effect("overdrive")}),On(7,"async"),Ee(),we(8,"button",4),bt("click",function(){return r.effect("reverb")}),On(9,"async"),Ee()),2&n&&(Re("ngClass",yn(15,zo,kn(1,5,r.holdOn$))),ke(2),Re("ngClass",yn(17,zo,kn(3,7,r.delayOn$))),ke(2),Re("ngClass",yn(19,zo,kn(5,9,r.filterOn$))),ke(2),Re("ngClass",yn(21,zo,kn(7,11,r.overdriveOn$))),ke(2),Re("ngClass",yn(23,zo,kn(9,13,r.reverbOn$))))},dependencies:[vs,Tl],styles:["[_nghost-%COMP%]{border:1px solid var(--border-color);background-color:var(--main-bg-color);border-radius:var(--border-radius);display:flex;align-items:stretch;gap:5px;height:35px}button[_ngcontent-%COMP%]{--button-color: var(--holomate-bg-color);flex:1;cursor:pointer;text-transform:uppercase;font-size:14px;border:2px solid var(--button-color);color:var(--button-color);border-radius:calc(var(--border-radius) / 2);transition-duration:.1s;background-color:transparent;background-size:contain;background-position:center center;background-repeat:no-repeat}button.active[_ngcontent-%COMP%]{background-color:var(--button-color);color:#f2f0f0}.label[_ngcontent-%COMP%]{background-color:var(--settings-bg-color);border-radius:calc(var(--border-radius) / 2);padding:1px 5px;display:flex;align-items:center}.red[_ngcontent-%COMP%]{--button-color: var(--color-red)}.blue[_ngcontent-%COMP%]{--button-color: var(--color-blue)}.orange[_ngcontent-%COMP%]{--button-color: var(--color-orange)}.purple[_ngcontent-%COMP%]{--button-color: var(--color-purple)}.green[_ngcontent-%COMP%]{--button-color: var(--color-green)}.hold[_ngcontent-%COMP%]{background-image:url(hold.0a2403238b6aa12e.png)}.hold.active[_ngcontent-%COMP%]{background-image:url(hold-w.8eff275cb6db4ed8.png)}.overdrive[_ngcontent-%COMP%]{background-image:url(overdrive.dcc3e1e61506e82c.png)}.overdrive.active[_ngcontent-%COMP%]{background-image:url(overdrive-w.d6330de0fc5f6a9f.png)}.delay[_ngcontent-%COMP%]{background-image:url(delay.54f6f0e05959b186.png)}.delay.active[_ngcontent-%COMP%]{background-image:url(delay-w.4a1426e3878b2dad.png)}.reverb[_ngcontent-%COMP%]{background-image:url(reverb.e9c95ca00ecb7f1c.png)}.reverb.active[_ngcontent-%COMP%]{background-image:url(reverb-w.c745560d7ffac795.png)}.filter[_ngcontent-%COMP%]{background-image:url(filter.4e41ba10deda9803.png)}.filter.active[_ngcontent-%COMP%]{background-image:url(filter-w.7b2d9f33fde3f60d.png)}"]}),t})();function PT(t,e){if(1&t&&(we(0,"option",3),At(1),Ee()),2&t){const n=e.$implicit,r=e.index;Re("value",r)("selected",0===r),ke(1),Wi(" ",n,"")}}let RT=(()=>{class t{constructor(n){this.holomate=n,this.packNames=this.holomate.getPackNames(),this.selectPack=new rn}select(n){this.selectPack.emit(n.target.value)}}return t.\u0275fac=function(n){return new(n||t)(X(qo))},t.\u0275cmp=cn({type:t,selectors:[["app-packs"]],outputs:{selectPack:"selectPack"},decls:4,vars:2,consts:[[3,"change"],[3,"value","selected",4,"ngFor","ngForOf"],[3,"value"],[3,"value","selected"]],template:function(n,r){1&n&&(we(0,"select",0),bt("change",function(i){return r.select(i)}),_n(1,PT,2,3,"option",1),we(2,"option",2),At(3,"Custom"),Ee()()),2&n&&(ke(1),Re("ngForOf",r.packNames),ke(1),Re("value",r.packNames.length+1))},dependencies:[Go],styles:["[_nghost-%COMP%]{display:block;width:100%}select[_ngcontent-%COMP%]{color:var(--font-color);background-color:var(--settings-bg-color);padding:5px;border-radius:calc(var(--border-radius) / 2);border-color:var(--border-color);text-transform:uppercase;font-size:var(--font-size);width:100%}"]}),t})(),FT=(()=>{class t{constructor(){this.data=Cs}ngOnInit(){const n=document.querySelector("canvas");n&&(this.ctx=n.getContext("2d"),n.width=500,n.height=500,this.getAudio())}getAudio(){this.analyzer=Vn.Howler.ctx.createAnalyser(),Vn.Howler.masterGain.connect(this.analyzer),this.analyzer.connect(Vn.Howler.ctx.destination),this.analyzer.fftSize=1024;const n=new Uint8Array(this.analyzer.frequencyBinCount);this.drawTimeData(n)}drawTimeData(n){let r=!1;this.analyzer&&this.analyzer.getByteTimeDomainData(n);const o=gT[this.data.notes[0]]||"#D0D0D0";if(this.ctx){this.ctx.lineWidth=2,this.ctx.strokeStyle=o,this.ctx.clearRect(0,0,500,500),this.ctx.beginPath();const s=500/this.analyzer.frequencyBinCount;let a=0;n.forEach((u,c)=>{128!==u&&(r=!0);const p=u/128*500/2;0===c?this.ctx.moveTo(a,p):this.ctx.lineTo(a,p),a+=s}),r&&this.ctx.stroke()}requestAnimationFrame(()=>this.drawTimeData(n))}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=cn({type:t,selectors:[["app-visualizer"]],inputs:{data:"data"},decls:1,vars:0,template:function(n,r){1&n&&Fn(0,"canvas")},styles:["[_nghost-%COMP%]{display:block;position:absolute;z-index:-1;height:100vh;width:100%}canvas[_ngcontent-%COMP%]{height:100%;width:100%}"]}),t})();function OT(t,e){if(1&t){const n=Ui();we(0,"div",2)(1,"input",3),bt("change",function(o){const s=Jr(n).$implicit;return eo(Zn().useFile(o,s.note))}),Ee()()}2&t&&qi("background-image","url(assets/emojis/"+e.$implicit.icon+")")}let kT=(()=>{class t{constructor(n){this.holomate=n,this.notes=[{note:"A4",icon:"emoji-04.png"},{note:"A#4",icon:"emoji-05.png"},{note:"B4",icon:"emoji-06.png"},{note:"F#4",icon:"emoji-07.png"},{note:"G4",icon:"emoji-08.png"},{note:"G#4",icon:"emoji-09.png"},{note:"D#4",icon:"emoji-10.png"},{note:"E4",icon:"emoji-11.png"},{note:"F4",icon:"emoji-12.png"},{note:"C4",icon:"emoji-13.png"},{note:"C#4",icon:"emoji-14.png"},{note:"D4",icon:"emoji-15.png"}]}ngOnInit(){}useFile(n,r){if(n.target.files.length>0){const o=n.target.files[0],i=new FileReader;i.addEventListener("load",()=>{let s=i.result;s&&this.holomate.updateCustomPackNote(r,s,o.name.split(".").pop().toLowerCase())}),i.readAsDataURL(o)}}}return t.\u0275fac=function(n){return new(n||t)(X(qo))},t.\u0275cmp=cn({type:t,selectors:[["app-custom-pack"]],decls:2,vars:1,consts:[[1,"grid"],["class","control",3,"background-image",4,"ngFor","ngForOf"],[1,"control"],["type","file",3,"change"]],template:function(n,r){1&n&&(we(0,"section",0),_n(1,OT,2,2,"div",1),Ee()),2&n&&(ke(1),Re("ngForOf",r.notes))},dependencies:[Go],styles:["[_nghost-%COMP%]{display:block;border:1px solid var(--border-color);background-color:var(--main-bg-color);border-radius:var(--border-radius);padding:10px}.control[_ngcontent-%COMP%]{padding:7px 7px 7px 48px;background-size:contain;background-repeat:no-repeat}input[_ngcontent-%COMP%]{color:#888;font-size:13px}[_ngcontent-%COMP%]::-webkit-file-upload-button{background-color:var(--holomate-bg-color);color:var(--btn-font-color);border:none;border-radius:var(--border-radius);padding:6px 9px;margin-right:10px}"]}),t})();function LT(t,e){1&t&&Fn(0,"app-debugger",4),2&t&&Re("data",Zn().data)}function BT(t,e){if(1&t){const n=Ui();we(0,"button",5),bt("click",function(){return Jr(n),eo(Zn().start())}),At(1,"PLAY"),Ee()}}function VT(t,e){1&t&&(we(0,"div"),At(1,"No device connected :("),Ee())}const HT=function(t){return{inverse:t}},jT=function(t){return{visible:t}};function GT(t,e){if(1&t){const n=Ui();Gi(0),we(1,"section",6)(2,"button",7),bt("click",function(){return Jr(n),eo(Zn().toggleTheme())}),Ee(),Fn(3,"app-holomate")(4,"app-settings"),we(5,"app-packs",8),bt("selectPack",function(o){return Jr(n),eo(Zn().selectPack(o))}),Ee()(),Fn(6,"app-custom-pack",9)(7,"app-visualizer",4),$i()}if(2&t){const n=Zn();ke(2),Re("ngClass",yn(3,HT,n.inverted)),ke(4),Re("ngClass",yn(5,jT,n.showCustom)),ke(1),Re("data",n.data)}}let $T=(()=>{class t{constructor(n,r,o){this.document=n,this.renderer=r,this.holomate=o,this.title="holomate",this.data=Cs,this.showDebugger=!1,this.started=!1,this.showCustom=!1,this.inverted=!1}start(){this.started=!0,this.holomate.enable()}keyEvent(n){"d"==n.key&&(this.showDebugger=!this.showDebugger)}selectPack(n){this.showCustom=n>this.holomate.getPackNames().length,this.holomate.selectPack(n)}toggleTheme(){this.inverted?this.renderer.removeClass(this.document.body,"inverted"):this.renderer.addClass(this.document.body,"inverted"),this.inverted=!this.inverted}}return t.\u0275fac=function(n){return new(n||t)(X($t),X(Vu),X(qo))},t.\u0275cmp=cn({type:t,selectors:[["app-root"]],hostBindings:function(n,r){1&n&&bt("keyup",function(i){return r.keyEvent(i)},!1,Od)},decls:5,vars:4,consts:[[3,"data",4,"ngIf"],[1,"logo"],["class","start",3,"click",4,"ngIf"],[4,"ngIf"],[3,"data"],[1,"start",3,"click"],[1,"main"],[1,"theme-toggle",3,"ngClass","click"],[3,"selectPack"],[3,"ngClass"]],template:function(n,r){1&n&&(_n(0,LT,1,1,"app-debugger",0),Fn(1,"div",1),_n(2,BT,2,0,"button",2),_n(3,VT,2,0,"div",3),_n(4,GT,8,7,"ng-container",3)),2&n&&(Re("ngIf",r.showDebugger),ke(2),Re("ngIf",!r.started),ke(1),Re("ngIf",r.started&&!r.data.connected),ke(1),Re("ngIf",r.started&&r.data.connected))},dependencies:[vs,Em,CT,NT,xT,RT,FT,kT],styles:["[_nghost-%COMP%]{display:flex;align-items:center;height:100vh;justify-content:center;gap:30px}button[_ngcontent-%COMP%]{border:1px solid var(--border-color);padding:10px 20px;background:none;border-radius:4px}button[_ngcontent-%COMP%]:hover, button[_ngcontent-%COMP%]:active{background-color:var(--btn-bg-color--active)}.main[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}app-custom-pack[_ngcontent-%COMP%]{display:none}app-custom-pack.visible[_ngcontent-%COMP%]{display:block}.theme-toggle[_ngcontent-%COMP%], .start[_ngcontent-%COMP%]{background-color:var(--holomate-bg-color);color:var(--btn-font-color);cursor:pointer}.theme-toggle[_ngcontent-%COMP%]:active, .start[_ngcontent-%COMP%]:active{background-color:var(--main-bg-color)}.theme-toggle[_ngcontent-%COMP%]{border-radius:50%;height:25px;width:25px;padding:0;position:fixed;bottom:30px;right:30px}.logo[_ngcontent-%COMP%]{position:fixed;top:30px;left:30px;background-position:center;background-repeat:no-repeat;background-image:var(--logo-src);width:100px;height:40px;background-size:contain}"]}),t})(),UT=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Yr({type:t,bootstrap:[$T]}),t.\u0275inj=rr({imports:[oT]}),t})();(function WC(){em=!1})(),rT().bootstrapModule(UT).catch(t=>console.error(t))},630:()=>{!function(){var E;function xt(){return typeof Howler.ctx.createGain>"u"?Howler.ctx.createGainNode():Howler.ctx.createGain()}HowlerGlobal.prototype._setup=(E=HowlerGlobal.prototype._setup,function(Z){var z=this||Howler;return z.effectChain={debug:!1},z._effects=[],z._effectChain=xt(),z._effectChainOut=xt(),z.masterGain&&(z._effectChain.connect(z._effectChainOut),z._effectChainOut.connect(z.masterGain)),E.call(z,Z)}),HowlerGlobal.prototype.unload=function(E){return function(){var Z=this||Howler;return Z.effectChain.debug&&console.warn("[Howler Effects Chain] Calling Howler.unload() creates a new audio context, which will invalidate the effects you have created with the old context."),E.call(Z)}}(HowlerGlobal.prototype.unload),Sound.prototype.create=function(E){return function(){var Z=E.call(this);return Z._parent._webAudio&&Howler._effectChain&&(Z._node.disconnect(Howler.masterGain),Z._node.connect(Howler._effectChain)),Z}}(Sound.prototype.create),HowlerGlobal.prototype.addEffect=function(E){var Z=this||Howler,z=Z._effects[Z._effects.length-1];return z?(z.disconnect(),z.connect(E)):(Z._effectChain.disconnect(),Z._effectChain.connect(E)),E.connect(Z._effectChainOut),Z._effects.push(E),Z},HowlerGlobal.prototype.removeEffect=function(E){var Z=this||Howler,z=Z._effects.indexOf(E);if(-1===z)return console.warn("[Howler effects chain] Cannot remove the effect as it is not added to the chain:",E),Z;var ce=0===z?Z._effectChain:Z._effects[z-1],m=z===Z._effects.length-1?Z._effectChainOut:Z._effects[z+1];return E.disconnect(),ce.disconnect(),ce.connect(m),Z._effects=Z._effects.filter(function(C){return C!==E}),Z}}()},461:(xt,E)=>{var z;!function(){"use strict";var ce=function(){this.init()};ce.prototype={init:function(){var l=this||m;return l._counter=1e3,l._html5AudioPool=[],l.html5PoolSize=10,l._codecs={},l._howls=[],l._muted=!1,l._volume=1,l._canPlayEvent="canplaythrough",l._navigator=typeof window<"u"&&window.navigator?window.navigator:null,l.masterGain=null,l.noAudio=!1,l.usingWebAudio=!0,l.autoSuspend=!0,l.ctx=null,l.autoUnlock=!0,l._setup(),l},volume:function(l){var h=this||m;if(l=parseFloat(l),h.ctx||Be(),typeof l<"u"&&l>=0&&l<=1){if(h._volume=l,h._muted)return h;h.usingWebAudio&&h.masterGain.gain.setValueAtTime(l,m.ctx.currentTime);for(var g=0;g<h._howls.length;g++)if(!h._howls[g]._webAudio)for(var d=h._howls[g]._getSoundIds(),y=0;y<d.length;y++){var w=h._howls[g]._soundById(d[y]);w&&w._node&&(w._node.volume=w._volume*l)}return h}return h._volume},mute:function(l){var h=this||m;h.ctx||Be(),h._muted=l,h.usingWebAudio&&h.masterGain.gain.setValueAtTime(l?0:h._volume,m.ctx.currentTime);for(var g=0;g<h._howls.length;g++)if(!h._howls[g]._webAudio)for(var d=h._howls[g]._getSoundIds(),y=0;y<d.length;y++){var w=h._howls[g]._soundById(d[y]);w&&w._node&&(w._node.muted=!!l||w._muted)}return h},stop:function(){for(var l=this||m,h=0;h<l._howls.length;h++)l._howls[h].stop();return l},unload:function(){for(var l=this||m,h=l._howls.length-1;h>=0;h--)l._howls[h].unload();return l.usingWebAudio&&l.ctx&&typeof l.ctx.close<"u"&&(l.ctx.close(),l.ctx=null,Be()),l},codecs:function(l){return(this||m)._codecs[l.replace(/^x-/,"")]},_setup:function(){var l=this||m;if(l.state=l.ctx&&l.ctx.state||"suspended",l._autoSuspend(),!l.usingWebAudio)if(typeof Audio<"u")try{typeof(new Audio).oncanplaythrough>"u"&&(l._canPlayEvent="canplay")}catch{l.noAudio=!0}else l.noAudio=!0;try{(new Audio).muted&&(l.noAudio=!0)}catch{}return l.noAudio||l._setupCodecs(),l},_setupCodecs:function(){var l=this||m,h=null;try{h=typeof Audio<"u"?new Audio:null}catch{return l}if(!h||"function"!=typeof h.canPlayType)return l;var g=h.canPlayType("audio/mpeg;").replace(/^no$/,""),d=l._navigator?l._navigator.userAgent:"",y=d.match(/OPR\/([0-6].)/g),w=y&&parseInt(y[0].split("/")[1],10)<33,D=-1!==d.indexOf("Safari")&&-1===d.indexOf("Chrome"),T=d.match(/Version\/(.*?) /),P=D&&T&&parseInt(T[1],10)<15;return l._codecs={mp3:!(w||!g&&!h.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!g,opus:!!h.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!h.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!h.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(h.canPlayType('audio/wav; codecs="1"')||h.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!h.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!h.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(h.canPlayType("audio/x-m4a;")||h.canPlayType("audio/m4a;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(h.canPlayType("audio/x-m4b;")||h.canPlayType("audio/m4b;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(h.canPlayType("audio/x-mp4;")||h.canPlayType("audio/mp4;")||h.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(P||!h.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(P||!h.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!h.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(h.canPlayType("audio/x-flac;")||h.canPlayType("audio/flac;")).replace(/^no$/,"")},l},_unlockAudio:function(){var l=this||m;if(!l._audioUnlocked&&l.ctx){l._audioUnlocked=!1,l.autoUnlock=!1,!l._mobileUnloaded&&44100!==l.ctx.sampleRate&&(l._mobileUnloaded=!0,l.unload()),l._scratchBuffer=l.ctx.createBuffer(1,1,22050);var h=function(g){for(;l._html5AudioPool.length<l.html5PoolSize;)try{var d=new Audio;d._unlocked=!0,l._releaseHtml5Audio(d)}catch{l.noAudio=!0;break}for(var y=0;y<l._howls.length;y++)if(!l._howls[y]._webAudio)for(var w=l._howls[y]._getSoundIds(),D=0;D<w.length;D++){var T=l._howls[y]._soundById(w[D]);T&&T._node&&!T._node._unlocked&&(T._node._unlocked=!0,T._node.load())}l._autoResume();var P=l.ctx.createBufferSource();P.buffer=l._scratchBuffer,P.connect(l.ctx.destination),typeof P.start>"u"?P.noteOn(0):P.start(0),"function"==typeof l.ctx.resume&&l.ctx.resume(),P.onended=function(){P.disconnect(0),l._audioUnlocked=!0,document.removeEventListener("touchstart",h,!0),document.removeEventListener("touchend",h,!0),document.removeEventListener("click",h,!0),document.removeEventListener("keydown",h,!0);for(var G=0;G<l._howls.length;G++)l._howls[G]._emit("unlock")}};return document.addEventListener("touchstart",h,!0),document.addEventListener("touchend",h,!0),document.addEventListener("click",h,!0),document.addEventListener("keydown",h,!0),l}},_obtainHtml5Audio:function(){var l=this||m;if(l._html5AudioPool.length)return l._html5AudioPool.pop();var h=(new Audio).play();return h&&typeof Promise<"u"&&(h instanceof Promise||"function"==typeof h.then)&&h.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(l){var h=this||m;return l._unlocked&&h._html5AudioPool.push(l),h},_autoSuspend:function(){var l=this;if(l.autoSuspend&&l.ctx&&!(typeof l.ctx.suspend>"u")&&m.usingWebAudio){for(var h=0;h<l._howls.length;h++)if(l._howls[h]._webAudio)for(var g=0;g<l._howls[h]._sounds.length;g++)if(!l._howls[h]._sounds[g]._paused)return l;return l._suspendTimer&&clearTimeout(l._suspendTimer),l._suspendTimer=setTimeout(function(){if(l.autoSuspend){l._suspendTimer=null,l.state="suspending";var d=function(){l.state="suspended",l._resumeAfterSuspend&&(delete l._resumeAfterSuspend,l._autoResume())};l.ctx.suspend().then(d,d)}},3e4),l}},_autoResume:function(){var l=this;if(l.ctx&&!(typeof l.ctx.resume>"u")&&m.usingWebAudio)return"running"===l.state&&"interrupted"!==l.ctx.state&&l._suspendTimer?(clearTimeout(l._suspendTimer),l._suspendTimer=null):"suspended"===l.state||"running"===l.state&&"interrupted"===l.ctx.state?(l.ctx.resume().then(function(){l.state="running";for(var h=0;h<l._howls.length;h++)l._howls[h]._emit("resume")}),l._suspendTimer&&(clearTimeout(l._suspendTimer),l._suspendTimer=null)):"suspending"===l.state&&(l._resumeAfterSuspend=!0),l}};var m=new ce,C=function(l){l.src&&0!==l.src.length?this.init(l):console.error("An array of source files must be passed with any new Howl.")};C.prototype={init:function(l){var h=this;return m.ctx||Be(),h._autoplay=l.autoplay||!1,h._format="string"!=typeof l.format?l.format:[l.format],h._html5=l.html5||!1,h._muted=l.mute||!1,h._loop=l.loop||!1,h._pool=l.pool||5,h._preload="boolean"!=typeof l.preload&&"metadata"!==l.preload||l.preload,h._rate=l.rate||1,h._sprite=l.sprite||{},h._src="string"!=typeof l.src?l.src:[l.src],h._volume=void 0!==l.volume?l.volume:1,h._xhr={method:l.xhr&&l.xhr.method?l.xhr.method:"GET",headers:l.xhr&&l.xhr.headers?l.xhr.headers:null,withCredentials:!(!l.xhr||!l.xhr.withCredentials)&&l.xhr.withCredentials},h._duration=0,h._state="unloaded",h._sounds=[],h._endTimers={},h._queue=[],h._playLock=!1,h._onend=l.onend?[{fn:l.onend}]:[],h._onfade=l.onfade?[{fn:l.onfade}]:[],h._onload=l.onload?[{fn:l.onload}]:[],h._onloaderror=l.onloaderror?[{fn:l.onloaderror}]:[],h._onplayerror=l.onplayerror?[{fn:l.onplayerror}]:[],h._onpause=l.onpause?[{fn:l.onpause}]:[],h._onplay=l.onplay?[{fn:l.onplay}]:[],h._onstop=l.onstop?[{fn:l.onstop}]:[],h._onmute=l.onmute?[{fn:l.onmute}]:[],h._onvolume=l.onvolume?[{fn:l.onvolume}]:[],h._onrate=l.onrate?[{fn:l.onrate}]:[],h._onseek=l.onseek?[{fn:l.onseek}]:[],h._onunlock=l.onunlock?[{fn:l.onunlock}]:[],h._onresume=[],h._webAudio=m.usingWebAudio&&!h._html5,typeof m.ctx<"u"&&m.ctx&&m.autoUnlock&&m._unlockAudio(),m._howls.push(h),h._autoplay&&h._queue.push({event:"play",action:function(){h.play()}}),h._preload&&"none"!==h._preload&&h.load(),h},load:function(){var l=this,h=null;if(m.noAudio)l._emit("loaderror",null,"No audio support.");else{"string"==typeof l._src&&(l._src=[l._src]);for(var g=0;g<l._src.length;g++){var d,y;if(l._format&&l._format[g])d=l._format[g];else{if("string"!=typeof(y=l._src[g])){l._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(d=/^data:audio\/([^;,]+);/i.exec(y))||(d=/\.([^.]+)$/.exec(y.split("?",1)[0])),d&&(d=d[1].toLowerCase())}if(d||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),d&&m.codecs(d)){h=l._src[g];break}}if(h)return l._src=h,l._state="loading","https:"===window.location.protocol&&"http:"===h.slice(0,5)&&(l._html5=!0,l._webAudio=!1),new M(l),l._webAudio&&U(l),l;l._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(l,h){var g=this,d=null;if("number"==typeof l)d=l,l=null;else{if("string"==typeof l&&"loaded"===g._state&&!g._sprite[l])return null;if(typeof l>"u"&&(l="__default",!g._playLock)){for(var y=0,w=0;w<g._sounds.length;w++)g._sounds[w]._paused&&!g._sounds[w]._ended&&(y++,d=g._sounds[w]._id);1===y?l=null:d=null}}var D=d?g._soundById(d):g._inactiveSound();if(!D)return null;if(d&&!l&&(l=D._sprite||"__default"),"loaded"!==g._state){D._sprite=l,D._ended=!1;var T=D._id;return g._queue.push({event:"play",action:function(){g.play(T)}}),T}if(d&&!D._paused)return h||g._loadQueue("play"),D._id;g._webAudio&&m._autoResume();var P=Math.max(0,D._seek>0?D._seek:g._sprite[l][0]/1e3),G=Math.max(0,(g._sprite[l][0]+g._sprite[l][1])/1e3-P),re=1e3*G/Math.abs(D._rate),Oe=g._sprite[l][0]/1e3,Ye=(g._sprite[l][0]+g._sprite[l][1])/1e3;D._sprite=l,D._ended=!1;var Pt=function(){D._paused=!1,D._seek=P,D._start=Oe,D._stop=Ye,D._loop=!(!D._loop&&!g._sprite[l][2])};if(!(P>=Ye)){var se=D._node;if(g._webAudio){var sn=function(){g._playLock=!1,Pt(),g._refreshBuffer(D),se.gain.setValueAtTime(D._muted||g._muted?0:D._volume,m.ctx.currentTime),D._playStart=m.ctx.currentTime,typeof se.bufferSource.start>"u"?se.bufferSource.noteGrainOn(0,P,D._loop?86400:G):se.bufferSource.start(0,P,D._loop?86400:G),re!==1/0&&(g._endTimers[D._id]=setTimeout(g._ended.bind(g,D),re)),h||setTimeout(function(){g._emit("play",D._id),g._loadQueue()},0)};"running"===m.state&&"interrupted"!==m.ctx.state?sn():(g._playLock=!0,g.once("resume",sn),g._clearTimer(D._id))}else{var ft=function(){se.currentTime=P,se.muted=D._muted||g._muted||m._muted||se.muted,se.volume=D._volume*m.volume(),se.playbackRate=D._rate;try{var Wt=se.play();if(Wt&&typeof Promise<"u"&&(Wt instanceof Promise||"function"==typeof Wt.then)?(g._playLock=!0,Pt(),Wt.then(function(){g._playLock=!1,se._unlocked=!0,h?g._loadQueue():g._emit("play",D._id)}).catch(function(){g._playLock=!1,g._emit("playerror",D._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),D._ended=!0,D._paused=!0})):h||(g._playLock=!1,Pt(),g._emit("play",D._id)),se.playbackRate=D._rate,se.paused)return void g._emit("playerror",D._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==l||D._loop?g._endTimers[D._id]=setTimeout(g._ended.bind(g,D),re):(g._endTimers[D._id]=function(){g._ended(D),se.removeEventListener("ended",g._endTimers[D._id],!1)},se.addEventListener("ended",g._endTimers[D._id],!1))}catch(Wo){g._emit("playerror",D._id,Wo)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===se.src&&(se.src=g._src,se.load());var En=window&&window.ejecta||!se.readyState&&m._navigator.isCocoonJS;if(se.readyState>=3||En)ft();else{g._playLock=!0,g._state="loading";var an=function(){g._state="loaded",ft(),se.removeEventListener(m._canPlayEvent,an,!1)};se.addEventListener(m._canPlayEvent,an,!1),g._clearTimer(D._id)}}return D._id}g._ended(D)},pause:function(l){var h=this;if("loaded"!==h._state||h._playLock)return h._queue.push({event:"pause",action:function(){h.pause(l)}}),h;for(var g=h._getSoundIds(l),d=0;d<g.length;d++){h._clearTimer(g[d]);var y=h._soundById(g[d]);if(y&&!y._paused&&(y._seek=h.seek(g[d]),y._rateSeek=0,y._paused=!0,h._stopFade(g[d]),y._node))if(h._webAudio){if(!y._node.bufferSource)continue;typeof y._node.bufferSource.stop>"u"?y._node.bufferSource.noteOff(0):y._node.bufferSource.stop(0),h._cleanBuffer(y._node)}else(!isNaN(y._node.duration)||y._node.duration===1/0)&&y._node.pause();arguments[1]||h._emit("pause",y?y._id:null)}return h},stop:function(l,h){var g=this;if("loaded"!==g._state||g._playLock)return g._queue.push({event:"stop",action:function(){g.stop(l)}}),g;for(var d=g._getSoundIds(l),y=0;y<d.length;y++){g._clearTimer(d[y]);var w=g._soundById(d[y]);w&&(w._seek=w._start||0,w._rateSeek=0,w._paused=!0,w._ended=!0,g._stopFade(d[y]),w._node&&(g._webAudio?w._node.bufferSource&&(typeof w._node.bufferSource.stop>"u"?w._node.bufferSource.noteOff(0):w._node.bufferSource.stop(0),g._cleanBuffer(w._node)):(!isNaN(w._node.duration)||w._node.duration===1/0)&&(w._node.currentTime=w._start||0,w._node.pause(),w._node.duration===1/0&&g._clearSound(w._node))),h||g._emit("stop",w._id))}return g},mute:function(l,h){var g=this;if("loaded"!==g._state||g._playLock)return g._queue.push({event:"mute",action:function(){g.mute(l,h)}}),g;if(typeof h>"u"){if("boolean"!=typeof l)return g._muted;g._muted=l}for(var d=g._getSoundIds(h),y=0;y<d.length;y++){var w=g._soundById(d[y]);w&&(w._muted=l,w._interval&&g._stopFade(w._id),g._webAudio&&w._node?w._node.gain.setValueAtTime(l?0:w._volume,m.ctx.currentTime):w._node&&(w._node.muted=!!m._muted||l),g._emit("mute",w._id))}return g},volume:function(){var g,d,D,l=this,h=arguments;if(0===h.length)return l._volume;if(1===h.length||2===h.length&&typeof h[1]>"u"){var y=l._getSoundIds(),w=y.indexOf(h[0]);w>=0?d=parseInt(h[0],10):g=parseFloat(h[0])}else h.length>=2&&(g=parseFloat(h[0]),d=parseInt(h[1],10));if(!(typeof g<"u"&&g>=0&&g<=1))return(D=d?l._soundById(d):l._sounds[0])?D._volume:0;if("loaded"!==l._state||l._playLock)return l._queue.push({event:"volume",action:function(){l.volume.apply(l,h)}}),l;typeof d>"u"&&(l._volume=g),d=l._getSoundIds(d);for(var T=0;T<d.length;T++)(D=l._soundById(d[T]))&&(D._volume=g,h[2]||l._stopFade(d[T]),l._webAudio&&D._node&&!D._muted?D._node.gain.setValueAtTime(g,m.ctx.currentTime):D._node&&!D._muted&&(D._node.volume=g*m.volume()),l._emit("volume",D._id));return l},fade:function(l,h,g,d){var y=this;if("loaded"!==y._state||y._playLock)return y._queue.push({event:"fade",action:function(){y.fade(l,h,g,d)}}),y;l=Math.min(Math.max(0,parseFloat(l)),1),h=Math.min(Math.max(0,parseFloat(h)),1),g=parseFloat(g),y.volume(l,d);for(var w=y._getSoundIds(d),D=0;D<w.length;D++){var T=y._soundById(w[D]);if(T){if(d||y._stopFade(w[D]),y._webAudio&&!T._muted){var P=m.ctx.currentTime,G=P+g/1e3;T._volume=l,T._node.gain.setValueAtTime(l,P),T._node.gain.linearRampToValueAtTime(h,G)}y._startFadeInterval(T,l,h,g,w[D],typeof d>"u")}}return y},_startFadeInterval:function(l,h,g,d,y,w){var D=this,T=h,P=g-h,G=Math.abs(P/.01),re=Math.max(4,G>0?d/G:d),Oe=Date.now();l._fadeTo=g,l._interval=setInterval(function(){var Ye=(Date.now()-Oe)/d;Oe=Date.now(),T+=P*Ye,T=Math.round(100*T)/100,T=P<0?Math.max(g,T):Math.min(g,T),D._webAudio?l._volume=T:D.volume(T,l._id,!0),w&&(D._volume=T),(g<h&&T<=g||g>h&&T>=g)&&(clearInterval(l._interval),l._interval=null,l._fadeTo=null,D.volume(g,l._id),D._emit("fade",l._id))},re)},_stopFade:function(l){var h=this,g=h._soundById(l);return g&&g._interval&&(h._webAudio&&g._node.gain.cancelScheduledValues(m.ctx.currentTime),clearInterval(g._interval),g._interval=null,h.volume(g._fadeTo,l),g._fadeTo=null,h._emit("fade",l)),h},loop:function(){var g,d,y,l=this,h=arguments;if(0===h.length)return l._loop;if(1===h.length){if("boolean"!=typeof h[0])return!!(y=l._soundById(parseInt(h[0],10)))&&y._loop;l._loop=g=h[0]}else 2===h.length&&(g=h[0],d=parseInt(h[1],10));for(var w=l._getSoundIds(d),D=0;D<w.length;D++)(y=l._soundById(w[D]))&&(y._loop=g,l._webAudio&&y._node&&y._node.bufferSource&&(y._node.bufferSource.loop=g,g&&(y._node.bufferSource.loopStart=y._start||0,y._node.bufferSource.loopEnd=y._stop,l.playing(w[D])&&(l.pause(w[D],!0),l.play(w[D],!0)))));return l},rate:function(){var g,d,D,l=this,h=arguments;if(0===h.length)d=l._sounds[0]._id;else if(1===h.length){var y=l._getSoundIds(),w=y.indexOf(h[0]);w>=0?d=parseInt(h[0],10):g=parseFloat(h[0])}else 2===h.length&&(g=parseFloat(h[0]),d=parseInt(h[1],10));if("number"!=typeof g)return(D=l._soundById(d))?D._rate:l._rate;if("loaded"!==l._state||l._playLock)return l._queue.push({event:"rate",action:function(){l.rate.apply(l,h)}}),l;typeof d>"u"&&(l._rate=g),d=l._getSoundIds(d);for(var T=0;T<d.length;T++)if(D=l._soundById(d[T])){l.playing(d[T])&&(D._rateSeek=l.seek(d[T]),D._playStart=l._webAudio?m.ctx.currentTime:D._playStart),D._rate=g,l._webAudio&&D._node&&D._node.bufferSource?D._node.bufferSource.playbackRate.setValueAtTime(g,m.ctx.currentTime):D._node&&(D._node.playbackRate=g);var P=l.seek(d[T]),G=(l._sprite[D._sprite][0]+l._sprite[D._sprite][1])/1e3-P,re=1e3*G/Math.abs(D._rate);(l._endTimers[d[T]]||!D._paused)&&(l._clearTimer(d[T]),l._endTimers[d[T]]=setTimeout(l._ended.bind(l,D),re)),l._emit("rate",D._id)}return l},seek:function(){var g,d,l=this,h=arguments;if(0===h.length)l._sounds.length&&(d=l._sounds[0]._id);else if(1===h.length){var y=l._getSoundIds(),w=y.indexOf(h[0]);w>=0?d=parseInt(h[0],10):l._sounds.length&&(d=l._sounds[0]._id,g=parseFloat(h[0]))}else 2===h.length&&(g=parseFloat(h[0]),d=parseInt(h[1],10));if(typeof d>"u")return 0;if("number"==typeof g&&("loaded"!==l._state||l._playLock))return l._queue.push({event:"seek",action:function(){l.seek.apply(l,h)}}),l;var D=l._soundById(d);if(D){if(!("number"==typeof g&&g>=0)){if(l._webAudio){var re=l.playing(d)?m.ctx.currentTime-D._playStart:0,Oe=D._rateSeek?D._rateSeek-D._seek:0;return D._seek+(Oe+re*Math.abs(D._rate))}return D._node.currentTime}var T=l.playing(d);T&&l.pause(d,!0),D._seek=g,D._ended=!1,l._clearTimer(d),!l._webAudio&&D._node&&!isNaN(D._node.duration)&&(D._node.currentTime=g);var P=function(){T&&l.play(d,!0),l._emit("seek",d)};if(T&&!l._webAudio){var G=function(){l._playLock?setTimeout(G,0):P()};setTimeout(G,0)}else P()}return l},playing:function(l){var h=this;if("number"==typeof l){var g=h._soundById(l);return!!g&&!g._paused}for(var d=0;d<h._sounds.length;d++)if(!h._sounds[d]._paused)return!0;return!1},duration:function(l){var h=this,g=h._duration,d=h._soundById(l);return d&&(g=h._sprite[d._sprite][1]/1e3),g},state:function(){return this._state},unload:function(){for(var l=this,h=l._sounds,g=0;g<h.length;g++)h[g]._paused||l.stop(h[g]._id),l._webAudio||(l._clearSound(h[g]._node),h[g]._node.removeEventListener("error",h[g]._errorFn,!1),h[g]._node.removeEventListener(m._canPlayEvent,h[g]._loadFn,!1),h[g]._node.removeEventListener("ended",h[g]._endFn,!1),m._releaseHtml5Audio(h[g]._node)),delete h[g]._node,l._clearTimer(h[g]._id);var d=m._howls.indexOf(l);d>=0&&m._howls.splice(d,1);var y=!0;for(g=0;g<m._howls.length;g++)if(m._howls[g]._src===l._src||l._src.indexOf(m._howls[g]._src)>=0){y=!1;break}return $&&y&&delete $[l._src],m.noAudio=!1,l._state="unloaded",l._sounds=[],l=null,null},on:function(l,h,g,d){return"function"==typeof h&&this["_on"+l].push(d?{id:g,fn:h,once:d}:{id:g,fn:h}),this},off:function(l,h,g){var d=this,y=d["_on"+l],w=0;if("number"==typeof h&&(g=h,h=null),h||g)for(w=0;w<y.length;w++){var D=g===y[w].id;if(h===y[w].fn&&D||!h&&D){y.splice(w,1);break}}else if(l)d["_on"+l]=[];else{var T=Object.keys(d);for(w=0;w<T.length;w++)0===T[w].indexOf("_on")&&Array.isArray(d[T[w]])&&(d[T[w]]=[])}return d},once:function(l,h,g){return this.on(l,h,g,1),this},_emit:function(l,h,g){for(var d=this,y=d["_on"+l],w=y.length-1;w>=0;w--)(!y[w].id||y[w].id===h||"load"===l)&&(setTimeout(function(D){D.call(this,h,g)}.bind(d,y[w].fn),0),y[w].once&&d.off(l,y[w].fn,y[w].id));return d._loadQueue(l),d},_loadQueue:function(l){var h=this;if(h._queue.length>0){var g=h._queue[0];g.event===l&&(h._queue.shift(),h._loadQueue()),l||g.action()}return h},_ended:function(l){var h=this,g=l._sprite;if(!h._webAudio&&l._node&&!l._node.paused&&!l._node.ended&&l._node.currentTime<l._stop)return setTimeout(h._ended.bind(h,l),100),h;var d=!(!l._loop&&!h._sprite[g][2]);if(h._emit("end",l._id),!h._webAudio&&d&&h.stop(l._id,!0).play(l._id),h._webAudio&&d){h._emit("play",l._id),l._seek=l._start||0,l._rateSeek=0,l._playStart=m.ctx.currentTime;var y=1e3*(l._stop-l._start)/Math.abs(l._rate);h._endTimers[l._id]=setTimeout(h._ended.bind(h,l),y)}return h._webAudio&&!d&&(l._paused=!0,l._ended=!0,l._seek=l._start||0,l._rateSeek=0,h._clearTimer(l._id),h._cleanBuffer(l._node),m._autoSuspend()),!h._webAudio&&!d&&h.stop(l._id,!0),h},_clearTimer:function(l){var h=this;if(h._endTimers[l]){if("function"!=typeof h._endTimers[l])clearTimeout(h._endTimers[l]);else{var g=h._soundById(l);g&&g._node&&g._node.removeEventListener("ended",h._endTimers[l],!1)}delete h._endTimers[l]}return h},_soundById:function(l){for(var h=this,g=0;g<h._sounds.length;g++)if(l===h._sounds[g]._id)return h._sounds[g];return null},_inactiveSound:function(){var l=this;l._drain();for(var h=0;h<l._sounds.length;h++)if(l._sounds[h]._ended)return l._sounds[h].reset();return new M(l)},_drain:function(){var l=this,h=l._pool,g=0,d=0;if(!(l._sounds.length<h)){for(d=0;d<l._sounds.length;d++)l._sounds[d]._ended&&g++;for(d=l._sounds.length-1;d>=0;d--){if(g<=h)return;l._sounds[d]._ended&&(l._webAudio&&l._sounds[d]._node&&l._sounds[d]._node.disconnect(0),l._sounds.splice(d,1),g--)}}},_getSoundIds:function(l){if(typeof l>"u"){for(var g=[],d=0;d<this._sounds.length;d++)g.push(this._sounds[d]._id);return g}return[l]},_refreshBuffer:function(l){return l._node.bufferSource=m.ctx.createBufferSource(),l._node.bufferSource.buffer=$[this._src],l._node.bufferSource.connect(l._panner?l._panner:l._node),l._node.bufferSource.loop=l._loop,l._loop&&(l._node.bufferSource.loopStart=l._start||0,l._node.bufferSource.loopEnd=l._stop||0),l._node.bufferSource.playbackRate.setValueAtTime(l._rate,m.ctx.currentTime),this},_cleanBuffer:function(l){var g=m._navigator&&m._navigator.vendor.indexOf("Apple")>=0;if(m._scratchBuffer&&l.bufferSource&&(l.bufferSource.onended=null,l.bufferSource.disconnect(0),g))try{l.bufferSource.buffer=m._scratchBuffer}catch{}return l.bufferSource=null,this},_clearSound:function(l){/MSIE |Trident\//.test(m._navigator&&m._navigator.userAgent)||(l.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var M=function(l){this._parent=l,this.init()};M.prototype={init:function(){var l=this,h=l._parent;return l._muted=h._muted,l._loop=h._loop,l._volume=h._volume,l._rate=h._rate,l._seek=0,l._paused=!0,l._ended=!0,l._sprite="__default",l._id=++m._counter,h._sounds.push(l),l.create(),l},create:function(){var l=this,h=l._parent,g=m._muted||l._muted||l._parent._muted?0:l._volume;return h._webAudio?(l._node=typeof m.ctx.createGain>"u"?m.ctx.createGainNode():m.ctx.createGain(),l._node.gain.setValueAtTime(g,m.ctx.currentTime),l._node.paused=!0,l._node.connect(m.masterGain)):m.noAudio||(l._node=m._obtainHtml5Audio(),l._errorFn=l._errorListener.bind(l),l._node.addEventListener("error",l._errorFn,!1),l._loadFn=l._loadListener.bind(l),l._node.addEventListener(m._canPlayEvent,l._loadFn,!1),l._endFn=l._endListener.bind(l),l._node.addEventListener("ended",l._endFn,!1),l._node.src=h._src,l._node.preload=!0===h._preload?"auto":h._preload,l._node.volume=g*m.volume(),l._node.load()),l},reset:function(){var l=this,h=l._parent;return l._muted=h._muted,l._loop=h._loop,l._volume=h._volume,l._rate=h._rate,l._seek=0,l._rateSeek=0,l._paused=!0,l._ended=!0,l._sprite="__default",l._id=++m._counter,l},_errorListener:function(){var l=this;l._parent._emit("loaderror",l._id,l._node.error?l._node.error.code:0),l._node.removeEventListener("error",l._errorFn,!1)},_loadListener:function(){var l=this,h=l._parent;h._duration=Math.ceil(10*l._node.duration)/10,0===Object.keys(h._sprite).length&&(h._sprite={__default:[0,1e3*h._duration]}),"loaded"!==h._state&&(h._state="loaded",h._emit("load"),h._loadQueue()),l._node.removeEventListener(m._canPlayEvent,l._loadFn,!1)},_endListener:function(){var l=this,h=l._parent;h._duration===1/0&&(h._duration=Math.ceil(10*l._node.duration)/10,h._sprite.__default[1]===1/0&&(h._sprite.__default[1]=1e3*h._duration),h._ended(l)),l._node.removeEventListener("ended",l._endFn,!1)}};var $={},U=function(l){var h=l._src;if($[h])return l._duration=$[h].duration,void B(l);if(/^data:[^;]+;base64,/.test(h)){for(var g=atob(h.split(",")[1]),d=new Uint8Array(g.length),y=0;y<g.length;++y)d[y]=g.charCodeAt(y);q(d.buffer,l)}else{var w=new XMLHttpRequest;w.open(l._xhr.method,h,!0),w.withCredentials=l._xhr.withCredentials,w.responseType="arraybuffer",l._xhr.headers&&Object.keys(l._xhr.headers).forEach(function(D){w.setRequestHeader(D,l._xhr.headers[D])}),w.onload=function(){var D=(w.status+"")[0];"0"===D||"2"===D||"3"===D?q(w.response,l):l._emit("loaderror",null,"Failed loading audio file with status: "+w.status+".")},w.onerror=function(){l._webAudio&&(l._html5=!0,l._webAudio=!1,l._sounds=[],delete $[h],l.load())},V(w)}},V=function(l){try{l.send()}catch{l.onerror()}},q=function(l,h){var g=function(){h._emit("loaderror",null,"Decoding audio data failed.")},d=function(y){y&&h._sounds.length>0?($[h._src]=y,B(h,y)):g()};typeof Promise<"u"&&1===m.ctx.decodeAudioData.length?m.ctx.decodeAudioData(l).then(d).catch(g):m.ctx.decodeAudioData(l,d,g)},B=function(l,h){h&&!l._duration&&(l._duration=h.duration),0===Object.keys(l._sprite).length&&(l._sprite={__default:[0,1e3*l._duration]}),"loaded"!==l._state&&(l._state="loaded",l._emit("load"),l._loadQueue())},Be=function(){if(m.usingWebAudio){try{typeof AudioContext<"u"?m.ctx=new AudioContext:typeof webkitAudioContext<"u"?m.ctx=new webkitAudioContext:m.usingWebAudio=!1}catch{m.usingWebAudio=!1}m.ctx||(m.usingWebAudio=!1);var l=/iP(hone|od|ad)/.test(m._navigator&&m._navigator.platform),h=m._navigator&&m._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),g=h?parseInt(h[1],10):null;if(l&&g&&g<9){var d=/safari/.test(m._navigator&&m._navigator.userAgent.toLowerCase());m._navigator&&!d&&(m.usingWebAudio=!1)}m.usingWebAudio&&(m.masterGain=typeof m.ctx.createGain>"u"?m.ctx.createGainNode():m.ctx.createGain(),m.masterGain.gain.setValueAtTime(m._muted?0:m._volume,m.ctx.currentTime),m.masterGain.connect(m.ctx.destination)),m._setup()}};void 0!==(z=function(){return{Howler:m,Howl:C}}.apply(E,[]))&&(xt.exports=z),E.Howler=m,E.Howl=C,typeof global<"u"?(global.HowlerGlobal=ce,global.Howler=m,global.Howl=C,global.Sound=M):typeof window<"u"&&(window.HowlerGlobal=ce,window.Howler=m,window.Howl=C,window.Sound=M)}(),function(){"use strict";var m;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(m){var C=this;if(!C.ctx||!C.ctx.listener)return C;for(var M=C._howls.length-1;M>=0;M--)C._howls[M].stereo(m);return C},HowlerGlobal.prototype.pos=function(m,C,M){var $=this;return $.ctx&&$.ctx.listener?"number"!=typeof m?$._pos:($._pos=[m,C="number"!=typeof C?$._pos[1]:C,M="number"!=typeof M?$._pos[2]:M],typeof $.ctx.listener.positionX<"u"?($.ctx.listener.positionX.setTargetAtTime($._pos[0],Howler.ctx.currentTime,.1),$.ctx.listener.positionY.setTargetAtTime($._pos[1],Howler.ctx.currentTime,.1),$.ctx.listener.positionZ.setTargetAtTime($._pos[2],Howler.ctx.currentTime,.1)):$.ctx.listener.setPosition($._pos[0],$._pos[1],$._pos[2]),$):$},HowlerGlobal.prototype.orientation=function(m,C,M,$,U,V){var q=this;if(!q.ctx||!q.ctx.listener)return q;var B=q._orientation;return"number"!=typeof m?B:(q._orientation=[m,C="number"!=typeof C?B[1]:C,M="number"!=typeof M?B[2]:M,$="number"!=typeof $?B[3]:$,U="number"!=typeof U?B[4]:U,V="number"!=typeof V?B[5]:V],typeof q.ctx.listener.forwardX<"u"?(q.ctx.listener.forwardX.setTargetAtTime(m,Howler.ctx.currentTime,.1),q.ctx.listener.forwardY.setTargetAtTime(C,Howler.ctx.currentTime,.1),q.ctx.listener.forwardZ.setTargetAtTime(M,Howler.ctx.currentTime,.1),q.ctx.listener.upX.setTargetAtTime($,Howler.ctx.currentTime,.1),q.ctx.listener.upY.setTargetAtTime(U,Howler.ctx.currentTime,.1),q.ctx.listener.upZ.setTargetAtTime(V,Howler.ctx.currentTime,.1)):q.ctx.listener.setOrientation(m,C,M,$,U,V),q)},Howl.prototype.init=(m=Howl.prototype.init,function(C){var M=this;return M._orientation=C.orientation||[1,0,0],M._stereo=C.stereo||null,M._pos=C.pos||null,M._pannerAttr={coneInnerAngle:typeof C.coneInnerAngle<"u"?C.coneInnerAngle:360,coneOuterAngle:typeof C.coneOuterAngle<"u"?C.coneOuterAngle:360,coneOuterGain:typeof C.coneOuterGain<"u"?C.coneOuterGain:0,distanceModel:typeof C.distanceModel<"u"?C.distanceModel:"inverse",maxDistance:typeof C.maxDistance<"u"?C.maxDistance:1e4,panningModel:typeof C.panningModel<"u"?C.panningModel:"HRTF",refDistance:typeof C.refDistance<"u"?C.refDistance:1,rolloffFactor:typeof C.rolloffFactor<"u"?C.rolloffFactor:1},M._onstereo=C.onstereo?[{fn:C.onstereo}]:[],M._onpos=C.onpos?[{fn:C.onpos}]:[],M._onorientation=C.onorientation?[{fn:C.onorientation}]:[],m.call(this,C)}),Howl.prototype.stereo=function(m,C){var M=this;if(!M._webAudio)return M;if("loaded"!==M._state)return M._queue.push({event:"stereo",action:function(){M.stereo(m,C)}}),M;var $=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof C>"u"){if("number"!=typeof m)return M._stereo;M._stereo=m,M._pos=[m,0,0]}for(var U=M._getSoundIds(C),V=0;V<U.length;V++){var q=M._soundById(U[V]);if(q){if("number"!=typeof m)return q._stereo;q._stereo=m,q._pos=[m,0,0],q._node&&(q._pannerAttr.panningModel="equalpower",(!q._panner||!q._panner.pan)&&ce(q,$),"spatial"===$?typeof q._panner.positionX<"u"?(q._panner.positionX.setValueAtTime(m,Howler.ctx.currentTime),q._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),q._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):q._panner.setPosition(m,0,0):q._panner.pan.setValueAtTime(m,Howler.ctx.currentTime)),M._emit("stereo",q._id)}}return M},Howl.prototype.pos=function(m,C,M,$){var U=this;if(!U._webAudio)return U;if("loaded"!==U._state)return U._queue.push({event:"pos",action:function(){U.pos(m,C,M,$)}}),U;if(C="number"!=typeof C?0:C,M="number"!=typeof M?-.5:M,typeof $>"u"){if("number"!=typeof m)return U._pos;U._pos=[m,C,M]}for(var V=U._getSoundIds($),q=0;q<V.length;q++){var B=U._soundById(V[q]);if(B){if("number"!=typeof m)return B._pos;B._pos=[m,C,M],B._node&&((!B._panner||B._panner.pan)&&ce(B,"spatial"),typeof B._panner.positionX<"u"?(B._panner.positionX.setValueAtTime(m,Howler.ctx.currentTime),B._panner.positionY.setValueAtTime(C,Howler.ctx.currentTime),B._panner.positionZ.setValueAtTime(M,Howler.ctx.currentTime)):B._panner.setPosition(m,C,M)),U._emit("pos",B._id)}}return U},Howl.prototype.orientation=function(m,C,M,$){var U=this;if(!U._webAudio)return U;if("loaded"!==U._state)return U._queue.push({event:"orientation",action:function(){U.orientation(m,C,M,$)}}),U;if(C="number"!=typeof C?U._orientation[1]:C,M="number"!=typeof M?U._orientation[2]:M,typeof $>"u"){if("number"!=typeof m)return U._orientation;U._orientation=[m,C,M]}for(var V=U._getSoundIds($),q=0;q<V.length;q++){var B=U._soundById(V[q]);if(B){if("number"!=typeof m)return B._orientation;B._orientation=[m,C,M],B._node&&(B._panner||(B._pos||(B._pos=U._pos||[0,0,-.5]),ce(B,"spatial")),typeof B._panner.orientationX<"u"?(B._panner.orientationX.setValueAtTime(m,Howler.ctx.currentTime),B._panner.orientationY.setValueAtTime(C,Howler.ctx.currentTime),B._panner.orientationZ.setValueAtTime(M,Howler.ctx.currentTime)):B._panner.setOrientation(m,C,M)),U._emit("orientation",B._id)}}return U},Howl.prototype.pannerAttr=function(){var M,$,U,m=this,C=arguments;if(!m._webAudio)return m;if(0===C.length)return m._pannerAttr;if(1===C.length){if("object"!=typeof C[0])return(U=m._soundById(parseInt(C[0],10)))?U._pannerAttr:m._pannerAttr;M=C[0],typeof $>"u"&&(M.pannerAttr||(M.pannerAttr={coneInnerAngle:M.coneInnerAngle,coneOuterAngle:M.coneOuterAngle,coneOuterGain:M.coneOuterGain,distanceModel:M.distanceModel,maxDistance:M.maxDistance,refDistance:M.refDistance,rolloffFactor:M.rolloffFactor,panningModel:M.panningModel}),m._pannerAttr={coneInnerAngle:typeof M.pannerAttr.coneInnerAngle<"u"?M.pannerAttr.coneInnerAngle:m._coneInnerAngle,coneOuterAngle:typeof M.pannerAttr.coneOuterAngle<"u"?M.pannerAttr.coneOuterAngle:m._coneOuterAngle,coneOuterGain:typeof M.pannerAttr.coneOuterGain<"u"?M.pannerAttr.coneOuterGain:m._coneOuterGain,distanceModel:typeof M.pannerAttr.distanceModel<"u"?M.pannerAttr.distanceModel:m._distanceModel,maxDistance:typeof M.pannerAttr.maxDistance<"u"?M.pannerAttr.maxDistance:m._maxDistance,refDistance:typeof M.pannerAttr.refDistance<"u"?M.pannerAttr.refDistance:m._refDistance,rolloffFactor:typeof M.pannerAttr.rolloffFactor<"u"?M.pannerAttr.rolloffFactor:m._rolloffFactor,panningModel:typeof M.pannerAttr.panningModel<"u"?M.pannerAttr.panningModel:m._panningModel})}else 2===C.length&&(M=C[0],$=parseInt(C[1],10));for(var V=m._getSoundIds($),q=0;q<V.length;q++)if(U=m._soundById(V[q])){var B=U._pannerAttr;B={coneInnerAngle:typeof M.coneInnerAngle<"u"?M.coneInnerAngle:B.coneInnerAngle,coneOuterAngle:typeof M.coneOuterAngle<"u"?M.coneOuterAngle:B.coneOuterAngle,coneOuterGain:typeof M.coneOuterGain<"u"?M.coneOuterGain:B.coneOuterGain,distanceModel:typeof M.distanceModel<"u"?M.distanceModel:B.distanceModel,maxDistance:typeof M.maxDistance<"u"?M.maxDistance:B.maxDistance,refDistance:typeof M.refDistance<"u"?M.refDistance:B.refDistance,rolloffFactor:typeof M.rolloffFactor<"u"?M.rolloffFactor:B.rolloffFactor,panningModel:typeof M.panningModel<"u"?M.panningModel:B.panningModel};var Be=U._panner;Be?(Be.coneInnerAngle=B.coneInnerAngle,Be.coneOuterAngle=B.coneOuterAngle,Be.coneOuterGain=B.coneOuterGain,Be.distanceModel=B.distanceModel,Be.maxDistance=B.maxDistance,Be.refDistance=B.refDistance,Be.rolloffFactor=B.rolloffFactor,Be.panningModel=B.panningModel):(U._pos||(U._pos=m._pos||[0,0,-.5]),ce(U,"spatial"))}return m},Sound.prototype.init=function(m){return function(){var C=this,M=C._parent;C._orientation=M._orientation,C._stereo=M._stereo,C._pos=M._pos,C._pannerAttr=M._pannerAttr,m.call(this),C._stereo?M.stereo(C._stereo):C._pos&&M.pos(C._pos[0],C._pos[1],C._pos[2],C._id)}}(Sound.prototype.init),Sound.prototype.reset=function(m){return function(){var C=this,M=C._parent;return C._orientation=M._orientation,C._stereo=M._stereo,C._pos=M._pos,C._pannerAttr=M._pannerAttr,C._stereo?M.stereo(C._stereo):C._pos?M.pos(C._pos[0],C._pos[1],C._pos[2],C._id):C._panner&&(C._panner.disconnect(0),C._panner=void 0,M._refreshBuffer(C)),m.call(this)}}(Sound.prototype.reset);var ce=function(m,C){"spatial"===(C=C||"spatial")?(m._panner=Howler.ctx.createPanner(),m._panner.coneInnerAngle=m._pannerAttr.coneInnerAngle,m._panner.coneOuterAngle=m._pannerAttr.coneOuterAngle,m._panner.coneOuterGain=m._pannerAttr.coneOuterGain,m._panner.distanceModel=m._pannerAttr.distanceModel,m._panner.maxDistance=m._pannerAttr.maxDistance,m._panner.refDistance=m._pannerAttr.refDistance,m._panner.rolloffFactor=m._pannerAttr.rolloffFactor,m._panner.panningModel=m._pannerAttr.panningModel,typeof m._panner.positionX<"u"?(m._panner.positionX.setValueAtTime(m._pos[0],Howler.ctx.currentTime),m._panner.positionY.setValueAtTime(m._pos[1],Howler.ctx.currentTime),m._panner.positionZ.setValueAtTime(m._pos[2],Howler.ctx.currentTime)):m._panner.setPosition(m._pos[0],m._pos[1],m._pos[2]),typeof m._panner.orientationX<"u"?(m._panner.orientationX.setValueAtTime(m._orientation[0],Howler.ctx.currentTime),m._panner.orientationY.setValueAtTime(m._orientation[1],Howler.ctx.currentTime),m._panner.orientationZ.setValueAtTime(m._orientation[2],Howler.ctx.currentTime)):m._panner.setOrientation(m._orientation[0],m._orientation[1],m._orientation[2])):(m._panner=Howler.ctx.createStereoPanner(),m._panner.pan.setValueAtTime(m._stereo,Howler.ctx.currentTime)),m._panner.connect(m._node),m._paused||m._parent.pause(m._id,!0).play(m._id,!0)}}()},952:xt=>{!function(){var E,Z,z=function(d,y){d.value=y},ce=Object.create(null,{activate:{writable:!0,value:function(d){d?(this.input.disconnect(),this.input.connect(this.activateNode),this.activateCallback&&this.activateCallback(d)):(this.input.disconnect(),this.input.connect(this.output))}},bypass:{get:function(){return this._bypass},set:function(d){this._lastBypassValue!==d&&(this._bypass=d,this.activate(!d),this._lastBypassValue=d)}},connect:{value:function(d){this.output.connect(d)}},disconnect:{value:function(d){this.output.disconnect(d)}},connectInOrder:{value:function(d){for(var y=d.length-1;y--;){if(!d[y].connect)return console.error("AudioNode.connectInOrder: TypeError: Not an AudioNode.",d[y]);d[y].connect(d[y+1].input?d[y+1].input:d[y+1])}}},getDefaults:{value:function(){var d={};for(var y in this.defaults)d[y]=this.defaults[y].value;return d}},automate:{value:function(d,y,w,D){var Oe,T=D?~~(D/1e3):E.currentTime,P=w?~~(w/1e3):0,re=this[d];re?this.defaults[d].automatable?(w?(Oe="linearRampToValueAtTime",re.cancelScheduledValues(T),re.setValueAtTime(re.value,T)):Oe="setValueAtTime",re[Oe](y,P+T)):re=y:console.error("Invalid Property for "+this.name)}}}),m="float",C="boolean",$="int";function V(d){if(!(this instanceof V))return new V(d);var y=typeof window>"u"?{}:window;if(y.AudioContext||(y.AudioContext=y.webkitAudioContext),d||(console.log("tuna.js: Missing audio context! Creating a new context for you."),d=y.AudioContext&&new y.AudioContext),!d)throw new Error("Tuna cannot initialize because this environment does not support web audio.");(function q(d){if(!0!==d.__connectified__){var y=d.createGain(),w=Object.getPrototypeOf(Object.getPrototypeOf(y)),D=w.connect;w.connect=function T(){var P=arguments[0];return arguments[0]=ce.isPrototypeOf?ce.isPrototypeOf(P)?P.input:P:P.input||P,D.apply(this,arguments),P},d.__connectified__=!0}})(d),E=d,Z=this}function B(d){return Math.max(0,Math.round(100*Math.pow(2,d/6))/100)}function Be(d,y){var w,D,P,T=0,G=0,re=0;return w=d.toExponential().match(/^.\.?(.*)e(.+)$/),T=parseInt(w[2],10)-(w[1]+"").length,w=y.toExponential().match(/^.\.?(.*)e(.+)$/),(P=parseInt(w[2],10)-(w[1]+"").length)>T&&(T=P),D=d%y,T<-100||T>20?(G=Math.round(Math.log(D)/Math.log(10)),(D/(re=Math.pow(10,G))).toFixed(G-T)*re):parseFloat(D.toFixed(-T))}function l(d){return 0===d?1:Math.abs(d)/d}function h(d){return(Math.exp(d)-Math.exp(-d))/(Math.exp(d)+Math.exp(-d))}function g(d,y){return void 0===d?y:d}xt.exports?xt.exports=V:window.define("Tuna",function U(){return V}),(V.prototype.Bitcrusher=function(d){d||(d=this.getDefaults()),this.bufferSize=d.bufferSize||this.defaults.bufferSize.value,this.input=E.createGain(),this.activateNode=E.createGain(),this.processor=E.createScriptProcessor(this.bufferSize,1,1),this.output=E.createGain(),this.activateNode.connect(this.processor),this.processor.connect(this.output);var D,T,P,G,re,y=0,w=0;this.processor.onaudioprocess=function(Oe){for(D=Oe.inputBuffer.getChannelData(0),T=Oe.outputBuffer.getChannelData(0),P=Math.pow(.5,this.bits),re=D.length,G=0;G<re;G++)(y+=this.normfreq)>=1&&(y-=1,w=P*Math.floor(D[G]/P+.5)),T[G]=w},this.bits=d.bits||this.defaults.bits.value,this.normfreq=g(d.normfreq,this.defaults.normfreq.value),this.bypass=d.bypass||this.defaults.bypass.value}).prototype=Object.create(ce,{name:{value:"Bitcrusher"},defaults:{writable:!0,value:{bits:{value:4,min:1,max:16,automatable:!1,type:$},bufferSize:{value:4096,min:256,max:16384,automatable:!1,type:$},bypass:{value:!1,automatable:!1,type:C},normfreq:{value:.1,min:1e-4,max:1,automatable:!1,type:m}}},bits:{enumerable:!0,get:function(){return this.processor.bits},set:function(d){this.processor.bits=d}},normfreq:{enumerable:!0,get:function(){return this.processor.normfreq},set:function(d){this.processor.normfreq=d}}}),(V.prototype.Cabinet=function(d){d||(d=this.getDefaults()),this.input=E.createGain(),this.activateNode=E.createGain(),this.convolver=this.newConvolver(d.impulsePath||"../impulses/impulse_guitar.wav"),this.makeupNode=E.createGain(),this.output=E.createGain(),this.activateNode.connect(this.convolver.input),this.convolver.output.connect(this.makeupNode),this.makeupNode.connect(this.output),this.makeupNode.gain.value=g(d.makeupGain,this.defaults.makeupGain.value),this.bypass=d.bypass||this.defaults.bypass.value}).prototype=Object.create(ce,{name:{value:"Cabinet"},defaults:{writable:!0,value:{makeupGain:{value:1,min:0,max:20,automatable:!0,type:m},bypass:{value:!1,automatable:!1,type:C}}},makeupGain:{enumerable:!0,get:function(){return this.makeupNode.gain},set:function(d){this.makeupNode.gain.setTargetAtTime(d,E.currentTime,.01)}},newConvolver:{value:function(d){return new Z.Convolver({impulse:d,dryLevel:0,wetLevel:1})}}}),(V.prototype.Chorus=function(d){d||(d=this.getDefaults()),this.input=E.createGain(),this.attenuator=this.activateNode=E.createGain(),this.splitter=E.createChannelSplitter(2),this.delayL=E.createDelay(),this.delayR=E.createDelay(),this.feedbackGainNodeLR=E.createGain(),this.feedbackGainNodeRL=E.createGain(),this.merger=E.createChannelMerger(2),this.output=E.createGain(),this.lfoL=new Z.LFO({target:this.delayL.delayTime,callback:z}),this.lfoR=new Z.LFO({target:this.delayR.delayTime,callback:z}),this.input.connect(this.attenuator),this.attenuator.connect(this.output),this.attenuator.connect(this.splitter),this.splitter.connect(this.delayL,0),this.splitter.connect(this.delayR,1),this.delayL.connect(this.feedbackGainNodeLR),this.delayR.connect(this.feedbackGainNodeRL),this.feedbackGainNodeLR.connect(this.delayR),this.feedbackGainNodeRL.connect(this.delayL),this.delayL.connect(this.merger,0,0),this.delayR.connect(this.merger,0,1),this.merger.connect(this.output),this.feedback=g(d.feedback,this.defaults.feedback.value),this.rate=g(d.rate,this.defaults.rate.value),this.delay=g(d.delay,this.defaults.delay.value),this.depth=g(d.depth,this.defaults.depth.value),this.lfoR.phase=Math.PI/2,this.attenuator.gain.value=.6934,this.lfoL.activate(!0),this.lfoR.activate(!0),this.bypass=d.bypass||this.defaults.bypass.value}).prototype=Object.create(ce,{name:{value:"Chorus"},defaults:{writable:!0,value:{feedback:{value:.4,min:0,max:.95,automatable:!1,type:m},delay:{value:.0045,min:0,max:1,automatable:!1,type:m},depth:{value:.7,min:0,max:1,automatable:!1,type:m},rate:{value:1.5,min:0,max:8,automatable:!1,type:m},bypass:{value:!1,automatable:!1,type:C}}},delay:{enumerable:!0,get:function(){return this._delay},set:function(d){this._delay=2*Math.pow(10,d)*2e-4,this.lfoL.offset=this._delay,this.lfoR.offset=this._delay,this._depth=this._depth}},depth:{enumerable:!0,get:function(){return this._depth},set:function(d){this._depth=d,this.lfoL.oscillation=this._depth*this._delay,this.lfoR.oscillation=this._depth*this._delay}},feedback:{enumerable:!0,get:function(){return this._feedback},set:function(d){this._feedback=d,this.feedbackGainNodeLR.gain.setTargetAtTime(this._feedback,E.currentTime,.01),this.feedbackGainNodeRL.gain.setTargetAtTime(this._feedback,E.currentTime,.01)}},rate:{enumerable:!0,get:function(){return this._rate},set:function(d){this._rate=d,this.lfoL.frequency=this._rate,this.lfoR.frequency=this._rate}}}),(V.prototype.Compressor=function(d){d||(d=this.getDefaults()),this.input=E.createGain(),this.compNode=this.activateNode=E.createDynamicsCompressor(),this.makeupNode=E.createGain(),this.output=E.createGain(),this.compNode.connect(this.makeupNode),this.makeupNode.connect(this.output),this.automakeup=g(d.automakeup,this.defaults.automakeup.value),this.makeupNode.gain.value=B(this.automakeup?this.computeMakeup():g(d.makeupGain,this.defaults.makeupGain.value)),this.threshold=g(d.threshold,this.defaults.threshold.value),this.release=g(d.release,this.defaults.release.value),this.attack=g(d.attack,this.defaults.attack.value),this.ratio=d.ratio||this.defaults.ratio.value,this.knee=g(d.knee,this.defaults.knee.value),this.bypass=d.bypass||this.defaults.bypass.value}).prototype=Object.create(ce,{name:{value:"Compressor"},defaults:{writable:!0,value:{threshold:{value:-20,min:-60,max:0,automatable:!0,type:m},release:{value:250,min:10,max:2e3,automatable:!0,type:m},makeupGain:{value:1,min:1,max:100,automatable:!0,type:m},attack:{value:1,min:0,max:1e3,automatable:!0,type:m},ratio:{value:4,min:1,max:50,automatable:!0,type:m},knee:{value:5,min:0,max:40,automatable:!0,type:m},automakeup:{value:!1,automatable:!1,type:C},bypass:{value:!1,automatable:!1,type:C}}},computeMakeup:{value:function(){var y=this.compNode;return-(y.threshold.value-y.threshold.value/y.ratio.value)/4}},automakeup:{enumerable:!0,get:function(){return this._automakeup},set:function(d){this._automakeup=d,this._automakeup&&(this.makeupGain=this.computeMakeup())}},threshold:{enumerable:!0,get:function(){return this.compNode.threshold},set:function(d){this.compNode.threshold.value=d,this._automakeup&&(this.makeupGain=this.computeMakeup())}},ratio:{enumerable:!0,get:function(){return this.compNode.ratio},set:function(d){this.compNode.ratio.value=d,this._automakeup&&(this.makeupGain=this.computeMakeup())}},knee:{enumerable:!0,get:function(){return this.compNode.knee},set:function(d){this.compNode.knee.value=d,this._automakeup&&(this.makeupGain=this.computeMakeup())}},attack:{enumerable:!0,get:function(){return this.compNode.attack},set:function(d){this.compNode.attack.value=d/1e3}},release:{enumerable:!0,get:function(){return this.compNode.release},set:function(d){this.compNode.release.value=d/1e3}},makeupGain:{enumerable:!0,get:function(){return this.makeupNode.gain},set:function(d){this.makeupNode.gain.setTargetAtTime(B(d),E.currentTime,.01)}}}),(V.prototype.Convolver=function(d){d||(d=this.getDefaults()),this.input=E.createGain(),this.activateNode=E.createGain(),this.convolver=E.createConvolver(),this.dry=E.createGain(),this.filterLow=E.createBiquadFilter(),this.filterHigh=E.createBiquadFilter(),this.wet=E.createGain(),this.output=E.createGain(),this.activateNode.connect(this.filterLow),this.activateNode.connect(this.dry),this.filterLow.connect(this.filterHigh),this.filterHigh.connect(this.convolver),this.convolver.connect(this.wet),this.wet.connect(this.output),this.dry.connect(this.output),this.dry.gain.value=g(d.dryLevel,this.defaults.dryLevel.value),this.wet.gain.value=g(d.wetLevel,this.defaults.wetLevel.value),this.filterHigh.frequency.value=d.highCut||this.defaults.highCut.value,this.filterLow.frequency.value=d.lowCut||this.defaults.lowCut.value,this.output.gain.value=g(d.level,this.defaults.level.value),this.filterHigh.type="lowpass",this.filterLow.type="highpass",this.buffer=d.impulse||"../impulses/ir_rev_short.wav",this.bypass=d.bypass||this.defaults.bypass.value}).prototype=Object.create(ce,{name:{value:"Convolver"},defaults:{writable:!0,value:{highCut:{value:22050,min:20,max:22050,automatable:!0,type:m},lowCut:{value:20,min:20,max:22050,automatable:!0,type:m},dryLevel:{value:1,min:0,max:1,automatable:!0,type:m},wetLevel:{value:1,min:0,max:1,automatable:!0,type:m},level:{value:1,min:0,max:1,automatable:!0,type:m},bypass:{value:!1,automatable:!1,type:C}}},lowCut:{get:function(){return this.filterLow.frequency},set:function(d){this.filterLow.frequency.setTargetAtTime(d,E.currentTime,.01)}},highCut:{get:function(){return this.filterHigh.frequency},set:function(d){this.filterHigh.frequency.setTargetAtTime(d,E.currentTime,.01)}},level:{get:function(){return this.output.gain},set:function(d){this.output.gain.setTargetAtTime(d,E.currentTime,.01)}},dryLevel:{get:function(){return this.dry.gain},set:function(d){this.dry.gain.setTargetAtTime(d,E.currentTime,.01)}},wetLevel:{get:function(){return this.wet.gain},set:function(d){this.wet.gain.setTargetAtTime(d,E.currentTime,.01)}},buffer:{enumerable:!1,get:function(){return this.convolver.buffer},set:function(d){var y=this.convolver,w=new XMLHttpRequest;d?(w.open("GET",d,!0),w.responseType="arraybuffer",w.onreadystatechange=function(){4===w.readyState&&(w.status<300&&w.status>199||302===w.status)&&E.decodeAudioData(w.response,function(D){y.buffer=D},function(D){D&&console.log("Tuna.Convolver.setBuffer: Error decoding data"+D)})},w.send(null)):console.log("Tuna.Convolver.setBuffer: Missing impulse path!")}}}),(V.prototype.Delay=function(d){d||(d=this.getDefaults()),this.input=E.createGain(),this.activateNode=E.createGain(),this.dry=E.createGain(),this.wet=E.createGain(),this.filter=E.createBiquadFilter(),this.delay=E.createDelay(10),this.feedbackNode=E.createGain(),this.output=E.createGain(),this.activateNode.connect(this.delay),this.activateNode.connect(this.dry),this.delay.connect(this.filter),this.filter.connect(this.feedbackNode),this.feedbackNode.connect(this.delay),this.feedbackNode.connect(this.wet),this.wet.connect(this.output),this.dry.connect(this.output),this.delayTime=d.delayTime||this.defaults.delayTime.value,this.feedbackNode.gain.value=g(d.feedback,this.defaults.feedback.value),this.wet.gain.value=g(d.wetLevel,this.defaults.wetLevel.value),this.dry.gain.value=g(d.dryLevel,this.defaults.dryLevel.value),this.filter.frequency.value=d.cutoff||this.defaults.cutoff.value,this.filter.type="lowpass",this.bypass=d.bypass||this.defaults.bypass.value}).prototype=Object.create(ce,{name:{value:"Delay"},defaults:{writable:!0,value:{delayTime:{value:100,min:20,max:1e3,automatable:!1,type:m},feedback:{value:.45,min:0,max:.9,automatable:!0,type:m},cutoff:{value:2e4,min:20,max:2e4,automatable:!0,type:m},wetLevel:{value:.5,min:0,max:1,automatable:!0,type:m},dryLevel:{value:1,min:0,max:1,automatable:!0,type:m},bypass:{value:!1,automatable:!1,type:C}}},delayTime:{enumerable:!0,get:function(){return this.delay.delayTime},set:function(d){this.delay.delayTime.value=d/1e3}},wetLevel:{enumerable:!0,get:function(){return this.wet.gain},set:function(d){this.wet.gain.setTargetAtTime(d,E.currentTime,.01)}},dryLevel:{enumerable:!0,get:function(){return this.dry.gain},set:function(d){this.dry.gain.setTargetAtTime(d,E.currentTime,.01)}},feedback:{enumerable:!0,get:function(){return this.feedbackNode.gain},set:function(d){this.feedbackNode.gain.setTargetAtTime(d,E.currentTime,.01)}},cutoff:{enumerable:!0,get:function(){return this.filter.frequency},set:function(d){this.filter.frequency.setTargetAtTime(d,E.currentTime,.01)}}}),(V.prototype.Filter=function(d){d||(d=this.getDefaults()),this.input=E.createGain(),this.activateNode=E.createGain(),this.filter=E.createBiquadFilter(),this.output=E.createGain(),this.activateNode.connect(this.filter),this.filter.connect(this.output),this.filter.frequency.value=d.frequency||this.defaults.frequency.value,this.Q=d.resonance||this.defaults.Q.value,this.filterType=g(d.filterType,this.defaults.filterType.value),this.filter.gain.value=g(d.gain,this.defaults.gain.value),this.bypass=d.bypass||this.defaults.bypass.value}).prototype=Object.create(ce,{name:{value:"Filter"},defaults:{writable:!0,value:{frequency:{value:800,min:20,max:22050,automatable:!0,type:m},Q:{value:1,min:.001,max:100,automatable:!0,type:m},gain:{value:0,min:-40,max:40,automatable:!0,type:m},bypass:{value:!1,automatable:!1,type:C},filterType:{value:"lowpass",automatable:!1,type:"string"}}},filterType:{enumerable:!0,get:function(){return this.filter.type},set:function(d){this.filter.type=d}},Q:{enumerable:!0,get:function(){return this.filter.Q},set:function(d){this.filter.Q.value=d}},gain:{enumerable:!0,get:function(){return this.filter.gain},set:function(d){this.filter.gain.setTargetAtTime(d,E.currentTime,.01)}},frequency:{enumerable:!0,get:function(){return this.filter.frequency},set:function(d){this.filter.frequency.setTargetAtTime(d,E.currentTime,.01)}}}),(V.prototype.Gain=function(d){d||(d=this.getDefaults()),this.input=E.createGain(),this.activateNode=E.createGain(),this.gainNode=E.createGain(),this.output=E.createGain(),this.activateNode.connect(this.gainNode),this.gainNode.connect(this.output),this.gainNode.gain.value=g(d.gain,this.defaults.gain.value),this.bypass=d.bypass||this.defaults.bypass.value}).prototype=Object.create(ce,{name:{value:"Gain"},defaults:{writable:!0,value:{bypass:{value:!1,automatable:!1,type:C},gain:{value:1,automatable:!0,type:m}}},gain:{enumerable:!0,get:function(){return this.gainNode.gain},set:function(d){this.gainNode.gain.setTargetAtTime(d,E.currentTime,.01)}}}),(V.prototype.MoogFilter=function(d){var y,w,D,T,P,G,re,Oe,Ye,Pt,se,sn,ft,En,an;d||(d=this.getDefaults()),this.bufferSize=d.bufferSize||this.defaults.bufferSize.value,this.input=E.createGain(),this.activateNode=E.createGain(),this.processor=E.createScriptProcessor(this.bufferSize,1,1),this.output=E.createGain(),this.activateNode.connect(this.processor),this.processor.connect(this.output),y=w=D=T=P=G=re=Oe=0,this.processor.onaudioprocess=function(Wt){for(Ye=Wt.inputBuffer.getChannelData(0),Pt=Wt.outputBuffer.getChannelData(0),an=(se=1.16*this.cutoff)*se*.35013*(se*se),sn=this.resonance*(1-.15*se*se),En=Ye.length,ft=0;ft<En;ft++)Ye[ft]-=Oe*sn,Ye[ft]*=an,P=Ye[ft]+.3*y+(1-se)*P,y=Ye[ft],G=P+.3*w+(1-se)*G,w=P,re=G+.3*D+(1-se)*re,D=G,Oe=re+.3*T+(1-se)*Oe,T=re,Pt[ft]=Oe},this.cutoff=g(d.cutoff,this.defaults.cutoff.value),this.resonance=g(d.resonance,this.defaults.resonance.value),this.bypass=d.bypass||this.defaults.bypass.value}).prototype=Object.create(ce,{name:{value:"MoogFilter"},defaults:{writable:!0,value:{bufferSize:{value:4096,min:256,max:16384,automatable:!1,type:$},bypass:{value:!1,automatable:!1,type:C},cutoff:{value:.065,min:1e-4,max:1,automatable:!1,type:m},resonance:{value:3.5,min:0,max:4,automatable:!1,type:m}}},cutoff:{enumerable:!0,get:function(){return this.processor.cutoff},set:function(d){this.processor.cutoff=d}},resonance:{enumerable:!0,get:function(){return this.processor.resonance},set:function(d){this.processor.resonance=d}}}),(V.prototype.Overdrive=function(d){d||(d=this.getDefaults()),this.input=E.createGain(),this.activateNode=E.createGain(),this.inputDrive=E.createGain(),this.waveshaper=E.createWaveShaper(),this.outputDrive=E.createGain(),this.output=E.createGain(),this.activateNode.connect(this.inputDrive),this.inputDrive.connect(this.waveshaper),this.waveshaper.connect(this.outputDrive),this.outputDrive.connect(this.output),this.ws_table=new Float32Array(this.k_nSamples),this.drive=g(d.drive,this.defaults.drive.value),this.outputGain=g(d.outputGain,this.defaults.outputGain.value),this.curveAmount=g(d.curveAmount,this.defaults.curveAmount.value),this.algorithmIndex=g(d.algorithmIndex,this.defaults.algorithmIndex.value),this.bypass=d.bypass||this.defaults.bypass.value}).prototype=Object.create(ce,{name:{value:"Overdrive"},defaults:{writable:!0,value:{drive:{value:.197,min:0,max:1,automatable:!0,type:m,scaled:!0},outputGain:{value:-9.154,min:-46,max:0,automatable:!0,type:m,scaled:!0},curveAmount:{value:.979,min:0,max:1,automatable:!1,type:m},algorithmIndex:{value:0,min:0,max:5,automatable:!1,type:$},bypass:{value:!1,automatable:!1,type:C}}},k_nSamples:{value:8192},drive:{get:function(){return this.inputDrive.gain},set:function(d){this.inputDrive.gain.value=d}},curveAmount:{get:function(){return this._curveAmount},set:function(d){this._curveAmount=d,void 0===this._algorithmIndex&&(this._algorithmIndex=0),this.waveshaperAlgorithms[this._algorithmIndex](this._curveAmount,this.k_nSamples,this.ws_table),this.waveshaper.curve=this.ws_table}},outputGain:{get:function(){return this.outputDrive.gain},set:function(d){this._outputGain=B(d),this.outputDrive.gain.setValueAtTime(this._outputGain,E.currentTime,.01)}},algorithmIndex:{get:function(){return this._algorithmIndex},set:function(d){this._algorithmIndex=d,this.curveAmount=this._curveAmount}},waveshaperAlgorithms:{value:[function(d,y,w){var T,P,D=2*(d=Math.min(d,.9999))/(1-d);for(T=0;T<y;T++)w[T]=(1+D)*(P=2*T/y-1)/(1+D*Math.abs(P))},function(d,y,w){var D,P;for(D=0;D<y;D++)P=(.5*Math.pow(2*D/y-1+1.4,2)-1)*(P>=0?5.8:1.2),w[D]=h(P)},function(d,y,w){var D,T,P,G=1-d;for(D=0;D<y;D++)P=(T=2*D/y-1)<0?-Math.pow(Math.abs(T),G+.04):Math.pow(T,G),w[D]=h(2*P)},function(d,y,w){var D,T,P,G,re=1-d>.99?.99:1-d;for(D=0;D<y;D++)T=2*D/y-1,(G=Math.abs(T))<re?P=G:G>re?P=re+(G-re)/(1+Math.pow((G-re)/(1-re),2)):G>1&&(P=G),w[D]=l(T)*P*(1/((re+1)/2))},function(d,y,w){var D,T;for(D=0;D<y;D++)w[D]=(T=2*D/y-1)<-.08905?-3/4*(1-Math.pow(1-(Math.abs(T)-.032857),12)+1/3*(Math.abs(T)-.032847))+.01:T>=-.08905&&T<.320018?T*T*-6.153+3.9375*T:.630035},function(d,y,w){var P,D=2+Math.round(14*d),T=Math.round(Math.pow(2,D-1));for(P=0;P<y;P++)w[P]=Math.round((2*P/y-1)*T)/T}]}}),(V.prototype.Panner=function(d){d||(d=this.getDefaults()),this.input=E.createGain(),this.activateNode=E.createGain(),this.panner=E.createStereoPanner(),this.output=E.createGain(),this.activateNode.connect(this.panner),this.panner.connect(this.output),this.pan=g(d.pan,this.defaults.pan.value),this.bypass=d.bypass||this.defaults.bypass.value}).prototype=Object.create(ce,{name:{value:"Panner"},defaults:{writable:!0,value:{bypass:{value:!1,automatable:!1,type:C},pan:{value:0,min:-1,max:1,automatable:!0,type:m}}},pan:{enumerable:!0,get:function(){return this.panner.pan},set:function(d){this.panner.pan.value=d}}}),(V.prototype.Phaser=function(d){d||(d=this.getDefaults()),this.input=E.createGain(),this.splitter=this.activateNode=E.createChannelSplitter(2),this.filtersL=[],this.filtersR=[],this.feedbackGainNodeL=E.createGain(),this.feedbackGainNodeR=E.createGain(),this.merger=E.createChannelMerger(2),this.filteredSignal=E.createGain(),this.output=E.createGain(),this.lfoL=new Z.LFO({target:this.filtersL,callback:this.callback}),this.lfoR=new Z.LFO({target:this.filtersR,callback:this.callback});for(var y=this.stage;y--;)this.filtersL[y]=E.createBiquadFilter(),this.filtersR[y]=E.createBiquadFilter(),this.filtersL[y].type="allpass",this.filtersR[y].type="allpass";this.input.connect(this.splitter),this.input.connect(this.output),this.splitter.connect(this.filtersL[0],0,0),this.splitter.connect(this.filtersR[0],1,0),this.connectInOrder(this.filtersL),this.connectInOrder(this.filtersR),this.filtersL[this.stage-1].connect(this.feedbackGainNodeL),this.filtersL[this.stage-1].connect(this.merger,0,0),this.filtersR[this.stage-1].connect(this.feedbackGainNodeR),this.filtersR[this.stage-1].connect(this.merger,0,1),this.feedbackGainNodeL.connect(this.filtersL[0]),this.feedbackGainNodeR.connect(this.filtersR[0]),this.merger.connect(this.output),this.rate=g(d.rate,this.defaults.rate.value),this.baseModulationFrequency=d.baseModulationFrequency||this.defaults.baseModulationFrequency.value,this.depth=g(d.depth,this.defaults.depth.value),this.feedback=g(d.feedback,this.defaults.feedback.value),this.stereoPhase=g(d.stereoPhase,this.defaults.stereoPhase.value),this.lfoL.activate(!0),this.lfoR.activate(!0),this.bypass=d.bypass||this.defaults.bypass.value}).prototype=Object.create(ce,{name:{value:"Phaser"},stage:{value:4},defaults:{writable:!0,value:{rate:{value:.1,min:0,max:8,automatable:!1,type:m},depth:{value:.6,min:0,max:1,automatable:!1,type:m},feedback:{value:.7,min:0,max:1,automatable:!1,type:m},stereoPhase:{value:40,min:0,max:180,automatable:!1,type:m},baseModulationFrequency:{value:700,min:500,max:1500,automatable:!1,type:m},bypass:{value:!1,automatable:!1,type:C}}},callback:{value:function(d,y){for(var w=0;w<4;w++)d[w].frequency.value=y}},depth:{get:function(){return this._depth},set:function(d){this._depth=d,this.lfoL.oscillation=this._baseModulationFrequency*this._depth,this.lfoR.oscillation=this._baseModulationFrequency*this._depth}},rate:{get:function(){return this._rate},set:function(d){this._rate=d,this.lfoL.frequency=this._rate,this.lfoR.frequency=this._rate}},baseModulationFrequency:{enumerable:!0,get:function(){return this._baseModulationFrequency},set:function(d){this._baseModulationFrequency=d,this.lfoL.offset=this._baseModulationFrequency,this.lfoR.offset=this._baseModulationFrequency,this.depth=this._depth}},feedback:{get:function(){return this._feedback},set:function(d){this._feedback=d,this.feedbackGainNodeL.gain.setTargetAtTime(this._feedback,E.currentTime,.01),this.feedbackGainNodeR.gain.setTargetAtTime(this._feedback,E.currentTime,.01)}},stereoPhase:{get:function(){return this._stereoPhase},set:function(d){this._stereoPhase=d;var y=this.lfoL._phase+this._stereoPhase*Math.PI/180;y=Be(y,2*Math.PI),this.lfoR._phase=y}}}),(V.prototype.PingPongDelay=function(d){d||(d=this.getDefaults()),this.input=E.createGain(),this.wet=E.createGain(),this.stereoToMonoMix=E.createGain(),this.feedbackLevel=E.createGain(),this.output=E.createGain(),this.delayLeft=E.createDelay(10),this.delayRight=E.createDelay(10),this.activateNode=E.createGain(),this.splitter=E.createChannelSplitter(2),this.merger=E.createChannelMerger(2),this.activateNode.connect(this.splitter),this.splitter.connect(this.stereoToMonoMix,0,0),this.splitter.connect(this.stereoToMonoMix,1,0),this.stereoToMonoMix.gain.value=.5,this.stereoToMonoMix.connect(this.wet),this.wet.connect(this.delayLeft),this.feedbackLevel.connect(this.wet),this.delayLeft.connect(this.delayRight),this.delayRight.connect(this.feedbackLevel),this.delayLeft.connect(this.merger,0,0),this.delayRight.connect(this.merger,0,1),this.merger.connect(this.output),this.activateNode.connect(this.output),this.delayTimeLeft=void 0!==d.delayTimeLeft?d.delayTimeLeft:this.defaults.delayTimeLeft.value,this.delayTimeRight=void 0!==d.delayTimeRight?d.delayTimeRight:this.defaults.delayTimeRight.value,this.feedbackLevel.gain.value=void 0!==d.feedback?d.feedback:this.defaults.feedback.value,this.wet.gain.value=void 0!==d.wetLevel?d.wetLevel:this.defaults.wetLevel.value,this.bypass=d.bypass||this.defaults.bypass.value}).prototype=Object.create(ce,{name:{value:"PingPongDelay"},delayTimeLeft:{enumerable:!0,get:function(){return this._delayTimeLeft},set:function(d){this._delayTimeLeft=d,this.delayLeft.delayTime.value=d/1e3}},delayTimeRight:{enumerable:!0,get:function(){return this._delayTimeRight},set:function(d){this._delayTimeRight=d,this.delayRight.delayTime.value=d/1e3}},wetLevel:{enumerable:!0,get:function(){return this.wet.gain},set:function(d){this.wet.gain.setTargetAtTime(d,E.currentTime,.01)}},feedback:{enumerable:!0,get:function(){return this.feedbackLevel.gain},set:function(d){this.feedbackLevel.gain.setTargetAtTime(d,E.currentTime,.01)}},defaults:{writable:!0,value:{delayTimeLeft:{value:200,min:1,max:1e4,automatable:!1,type:$},delayTimeRight:{value:400,min:1,max:1e4,automatable:!1,type:$},feedback:{value:.3,min:0,max:1,automatable:!0,type:m},wetLevel:{value:.5,min:0,max:1,automatable:!0,type:m},bypass:{value:!1,automatable:!1,type:C}}}}),(V.prototype.Tremolo=function(d){d||(d=this.getDefaults()),this.input=E.createGain(),this.splitter=this.activateNode=E.createChannelSplitter(2),this.amplitudeL=E.createGain(),this.amplitudeR=E.createGain(),this.merger=E.createChannelMerger(2),this.output=E.createGain(),this.lfoL=new Z.LFO({target:this.amplitudeL.gain,callback:z}),this.lfoR=new Z.LFO({target:this.amplitudeR.gain,callback:z}),this.input.connect(this.splitter),this.splitter.connect(this.amplitudeL,0),this.splitter.connect(this.amplitudeR,1),this.amplitudeL.connect(this.merger,0,0),this.amplitudeR.connect(this.merger,0,1),this.merger.connect(this.output),this.rate=d.rate||this.defaults.rate.value,this.intensity=g(d.intensity,this.defaults.intensity.value),this.stereoPhase=g(d.stereoPhase,this.defaults.stereoPhase.value),this.lfoL.offset=1-this.intensity/2,this.lfoR.offset=1-this.intensity/2,this.lfoL.phase=this.stereoPhase*Math.PI/180,this.lfoL.activate(!0),this.lfoR.activate(!0),this.bypass=d.bypass||this.defaults.bypass.value}).prototype=Object.create(ce,{name:{value:"Tremolo"},defaults:{writable:!0,value:{intensity:{value:.3,min:0,max:1,automatable:!1,type:m},stereoPhase:{value:0,min:0,max:180,automatable:!1,type:m},rate:{value:5,min:.1,max:11,automatable:!1,type:m},bypass:{value:!1,automatable:!1,type:C}}},intensity:{enumerable:!0,get:function(){return this._intensity},set:function(d){this._intensity=d,this.lfoL.offset=1-this._intensity/2,this.lfoR.offset=1-this._intensity/2,this.lfoL.oscillation=this._intensity,this.lfoR.oscillation=this._intensity}},rate:{enumerable:!0,get:function(){return this._rate},set:function(d){this._rate=d,this.lfoL.frequency=this._rate,this.lfoR.frequency=this._rate}},stereoPhase:{enumerable:!0,get:function(){return this._stereoPhase},set:function(d){this._stereoPhase=d;var y=this.lfoL._phase+this._stereoPhase*Math.PI/180;y=Be(y,2*Math.PI),this.lfoR.phase=y}}}),(V.prototype.WahWah=function(d){d||(d=this.getDefaults()),this.input=E.createGain(),this.activateNode=E.createGain(),this.envelopeFollower=new Z.EnvelopeFollower({target:this,callback:function(y,w){y.sweep=w}}),this.filterBp=E.createBiquadFilter(),this.filterPeaking=E.createBiquadFilter(),this.output=E.createGain(),this.activateNode.connect(this.filterBp),this.filterBp.connect(this.filterPeaking),this.filterPeaking.connect(this.output),this.init(),this.automode=g(d.automode,this.defaults.automode.value),this.resonance=d.resonance||this.defaults.resonance.value,this.sensitivity=g(d.sensitivity,this.defaults.sensitivity.value),this.baseFrequency=g(d.baseFrequency,this.defaults.baseFrequency.value),this.excursionOctaves=d.excursionOctaves||this.defaults.excursionOctaves.value,this.sweep=g(d.sweep,this.defaults.sweep.value),this.activateNode.gain.value=2,this.envelopeFollower.activate(!0),this.bypass=d.bypass||this.defaults.bypass.value}).prototype=Object.create(ce,{name:{value:"WahWah"},defaults:{writable:!0,value:{automode:{value:!0,automatable:!1,type:C},baseFrequency:{value:.153,min:0,max:1,automatable:!1,type:m},excursionOctaves:{value:3.3,min:1,max:6,automatable:!1,type:m},sweep:{value:.35,min:0,max:1,automatable:!1,type:m},resonance:{value:19,min:1,max:100,automatable:!1,type:m},sensitivity:{value:-.5,min:-1,max:1,automatable:!1,type:m},bypass:{value:!1,automatable:!1,type:C}}},automode:{get:function(){return this._automode},set:function(d){this._automode=d,d?(this.activateNode.connect(this.envelopeFollower.input),this.envelopeFollower.activate(!0)):(this.envelopeFollower.activate(!1),this.activateNode.disconnect(),this.activateNode.connect(this.filterBp))}},filterFreqTimeout:{writable:!0,value:0},setFilterFreq:{value:function(){try{this.filterBp.frequency.value=Math.min(22050,this._baseFrequency+this._excursionFrequency*this._sweep),this.filterPeaking.frequency.value=Math.min(22050,this._baseFrequency+this._excursionFrequency*this._sweep)}catch{clearTimeout(this.filterFreqTimeout),this.filterFreqTimeout=setTimeout(function(){this.setFilterFreq()}.bind(this),0)}}},sweep:{enumerable:!0,get:function(){return this._sweep},set:function(d){this._sweep=Math.pow(d>1?1:d<0?0:d,this._sensitivity),this.setFilterFreq()}},baseFrequency:{enumerable:!0,get:function(){return this._baseFrequency},set:function(d){this._baseFrequency=50*Math.pow(10,2*d),this._excursionFrequency=Math.min(E.sampleRate/2,this.baseFrequency*Math.pow(2,this._excursionOctaves)),this.setFilterFreq()}},excursionOctaves:{enumerable:!0,get:function(){return this._excursionOctaves},set:function(d){this._excursionOctaves=d,this._excursionFrequency=Math.min(E.sampleRate/2,this.baseFrequency*Math.pow(2,this._excursionOctaves)),this.setFilterFreq()}},sensitivity:{enumerable:!0,get:function(){return this._sensitivity},set:function(d){this._sensitivity=Math.pow(10,d)}},resonance:{enumerable:!0,get:function(){return this._resonance},set:function(d){this._resonance=d,this.filterPeaking.Q.value=this._resonance}},init:{value:function(){this.output.gain.value=1,this.filterPeaking.type="peaking",this.filterBp.type="bandpass",this.filterPeaking.frequency.value=100,this.filterPeaking.gain.value=20,this.filterPeaking.Q.value=5,this.filterBp.frequency.value=100,this.filterBp.Q.value=1}}}),(V.prototype.EnvelopeFollower=function(d){d||(d=this.getDefaults()),this.input=E.createGain(),this.jsNode=this.output=E.createScriptProcessor(this.buffersize,1,1),this.input.connect(this.output),this.attackTime=g(d.attackTime,this.defaults.attackTime.value),this.releaseTime=g(d.releaseTime,this.defaults.releaseTime.value),this._envelope=0,this.target=d.target||{},this.callback=d.callback||function(){},this.bypass=d.bypass||this.defaults.bypass.value}).prototype=Object.create(ce,{name:{value:"EnvelopeFollower"},defaults:{value:{attackTime:{value:.003,min:0,max:.5,automatable:!1,type:m},releaseTime:{value:.5,min:0,max:.5,automatable:!1,type:m},bypass:{value:!1,automatable:!1,type:C}}},buffersize:{value:256},envelope:{value:0},sampleRate:{value:44100},attackTime:{enumerable:!0,get:function(){return this._attackTime},set:function(d){this._attackTime=d,this._attackC=Math.exp(-1/this._attackTime*this.sampleRate/this.buffersize)}},releaseTime:{enumerable:!0,get:function(){return this._releaseTime},set:function(d){this._releaseTime=d,this._releaseC=Math.exp(-1/this._releaseTime*this.sampleRate/this.buffersize)}},callback:{get:function(){return this._callback},set:function(d){"function"==typeof d?this._callback=d:console.error("tuna.js: "+this.name+": Callback must be a function!")}},target:{get:function(){return this._target},set:function(d){this._target=d}},activate:{value:function(d){this.activated=d,d?(this.jsNode.connect(E.destination),this.jsNode.onaudioprocess=this.returnCompute(this)):(this.jsNode.disconnect(),this.jsNode.onaudioprocess=null),this.activateCallback&&this.activateCallback(d)}},returnCompute:{value:function(d){return function(y){d.compute(y)}}},compute:{value:function(d){var D,T,P,G,y=d.inputBuffer.getChannelData(0).length,w=d.inputBuffer.numberOfChannels;for(T=P=G=0,T=0;T<w;++T)for(G=0;G<y;++G)P+=(D=d.inputBuffer.getChannelData(T)[G])*D;P=Math.sqrt(P/w),this._envelope<P?(this._envelope*=this._attackC,this._envelope+=(1-this._attackC)*P):(this._envelope*=this._releaseC,this._envelope+=(1-this._releaseC)*P),this._callback(this._target,this._envelope)}}}),(V.prototype.LFO=function(d){d||(d=this.getDefaults()),this.input=E.createGain(),this.output=E.createScriptProcessor(256,1,1),this.activateNode=E.destination,this.frequency=g(d.frequency,this.defaults.frequency.value),this.offset=g(d.offset,this.defaults.offset.value),this.oscillation=g(d.oscillation,this.defaults.oscillation.value),this.phase=g(d.phase,this.defaults.phase.value),this.target=d.target||{},this.output.onaudioprocess=this.callback(d.callback||function(){}),this.bypass=d.bypass||this.defaults.bypass.value}).prototype=Object.create(ce,{name:{value:"LFO"},bufferSize:{value:256},sampleRate:{value:44100},defaults:{value:{frequency:{value:1,min:0,max:20,automatable:!1,type:m},offset:{value:.85,min:0,max:22049,automatable:!1,type:m},oscillation:{value:.3,min:-22050,max:22050,automatable:!1,type:m},phase:{value:0,min:0,max:2*Math.PI,automatable:!1,type:m},bypass:{value:!1,automatable:!1,type:C}}},frequency:{get:function(){return this._frequency},set:function(d){this._frequency=d,this._phaseInc=2*Math.PI*this._frequency*this.bufferSize/this.sampleRate}},offset:{get:function(){return this._offset},set:function(d){this._offset=d}},oscillation:{get:function(){return this._oscillation},set:function(d){this._oscillation=d}},phase:{get:function(){return this._phase},set:function(d){this._phase=d}},target:{get:function(){return this._target},set:function(d){this._target=d}},activate:{value:function(d){d?(this.output.connect(E.destination),this.activateCallback&&this.activateCallback(d)):this.output.disconnect()}},callback:{value:function(d){var y=this;return function(){y._phase+=y._phaseInc,y._phase>2*Math.PI&&(y._phase=0),d(y._target,y._offset+y._oscillation*Math.sin(y._phase))}}}}),V.toString=V.prototype.toString=function(){return"Please visit https://github.com/Theodeus/tuna/wiki for instructions on how to use Tuna.js"}}()}},xt=>{xt(xt.s=591)}]);